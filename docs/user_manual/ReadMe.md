
> Беларускі праект знаходзіцца [тут](./ReadMeBY.md)


# Содержание

#### Проект

+ [Правила именования проекта](#1-Правила-именования-проекта)

#### Описание надстройки и ее использование
+ [Описание надстройки](#21-Описание-надстройки)
+ [Подключение к Eplan](#22-Подключение-к-Eplan)
+ [Описание автоматически генерируемых Lua-файлов](#23-Описание-автоматически-генерируемых-Lua-файлов)
+ [Настройка каталога проектов](#24-Настройка-каталога-проектов)
+ [Версия надстройки](#25-Версия-надстройки)
+ [Статистика](#26-Статистика)
    + [Оценочная сложность проекта](#261-Оценочная-сложность-проекта)
    + [Модуль простоя надстройки](#262-Модуль-простоя-надстройки)

#### Настройки проекта
+ [Настройка диапазона IP-адресов проекта](#31-Настройка-диапазона-IP-адресов-проекта)
+ [Настройка тестирования проекта](#32-Настройка-тестирования-проекта)
+ [Импортирование старых проектов](#33-импортирование-старых-проектов)
    + [Описание старого проекта](#331-описание-старого-проекта)
    + [Настройка правильной работы импорта устройств](#332-настройка-правильной-работы-импорта-старых-проектов)
    + [Переименование старых устройств](#333-переименование-старых-устройств)
    + [Импорт описания старого проекта на ФСА](#334-импорт-описания-старого-проекта-на-фса)
    + [Документ соответствия названий устройств](#335-документ-соответствия-названий-устройств)

#### Оборудование IO
+ [Настройка узлов и модулей ввода-вывода](#41-Настройка-узлов-и-модулей-ввода-вывода)
+ [Привязка устройств к модулям IO](#42-Привязка-устройств-к-модулям-IO)
    + [Привязка пневмоострова Festo (VTUG)](#421-Привязка-пневмоострова-Festo-VTUG)
    + [Правила написания комментариев к привязке](#422-Правила-написания-комментариев-к-привязке)
+ [Поддерживаемые модули ввода-вывода](#43-Поддерживаемые-модули-ввода-вывода)

#### Операции Eplan
+ [Объекты технологической схемы](#5-Объекты-технологической-схемы)
    + [Операции объектов](#51-Операции-объектов)
    + [Схемы](#52-Схемы)

#### Структура ПЛК [<sup>[StructPLC.md]</sup>](StructPLC.md)

#### Устройства технологической схемы
+ [Нумерация устройств](#61-Нумерация-устройств)
    + [Технологический объект](#611-Технологический-объект)
    + [Пользовательский объект](#612-Пользовательский-объект)
    + [Устройство](#613-Устройство)
+ [Перечень устройств](#62-Перечень-устройств)
    + [HA. Аварийная звуковая сигнализация. Сирена](#621-HA-Аварийная-звуковая-сигнализация-Сирена)
    + [FQT. Счетчик](#622-FQT-Счетчик)
    + [HL. Световая сигнализация](#623-HL-Световая-сигнализация)
    + [LT. Текущий уровень](#624-LT-Текущий-уровень)
    + [GS. Датчик положения](#625-GS-Датчик-положения)
    + [M. Мотор (электродвигатель)](#626-M-Мотор-Электродвигатель)
    + [FS. Датчик наличия потока](#627-FS-Датчик-наличия-потока)
    + [LS. Предельный уровень](#628-LS-Предельный-уровень)
    + [QT. Датчик проводимости](#629-QT-Датчик-проводимости)
    + [TE. Температура](#6210-TE-Температура)
    + [SB. Кнопка](#6211-SB-Кнопка)
    + [V. Клапан](#6212-V-Клапан)
    + [VC. Управляемый клапан](#6213-VC-Управляемый-клапан)
    + [DO. Управляющий (выходной) сигнал](#6214-DO-Управляющий-выходной-сигнал)
    + [DI. Входной сигнал](#6215-DI-Входной-сигнал)
    + [AO. Выходная величина](#6216-AO-Выходная-величина)
    + [AI. Входная величина](#6217-AI-Входная-величина)
    + [WT. Датчик веса](#6218-WT-Датчик-веса)
    + [PT. Датчик давления](#6219-PT-Датчик-давления)
    + [Y (DEV_VTUG). Пневмоостров Festo](#6220-Y-DEV_VTUG-Пневмоостров-Festo)
    + [F. Автоматический выключатель](#6221-F-Автоматический-выключатель)
    + [С. Регулятор](#6222-ПИД-регулятор)
    + [HLA. Сигнальная колонна](#6223-HLA-Сигнальная-колонна)
    + [CAM. Камера](#6224-CAM-Камера)
    + [PDS. Сигнальный датчик разницы давления](#6225-pds-сигнальный-датчик-разницы-давления)
    + [TS. Сигнальный датчик температуры](#6226-ts-сигнальный-датчик-температуры)
    + [G. Блок питания с автоматическим выключателем](#6227-G-Блок-питания-с-автоматическим-выключателем)
    + [WATCHDOG. Устройство проверки связи](#6228)
+ [Дополнительные параметры](#63-Дополнительные-параметры)
    + [Описание устройства](#631-Описание-устройства)
    + [Назначение дополнительных полей](#632-Назначение-дополнительных-полей)
+ [Изделия устройств](#64-Изделия-устройств)
+ [Работа с ПИД-регулятором](#65-Работа-с-ПИД-регулятором)

#### Редактирование технологических объектов
+ [Общие сведения о технологических объектах](#7-Общие-сведения-о-технологических-объектах)
+ [Описание окна редактора](#71-Описание-окна-редактора)
    + [Неопознанные объекты при загрузке описания проекта](#711-Неопознанные-объекты-при-загрузке-описания-проекта)
    + [Создание объектов](#712-Создание-объектов)
    + [Копирование, вставка и замена объекта](#713-Копирование-вставка-и-замена-объекта)
    + [Удаление объекта](#714-Удаление-объекта)
    + [Перемещение объектов вверх и вниз](#715-Перемещение-объектов-вверх-и-вниз)
    + [Добавление устройств в операции в текстовом виде](#716-Добавление-устройств-в-операции-в-текстовом-виде)
    + [Добавление устройств в операции в графическом виде](#717-Добавление-устройств-в-операции-в-графическом-виде)
    + [Добавление устройств в операции в табличном режиме](#718-Добавление-устройств-в-операции-в-табличном-режиме)
    + [Сохранение результатов редактирования](#719-Сохранение-результатов-редактирования)
    + [Использование параметров в объекте](#7110-Использование-параметров-в-объекте)
    + [Модификация названий устройств](#7111-модификация-названий-устройств)
+ [Описание действий](#72-Описание-действий)
+ [Использование функциональности базового объекта и базовой операции](#73-Использование-функциональности-базового-объекта-и-базовой-операции)
    + [Привязка базовых объектов друг к другу](#731-Привязка-базовых-объектов-друг-к-другу)
    + [Использование базовой операции](#732-Использование-базовой-операции)
    + [Использование базового шага](#733-Использование-базового-шага)
    + [Использование оборудования базового объекта](#734-Использование-оборудования-базового-объекта)
    + [Использование дополнительных свойств объекта](#735-Использование-дополнительных-свойств-объекта)
    + [Использование системных параметров в базовом объекте](#736-Использование-системных-параметров-в-базовом-объекте)
    + [Список базовых объектов, операций, параметров, шагов и оборудования](#737-Список-базовых-объектов-операций-параметров-шагов-и-оборудования)
    + [Рекомендации по использованию ОУ (обозначений устройств) в объектах](#738-Рекомендации-по-использованию-ОУ-обозначений-устройств-в-объектах)
+ [Экспорт объектов из редактора и обратный импорт](#74-Экспорт-объектов-из-редактора-и-обратный-импорт)
    + [Экспорт объектов](#741-Экспорт-объектов)
    + [Импорт объектов](#742-Импорт-объектов)
+ [Автоматическая вставка объектов из макросов](#75-Автоматическая-вставка-объектов-из-макросов)
+ [Сброс базового объекта в редакторе](#76-Сброс-базового-объекта)
+ [Использование групп с типовым объектом](#77-использование-групп-с-типовым-объектом)
    + [Добавление тех. объектов в типовой объект](#771-создание-группы-с-типовым-объектом-и-добавление-тех-объектов-в-группу)
    + [Действия](#772-действия)
    + [Параметры](#773-параметры)
    + [Привязанные агрегаты](#774-привязанные-агрегаты)
+ [Автозаполнение](#78-автозаполнение)
    + [Автозаполнение параметров](#781-автозаполнение-параметров)

#### Установка ограничений
+ [Установка ограничений в табличном виде](#8-Установка-ограничений)

#### Синхронизация и экспорт
+ [Синхронизация названий устройств и модулей](#91-Синхронизация-названий-устройств-и-модулей)
+ [Экспорт XML для EasyServer](#92-Экспорт-XML-для-EasyServer)
    + [Экспортируемые параметры](#921-Экспортируемые-параметры)
+ [Экспорт технологических устройств в Excel](#93-Экспорт-технологических-устройств-в-Excel)
    + [Экспорт информации в Excel для работы в SCADA](#931-Экспорт-информации-для-SCADA-из-проекта)

#### Объектная модель по ISA
+ [Объектная модель технологических объектов](#101-Объектная-модель-рецептурного-производства)

#### Система помощи OSTIS
+ [Использование OSTIS как системы помощи](#11-Система-помощи-OSTIS)

#### Межпроектный обмена сигналами ####
+ [Настройка межпроектного обмена сигналами](#12-Межпроектный-обмен-сигналами)
+ [Обмен сигналами по протоколу Modbus](ModbusExchange.md)

#### Работа с описанием базовых объектов ####
+ [Настройка и программирование описания базовых объектов](#13-Настройка-и-программирование-описания-базовых-объектов)

### IOL-Conf
+ [Автоматическая генерация описания для IOL-Conf](#14-Автоматическая-генерация-описания-для-IOL-Conf)
    + [Генерация шаблонов устройств и модуля ввода-вывода](#141-Генерация-шаблонов-устройств-и-модуля-ввода-вывода)
    + [Настройка параметров устройств](#142-Настройка-параметров-устройств)
    + [Возможные сообщения окна логов, и пути их решения](#143-Возможные-сообщения-окна-логов-и-пути-их-решения)



## 1 Правила именования проекта ##

Имя проекта является важной частью любого проекта. Оно используется в автоматически генерируемых .lua файлах (*PAC_name*), а так же в других функциях надстройки. Имя проекта берется из названия файла-ярлыка проекта (_предоставляется API Eplan_).

Имя проекта логически состоит из двух частей: имя площадки, имя проекта.

Правила именования:
- Имя не должно содержать кавычек, скобочек и прочих спецсимволов (_за исключением знака **минус**_);
- Имя площадки задается символами латинского алфавита с возможностью номерного обозначения площадки;
- Имя проекта задается символами кириллического алфавита с возможностью номерного обозначения;
- Знаки пробела, используемые в имени проекта, должны быть заменены на знак минус.

## 2 Описание надстройки и ее использование ##

### 2.1 Описание надстройки ###
<p align="justify">Надстройка EasyEPlanner разработана как Add-In к EPLAN, на данный момент используется EPLAN 2.9. Надстройка используется при разработке проектов в EPLAN и позволяет автоматизировать работу
инженера по автоматизации, а так же инженера-программиста, который описывает проект на языке программирования LUA. С помощью EasyEPlanner описываются технологические объекты (Танк, Бойлер и др.), операции этих объектов, шаги операций, устанавливаются ограничения для операций, а так же множество других свойств технологического объекта. В конечном итоге EasyEPlanner генерирует LUA файлы, которые загружаются в контроллер.</p>

Надстройка содержит следующие пункты меню:

1. Экспорт XML для EasyServer.
2. Экспорт технологических устройств в Excel.
3. Редактировать технологические объекты.
4. Устройства, параметры объектов.
5. Операции, ограничения и привязка объектов.
6. Синхронизация названий устройств и модулей.
7. Генерация описания IOL-Conf.
8. О дополнении.

Описание каждого из пунктов Вы найдете при прочтении данной документации.

### 2.2 Подключение к Eplan ##
<p align="justify">Для того, чтобы использовать EasyEPlanner, можно перекомпилировать библиотеку либо скачать последнюю Release версию проекта. Для подписывания надстройки используйте свой Eplan сервер подписей. Далее, необходимо запустить EPLAN и в меню перейти в <b>Сервисные программы -> API-Addins</b>. В появившемся окне необходимо нажать кнопку "</b>Загрузить</b>", откроется диалоговое окно, в котором необходимо перейти в папку с надстройкой и выбрать файл "<b>EPLAN.EplAddin.EasyEPlanner.dll</b>", а после нажать кнопку "<b>Открыть</b>". Надстройка загрузится, и появится пункт меню "<b>EPlaner</b>".</p>
<p align="justify"><b>ВАЖНО</b>: Периодически обновляйте папку с надстройкой через SVN, а так же не удаляйте файлы из папки, иначе работа надстройки не гарантируется!</p>

### 2.3 Описание автоматически генерируемых Lua-файлов ### 
Дополнение EasyEPLANner автоматически генерирует некоторые файлы управляющей программы контроллера. Данные файлы находятся в следующем каталоге с проектами (задается в configuration.ini).

Список файлов, описывающих проект:

- __*main.plua*__ - описание управляющей программы. При отсутствии данного файла, он генерируется автоматически с шаблонами необходимых функций. Если данный файл уже существует, то тогда он остаётся прежним;
- __*main.io.lua*__ - описание привязки устройств к модулям I/O. В данном файле вначале идет список удаленных узлов (BC - bus couplers) с указанием их параметров (IP-адрес, тип и т.п.) и наполнения - модулей ввода/вывода (I/O modules). Далее идет список технологических устройств (S88 term - control modules) с указанием каналов ввода\вывода, которые с ними связаны. Внутри каналов описывается к какому BC они привязаны, к каким портам подключены и смещения адресного пространства. Помимо каналов внутри технологических устройств могут быть его различные параметры;
- __*main.modbus_srv.lua*__ - описание взаимодействия с modbus-клиентами;
- __*main.objects.lua*__ - описание объектов проекта. Описание из редактора технологических объектов. Сначала описываются технологические объекты (_Танк, Бойлер и др._). Внутри этих объектов могут описываться различные параметры, таймеры, указываться свойства этого объекта, а так же список операций с шагами и действиями;
- __*main.profibus.lua*__ - описание profibus шины;
- __*main.restrictions.lua*__ - описание ограничений, которые устанавливаются для технологических объектов через редактор технологических объектов. Устанавливаются в числовом виде, поэтому лучше просматривать их через редактор в EPLAN;
- __*main.rm_PACs.lua*__ - описание взаимодействия с удаленными PAC. Находится в бета-версии.
- __*prg.lua*__ - описание базовой функциональности объектов. В текущей реализации в файле сначала описываются переменные, к которым присваиваются те или иные объекты, после идет добавление базовой функциональности, в перспективе будет добавлена так же базовая инициализация объектов. Файл генерируется так же на основе данных редактора технологических устройств.

### 2.4 Настройка каталога проектов ##

Дополнение позволяет настраивать каталог для записи и считывания __lua__ файлов проектов. Для этих целей в каталоге с дополнением есть файл __configuration.ini__. Если пути не указаны, будет выведена ошибка.

В файле напротив ключа __folder_path__ в кавычках указывается путь к каталогу проектов. Например: _folder_path="**C:\Folder1\folder2**"_.

Также есть возможность указания в файле configuration.ini нескольких путей к проектам. Если заданы пути, но ни один из них не существует - описание будет сохранено по первому найденному пути. Если задано и существует несколько путей, будет сохранено по первому существующему пути. Разделитель для путей - "**;**" (_точка с запятой_).

Например: _folder_path="**C:\Folder1\folder2**;**D:\Folder3\folder4**"_.

### 2.5 Версия надстройки ###

В меню EasyEplanner есть пункт - _О дополнении_. С помощью этого пункта можно узнать текущую версию надстройки, которая подключена к Вашему Eplan. Нажав этот пункт меню будет показано диалоговое окно, в котором будет обозначена версия надстройки.

Версия генерируется по следующему шаблону - `Год.Месяц.Сборка.Ревизия`.

**Сборка** - число дней, начиная с __1__ января __2000__ года.
**Ревизия** - число секунд от полуночи, независимо от часового пояса.

### 2.6 Статистика ###

#### 2.6.1 Оценочная сложность проекта ####
В надстройке осуществляется генерация статистики относительно сложности проекта (по заранее заданным значениям). В частности, измеряется количество строк кода в файле `main.plua` (_предельное значение для статистики - 1000 строк кода_), измеряется количество аппаратов в проекте (_предельное значение - 10 штук_), агрегатов (_50 штук_), количество тэгов (_5000 штук_) и количество устройств (_1000 штук_). На основе этих значений генерируются SVG-картинки, которые могут говорить о сложности проекта. Картинки будут находиться в папке с описанием проекта (_docs/statistics_).

Файлы:
* agregates_total.svg - количество агрегатов проекта.
* lines_total.svg - количество строк кода в файле `main.plua`.
* tags_total.svg - количество тэгов в проекте.
* units_total.svg - количество аппаратов в проекте.
* devices_total.svg - количество устройств в проекте.
* io_link_usage.svg - количество используемых IO-Link модулей ввода-вывода в процентном отношении к общему количеству модулей ввода-вывода.
* io_couplers_total.svg - количество узлов ввода-вывода.
* io_modules_total.svg - общее количество используемых модулей вовда-вывода.

#### 2.6.2 Модуль простоя надстройки ####

В надстройке осуществляется мониторинг активности. Если в течении одного часа у пользователя не было активности в Windows (_заблокировал компьютер, ушел домой и др._), то надстройка автоматически произведет сохранение проекта, его закрытие и завершит работу Eplan, тем самым, освобождая плавающую лицензию (_если используется такой тип лицензирования)_.

## 3 Настройка проекта ##
### 3.1 Настройка диапазона IP-адресов проекта ###

Помимо корректного имени, в проекте необходимо задать диапазоны IP-адресов, которые были заложены для этого проекта. Эти диапазоны задаются в свойствах проекта, в поле "_Пользователь, доп. поле[1]_".

Диапозон IP-адресов задается через дефис (**-**), а несколько диапозонов через запятую. Пример:
__"10.0.16.230 - 10.0.16.240, 10.0.16.250-10.0.16.260"__.
Данная запись задает 2 диапозона IP-адресов.

По заданным диапазонам проверяются все устройства, содержащие IP-адрес, на корректное заполнение.

Пример корректного IP-адреса: "_192.168.1.0_". IP-адрес задается без кавычек и разделяется точками.

### 3.2 Настройка тестирования проекта ###

Надстройка позволяет тестировать проект на работоспособность. Тесты написаны не на весь функционал, проект тестируется частично.

В данный момент, чтобы включить тестирование, необходимо в файле конфигурации **configuration.ini** указать в секции **TestSettings** параметр **ProjectsTestEnabled** в **True**. Если этого параметра в секции нет, то будет использовано стандартное значение - **False**.

Пример:
```
[TestSettings]
ProjectTestEnabled=True
```

Если переключить этот параметр в **False**, то тестирование не будет включаться.

Тестирование автоматически запускается каждый раз, когда происходит обновление файлов проекта. Например, при ручном обновлении файлов проекта. Результат работы скрипта выводится в общее окно логов. В зависимости от результатов его работы, могут быть разные сообщения:

1. **Тестирование проекта прошло успешно.** - Это сообщение означает, что текущие тесты проведены успешно, но это не гарантирует 100% работоспособности проекта, так как тесты не покрывают все случаи.
2. **В системе не найден LUA, тестирование проекта невозможно.** - Это сообщение говорит о том, что в системе не найден LUA, его надо установить.
3. **Тестирование проекта завершилось с ошибками. Проект не работоспособен.** - Это сообщение говорит о том, что тесты завершились с ошибкой. После этого сообщения обычно выводятся логи проведенных тестов, где видно, какие ошибки привели к его некорректной работе.

Если после завершения тестирования появилась ошибка (**Не найден канал xxxx (например, AODOAIDI)**), нужно предпринять следующие действия:

1. **Заходим в пункт меню EPlaner и заново генерируем описание IOL-Conf.**
2. **В этом же пункте меню выбираем "Синхронизация названий устройств и модулей".**

Для корректного запуска тестов, тестовый скрипт должен быть обновлен до последней версии. Система пытается найти тестовый скрипт в директории `..\..\spec\main.lua`, относительно папки с файлами проекта. Также, помимо настроенного каталога с проектами, нужно чтобы скрипты управляющей программы тоже были настроены. Это каталог `..\..\sys-scripts` относительно папки с файлами проекта, также `..\..\editor` относительно папки с файлами проекта. Аргументы командной строки хранятся в папке `CMD` этого проекта.

### 3.3 Импортирование старых проектов ###

Для импорта старых проектов (ICP CON) в меню EPlanner есть следующие функции:
- `Импорт ICP CON проекта` -
  функция для импорта проекта<sup>[[3.3.4]](#334-импорт-описания-старого-проекта-на-фса)</sup>.

- `Создать/изменить файл переименования устройств` -
  функция для переименования старых устройств для последующего импортирования
  проекта<sup>[[3.3.3]](#333-переименование-старых-устройств)</sup>.

- `Документ соответствия названий устройств CSV` - создает csv-документ со схемой соответствия названий устройств
  в старом и новом проекте<sup>[[3.3.5]](#335-документ-соответствия-названий-устройств)</sup>.

#### 3.3.1 Описание старого проекта ####

Для импортирования проекта понадобится файл `main.wago.plua`. Чтобы получить данный файл, необходимо приложением
[`wprg.exe`](https://github.com/savushkin-r-d/wago_dsx/releases/latest)
открыть нужный проект с расширением `.ds4`, после чего экспортировать его:
`Устройства` -> `Экспорт для WAGO 750-860` - как показано на рисунке ниже.
После чего в папке с проектом появится нужный файл
(`Внимание`: файл с описанием при экспорте заменяет старый файл описания другого проекта).

<p align="center"><img src="images/wprg4_export.png"></p>

<p align="center"><b>Рисунок</b> - <i>Экспорт проекта для WAGO</i></p>

#### 3.3.2 Настройка правильной работы импорта старых проектов ####

Для корректной работы импорта описания старых проектов необходимо в файле конфигурации (`configuration.ini`)
указать путь к EPLAN макросам модулей ввода-вывода, если такой настройки еще не установлено:
необходимо в секции `[path]` добавить переменную `wago_import_macros_path = "ДИСК:\путь\к\папке\с\макросами"`
и `wago_macros_path = "ДИСК:\путь\к\папке\с\макросами"`.
Поиск проводится сначала по `wago_import_macros_path`, а после по `wago_macros_path`.

Первый каталог с макросами используется для макросов со специальными настройками для корректного импорта,
второй - путь к основному каталогу с макросами. Для корректного автоматического импорта и настройки модулей
необходимо скопировать макрос клеммника в каталог `wago_macros_import_path`с установленной "Главной функцией".
Иначе клеммники будут импортироваться без переименования, и название модуля придется менять в ручную.
При этом в логе можно будет увидеть ошибку `"Не удалось проиндексировать модуль -Axxx на странице n"`.

Сама папка с макросами должна быть структурирована в соответствие с последними изменениями в этой папке, а именно:
они должны быть разбиты по папкам соответствующим своим группам и именоваться по следующему формату `750-x00` (**x** - номер группы).
Макрос выбирается по названию `WAGO.750-xyy.ema` (**xyy** - номер модуля).

Если у макроса есть какая-то модификация(вариация) типа `WAGO.750-xyy_025-000.ema`, то такой макрос выбран не будет,
требуется строгое название макроса, который будет использоваться.

#### 3.3.3 Переименование старых устройств ####

Перед импортированием старого проекта можно заранее составить файл с настройкой переименования устройств.
Для этого необходимо в меню выбрать функцию: `EPlaner` -> `Создать/изменить файл переименования устройств`.
В открывшемся окне проводника необходимо выбрать файл проекта `main.wago.plua`. Далее появится следующее окно:

<p align="center"><img src="images/DeviceRenamingMap.png"></p>

<p align="center"><b>Рисунок</b> - <i>Настройка переименования старых устройств</i></p>

В данном окне можно настроить переименование устройств.
Все ячейки редактируются по двойному щелчку (кроме первых двух столбцов).
Далее файл переименования необходимо сохранить, нажав кнопку применить или закрыв окно.
В дальнейшем изменить настройки переименования можно непосредственно в сохраненном файле,
либо повторив все действия описанные выше и нажав на кнопку в окне `Использовать файл переименования`,
что подгрузит сохраненный файл и можно продолжить его редактирование.

**Примечание:**
На вкладке `Параметры по умолчанию` настраиваются стандартные значения параметров
для определенных типов устройств, но в файл они не сохраняются, поэтому на текущем этапе
данная вкладка не используется.

#### 3.3.4 Импорт описания старого проекта на ФСА ####

Для импортирования описания старого проекта необходимо в меню выбрать следующую функцию: `EPlaner` -> `Импорт ICP-CON проекта`.
В открывшемся окне проводника необходимо выбрать файл проекта `main.wago.plua`. После этого начнется импорт старого проекта.

Во время импортирования вызывается окно переименования устройств как и в пункте [3.3.3](#333-переименование-старых-устройств).
Работа с этим окном проводится также как описано в данном пункте.
После нажатия кнопки `Применить` или закрытия окна, применяется переименование устройств и продолжается импорт устройств.
Также на данном этапе настраиваются параметры по умолчанию для устройств на соответствующей вкладке:
параметры настраиваются в пределах типов устройств.

**Примечания по импорту проекта:**
- В старых проектах использовались 4 типа узла:
    + 750-315 - RS-485
    + 750-815 - RS-485 (Programmable)
    + 750-341 - Ethernet coupler
    + 750-841 - Ethernet (Programmable)

  Так как в текущих проектах нет описания первых двух узлов RS-485, то они заменяются на соответствующие Ethernet узлы

- Страницы в EPLAN генерируются с названиями по-умолчанию в соответствии с рисунком ниже:

   <p align="center"><img src="images/imported_pages_explorer.png"></p>

   <p align="center"><b>Рисунок</b> - <i>Структура импортированного проекта</i></p>

- Устройства ввода-вывода импортируются с разделением по объектам в местах установки (EPLAN) по аналогии с модулями.
  Места установки не всегда правильно расшифровываются, и под каждым устройством указан комментарий из ICP-CON,
  по нему можно сверять корректность.

- При импортировании устройств проверяются названия уже добавленных устройств:
  если устройство с таким названием уже есть, то на ФСА оно не будет добавлено.
  Для правильной привязки будет подтянуто новое описание из существующего устройства
  и в существующем устройстве будет обновлено доп. поле[10] со старым названием в ICP CON.

- После импорта устройств и модулей, настраивается их привязка.

- В логах указываются некоторые ошибки при импортировании проекта.

#### 3.3.5 Документ соответствия названий устройств ####

Для того, чтобы создать документ соответствия названий устройств между старым (ICP CON) и новым проектом,
необходимо в меню выбрать следующую функцию: `EPlaner` -> `Документ соответствия названий устройств CSV`.
Данная функция предлагает сохранить файл в формате `*.csv` - текстовый формат табличных данных.
Для открытия данного файла в Excel необходимо выбрать вкладку `Данные` -> `Из текстового/CSV-файла` (зависит от версии excel).
Так же при импорте CSV-файла необходимо выбрать кодировку `UTF-8`.

<p align="center"><img src="images/CsvToExcel.png"></p>

<p align="center"><b>Рисунок</b> - <i>Открытие документа соответствия названий устройств в Excel</i></p>

**Примечание**:
Для корректной работы данного функционала необходимо, чтобы в устройствах на ФСА было прописано доп. поле[10],
где устанавливается старое название устройства в ICP CON. Данное поле заполняется автоматически на этапе
[3.3.4](#334-импорт-описания-старого-проекта-на-фса), Однако если устройства создаются вручную,
то необходимо вручную проставить данное поле. Либо в дальнейшем дополнить данное поле уже в Excel.

**Дополнительно**:
Надстройка также предлагает сохранить данный файл на этапе [3.3.4](#334-импорт-описания-старого-проекта-на-фса),
тут уже не требуется наличие доп. поле[10]. Но если названия в дальнейшем будут меняться,
то в данной функции нет необходимости.

## 4 Оборудование IO ##

**ВАЖНО:** Все устройства (устройства, узлы ввода-вывода и др.), добавляемые в проект должны быть расположены на ФСА (функциональная схема автоматизации) для того, что бы надстройка их считывала. Если устройства на ФСА нет, то оно не будет прочитано! Дополнительные поля устройств заполняются также на ФСА. Также __важно__, чтобы в устройстве на ФСА был включен флажок - "Главная функция", а в его макросах на других схемах - отключена.

<p align="justify"><b>Контроль адресного пространства узла.</b> Узлы имеют ограниченное адресное пространство и максимальное количество подключаемых модулей: для <i>WAGO</i> - <b>64 модуля и 2 кБ</b>, <i>Phoenix Contact</i> - <b>63 модуля и 1482 байта</b>. При добавлении в узел модуля, превосходящего максимальное количество подключаемых модулей или адресное пространство, появляется соответствующая ошибка и модуль не сохраняется в описании (<i>Для WAGO ограничение по адресному пространству пока отсутствует</i>).</p>

### 4.1 Настройка узлов и модулей ввода-вывода

<p align="justify">Именование узлов осуществляется в следующем виде: буква A и номер, кратный 100. Пример: "A100", "A200". В проекте узлы должны идти последовательно от "A100" (<em>для WAGO - старые проекты</em>), а для новых типов проекта (<em>Phoenix Contact</em>) необходимо учитывать, что узловой контроллер (<em>на котором находится управляющая программа</em>) именуется как "A1".</p>

У узлов также можно задавать параметры:

1. Доп. поле[1] - признак пропуска устройства (если в поле написано значение - 1, то устройство игнорируется);
2. Начальный адрес карты ПЛК (_в окне "Блок ПЛК"_) - указывается IP-адрес устройства.

Информация о модулях ввода-вывода получается на основе описания модуля (_сведения об изделии_). В проекте должно быть главное изделие для модуля (_узел_).

### 4.2 Привязка устройств к модулям IO ###

<p align="justify">Для связывания клеммы модуля ввода-вывода и устройства необходимо, чтобы функциональный текст (клеммы) соответствовал названию канала устройства. Для упрощения данной процедуры реализовано окно со списком устройств и каналов.</p>



<p align="center"><img src="images/devices_form.png"></p>

<p align="center"><b>Рисунок</b> - <i>Окно "Устройства"</i></p>

<p align="justify">Вызов данного окна осуществляется через пункт меню <b>"EPlaner" -> "Устройства"</b></p>

<p align="center"><img src="images/device_form_path.png"></p>

<p align="center"><b>Рисунок</b> - <i>Путь к окну "Устройства"</i></p>

<p align="justify">Для привязки клеммы необходимо при активном функциональном тексте клеммы <b>дважды</b> нажать (<i>double click</i>) на требуемый канал в окне устройств (<i>пример, выделено зеленым</i>).</p>

**Примечание**: для клапанов с AS-интерфейсом и IO-Link Mixproof клапана привязывается только 1 из 2 каналов (_AI или AO_).

<p align="center"><img src="images/assign_channel_to_plc.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример привязки к модулю ввода-вывода</i></p>

<p align="justify">После двойного клика соответствующий текст автоматически занесется в функциональный текст. При необходимости привязки более одного устройства к одной и той же клемме необходимо <b>зажать</b> при этом клавишу <b>Ctrl</b> (<i>к тексту допишется данное устройство</i>). Для размещения названия устройства на новой строке необходимо пользоваться символом новой строки (¶), необходимо вставить символ между строками (<i>например, скопировав его предварительно из Word</i>).</p>

При привязке действуют следующие ограничения:
* К модулю AI привязывается AI сигнал;
* К модулю AO привязывается AO сигнал;
* К модулю DI привязывается DI сигнал;
* К модулю DO привязывается DO сигнал;
* К модулю IO-Link от Wago привязываются AO, AI сигналы;
* К модулю IO-Link от Phoenix Contact привязываются AO, AI, DO, DI сигналы;
* К модулю DO/DI от Phoenix Contact привязываются DO и DI сигналы;

**Примечание**:
1. Для IO-Link модуля Phoenix Contact дополнительно, после комментария к сигналу, (прим., _Пуск_, как на рисунке ниже) через символ новой строки указывается тип канала. Тип канала указывается не всегда, только если устройство имеет более двух каналов для привязки. Тип канала указывается **ТОЛЬКО** для DI или DO канала. Тип каналов может быть:
    * DI (для каналов DI);
    * DO (для каналов DO).
2. Если устройство по какой-то причине не привязывается, пожалуйста, проверьте все клеммы  устройства ввода-вывода, к которому вы хотите привязаться. Клеммы не должны иметь галочек "_Главная функция_".
3. Если случайно выбрана не сигнальная клемма (например, питание), то привязки устройства по двойному щелчку не произойдёт. Если же функциональный текст клеммы был заполнен вручную, то надстройка отобразит соответствующую ошибку.

<p align="center"><img src="images/PXCIOLFuncText.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример функционального текста для модуля Phoenix Contact IO-Link</i></p>

<p align="center"><img src="images/functional_text_example.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример функционального текста</i></p>

<p align="center"><img src="images/functional_text_display_example.png"></p>

<p align="center"><b>Рисунок</b> - <i>Отображение введенного функционального текста</i></p>

### 4.2.1 Привязка пневмоострова Festo (VTUG) ###

Пневмоостров Festo (_DEV_VTUG - старые проекты, Y - новые_) поддерживает обычную привязку к своим клеммам, а так же множественную привязку. Важно, чтобы привязка осуществилась - это наличие привязки самого пневмоострова к клемме модуля ПЛК.

На электрической схеме указывается, к какой клемме ПЛК привязан пневмоостров, а на схеме обзора пневмоострова (_или электрической схеме, в зависимости от расположения_) происходит привязка клапанов к клеммам пневмоострова. __Важно__: использовать способы раздельно для каждого из устройств.

**Примечание:**
* Только тип пневмоострова Y привязывается описываемым способом. Для старых типов DEV_VTUG необходимо использовать обычный способ привязки (старый тип устарел, но используется в старых проектах). Поддерживается "переходное состояние", когда DEV_VTUG заменен на Y, но используется старый тип привязки. При использовании старого типа привязки с новым типом пневмоострова не гарантируется работа функции - _Синхронизация названий устройств и модулей_.
* Пневмоостров, который расположен на ФСА и на схеме обзора, должен иметь галочку "Главная функция".

<p align="center"><img src="images/FestoBindCircuitList.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Привязка пневмоострова на электрической схеме</i></p>

На первой части рисунка - пневмоостров без клемм и его привязка к модулю ввода-вывода. На втором рисунке - привязка к клеммам в прямоугольном макросе пневмоострова на схеме "Пневмоостров.Обзор".

<p align="center"><img src="images/FestoBindReviewList.png"></p>

<p align="center"><b>Рисунок</b> - <i>Привязка пневмоострова на схеме обзора</i></p>

Помимо всего описанного выше, необходимо указать тип используемого пневмоострова. Для этого схематически располагаем пневмоостров на ФСА и прописываем в доп. поле 2 тип используемой версии (см. пункт 5.2.3). Не забываем про флажок "Главная функция".

<p align="center"><img src="images/set_vtug_tip.png"></p>

<p align="center"><b>Рисунок</b> - <i>Указание типа используемой версии пневмоострова</i></p>

### 4.2.2 Правила написания комментариев к привязке ###

При множественной привязке, в функциональный текст будет заноситься лишь обозначение устройств (_ОУ_) друг за другом (_прим., "+V1 +V2 +V3"_), причем можно задавать её как в строку (_задается изначально_), так и в столбец (_необходимо расставить символы переноса строки между ОУ_). Разделитель при множественной привязке - символ переноса на новую строку.

При одинарной привязке в функциональный текст заносится так же комментарий.

Для установки комментария необходимо учитывать следующие правила:

+ Комментарий должен начинаться с заглавной буквы;
+ Комментарий не должен содержать в себе ОУ (прим, +V3);
+ Комментарий может содержать буквы латинского и кириллического алфавита в любом регистре (_верхний, нижний_), а также буквенно-цифровые обозначения (_прим., CR2, B4 и др._);
+ Комментарий не должен содержать спецсимволы, скобочки, и др. (_за исключением символа - **№**_).

Пример корректного комментария: **"Подача в объект OBJECT2"**.

### 4.3 Поддерживаемые модули ввода-вывода ###
В этом разделе находится список модулей ввода-вывода, которые поддерживаются надстройкой. Данные хранятся в файле **sys_io_modules.lua**, если этот файл удалить, то будет создан файл со стандартным шаблоном описания, который надо будет заполнить. В файле находится подсказка по заполнению данных, которая облегчает внесение изменений. Файл находится в папке Lua.

| Производитель   | Название (Номер)                 | Тип         | Примечание                                     |
| --------------- | -------------------------------- | ----------- | ---------------------------------------------- |
| WAGO            | 750-450                          | AI          | 4 канала RTD                                   |
| WAGO            | 750-461                          | AI          | 2 канала RTD                                   |
| WAGO            | 750-466                          | AI          | 2 канала RTD                                   |
| WAGO            | 750-491                          | AI          | 1 канал resistance measuring bridge            |
| WAGO            | 750-496                          | AI          | 8 каналов                                      |
| WAGO            | 750-638                          | AI          | Счетчик                                        |
| WAGO            | 750-554                          | AO          | 2 канала                                       |
| WAGO            | 750-555                          | AO          | 4 канала                                       |
| WAGO            | 750-655                          | AI/AO       | AS-интерфейс                                   |
| WAGO            | 750-657                          | AI/AO       | IO-Link                                        |
| WAGO            | 750-402                          | DI          | 4 канала                                       |
| WAGO            | 750-430                          | DI          | 8 каналов                                      |
| WAGO            | 750-1405                         | DI          | 16 каналов                                     |
| WAGO            | 750-1415                         | DI          | 8 каналов                                      |
| WAGO            | 750-1420                         | DI          | 4 канала                                       |
| WAGO            | 750-504                          | DO          | 4 канала                                       |
| WAGO            | 750-512                          | DO          | 2 канала relay module                          |
| WAGO            | 750-530                          | DO          | 8 каналов                                      |
| WAGO            | 750-1504                         | DO          | 16 каналов                                     |
| WAGO            | 750-1515                         | DO          | 8 каналов                                      |
| WAGO            | 750-600                          | -           | Конечный модуль                                |
| WAGO            | 750-602                          | -           | Питание                                        |
| WAGO            | 750-612                          | -           | Питание                                        |
| WAGO            | 750-627                          | -           | Расширение шины                                |
| WAGO            | 750-628                          | -           | Расширение шины                                |
| Phoenix Contact | AXL F CNT2 INC2 1F (2688093)     | AI          | 4 канала, счетчик                              |
| Phoenix Contact | AXL F AI4 I 1H (2688491)         | AI          | 4 канала                                       |
| Phoenix Contact | AXL F RTD4 1H (2688556)          | AI          | 4 канала RTD                                   |
| Phoenix Contact | AXL F AO4 1H (2688527)           | AO          | 4 канала                                       |
| Phoenix Contact | AXL F IOL8 2H (1027843)          | AI/AO/DI/DO | IO-Link с привязкой DI/DO, 8 каналов           |
| Phoenix Contact | AXL F DI16/4 2F (2688022)        | DI          | 16 каналов                                     |
| Phoenix Contact | AXL F DO16/3 2F (2688048)        | DO          | 16 каналов                                     |
| Phoenix Contact | AXL F DO16/2 2H (1027904)        | DO          | 16 каналов                                     |
| Phoenix Contact | AXL F DI8/3 DO8/3 2H (2702071)   | DI/DO       | 8 каналов DI и 8 каналов DO                    |
| Phoenix Contact | AXL F DI8/1 DO8/1 1H (2701916)   | DI/DO       | 8 каналов DI и 8 каналов DO                    |
| Phoenix Contact | AXL F AI2 AO2 1H 0-10V (2702072) | AI/AO       | 2 канала AI и 2 канала DI                      |
| Phoenix Contact | AXL F RS UNI 1H (2688666)        | AI/AO       | Коммуникационный модуль RS-232, RS-485, RS-422 |
| Phoenix Contact | AXL F AI8 1F (2688064)           | AI          | 8 каналов                                      |
| Phoenix Contact | AXL F SGI2 1H (2702911)          | AI          | Измерительный модуль тензодатчика              |
| Phoenix Contact | AXL SE AI4 I 4-20 (1088062)      | AI          | 4 канала                                       |
| Phoenix Contact | AXL SE AI4 U 0-10 (1088126)      | AI          | 4 канала                                       |
| Phoenix Contact | AXL SE RTD4 PT100 (1088106)      | AI          | 4 канала RTD                                   |
| Phoenix Contact | AXL SE RTD4 PT1000 (1182190)     | AI          | 4 канала RTD                                   |
| Phoenix Contact | AXL SE CNT1 (1088131)            | AI          | 1 канал, счетчик                               |
| Phoenix Contact | AXL SE AO4 I 4-20 (1088123)      | AO          | 4 канала                                       |
| Phoenix Contact | AXL SE IOL4 (1088132)            | AI/AO/DI/DO | IO-Link с привязкой DI/DO, 4 канала            |
| Phoenix Contact | AXL SE DI16/1 (1088127)          | DI          | 16 каналов                                     |
| Phoenix Contact | AXL SE DO16/1 (1088129)          | DO          | 16 каналов                                     |
| Phoenix Contact | AXL SE SC-A (1088134)            | -           | Заглушка                                       |
| Phoenix Contact | AXL SE PD16 24V (1337223)        | -           | Распределитель потенциала                      |
| Phoenix Contact | AXL SE PD16 GND (1337224)        | -           | Распределитель потенциала                      |

Поддерживаемые контроллеры и каплеры, которые берутся из файла **sys_io_nodes.lua**. Он работает аналогично **sys_io_modules.lua**:
| Производитель   | Название (Номер)  |
| --------------- | ----------------- |
| WAGO            | 750-863           |
| WAGO            | 750-341           |
| WAGO            | 750-841           |
| WAGO            | 750-352           |
| WAGO            | 750-362           |
| WAGO            | 750-8202          |
| WAGO            | 750-8203          |
| WAGO            | 750-8204          |
| WAGO            | 750-8206          |
| Phoenix Contact | AXL F BK ETH      |
| Phoenix Contact | AXL F BK ETH NET2 |
| Phoenix Contact | AXC F 1152        |
| Phoenix Contact | AXC F 2152        |
| Phoenix Contact | AXC F 3152        |

##  5 Объекты технологической схемы ##

<p align="justify">Объектами являются физические танки, линии и т.д. Логически они делятся на аппараты, агрегаты, блоки управления.</p>

### 5.1 Операции объектов ###
<p align="justify">Операции может включать оператор. Во время операции происходит включение\выключение устройств, обработка значений с датчиков и т.д. Операции выделяются, исходя из системного подхода. Они разделяются на <i>основные</i> и <i>вспомогательные</i>. Каждая операция имеет название, характеризуемое единым для всех проектов описанием (<i>т.е. операция “наполнение” одинакова для всех проектов и характеризуется следующими параметрами: объемом наполнения, проводимость смеси, проводимость воды</i>). Операции описываются в графическом виде в редакторе операций Eplaner.</p>

Для операции определяется:
1.	Номера операций, на которые можно перейти после данной операцию (_из схемы операций_).
2.	Значения параметров, необходимых для выполнения операции.

Операции состоят из шагов. Операция может находиться в состоянии __простой__, __выполнение__, __пауза__, __остановка__, __запуск__, __становится в паузу__, __выходит из паузы__, __останавливается__.

<p align="center"><img src="images/transition_between_operations.svg"></p>

<p align="center"><b>Рисунок</b> - <i>Переход между состояниями операций</i></p>

Состояние операции может быть выбрано для запуска при старте программы.
Для одного объекта возможен выбор для запуска только одной операции в некотором состоянии.
Для этого нужно в состоянии выбрать опцию `Запускать при старте программы`.
(Остальные состояния автоматически сбрасывают эту опцию).

<p align="center"><img src="images/AutorunState.png"></p>

<p align="center"><b>Рисунок</b> - <i>Выбор состояния операции для запуска</i></p>

### 5.2 Схемы ###
<p align="center"><img src="images/operations_descr_in_eplan.png"></p>

<p align="center"><b>Рисунок</b> - <i>Схема описания операций в Eplan</i></p>

## 6 Устройства технологической схемы

### 6.1 Нумерация устройств ###
Для идентификации используются заглавные латинские символы, символ подчеркивания, спецсимволы  (<b>==</b> ,<b>=</b> , <b>+</b>, <b>-</b>) и <b>цифры</b>.

Идентификация объектов осуществляется следующим обозначением:  
<b>==</b> площадка <b>=</b> проект <b>+</b> технологический объект <b>#</b> пользовательский объект <b>-</b> устройство.

#### 6.1.1 Технологический объект ####
Название технологического объекта (_танка, линии…_). Всегда содержит название латиницей и цифровой номер.
Примеры типовых технологических объектов:
* __M2__ –  линия №2;
* __KOAG2__ – коагулятор №2;
* __TCW1__ – бачок с холодной водой №1;
* __THW1__ – бачок с горячей водой №1.

#### 6.1.2 Пользовательский объект ####
Содержит дополнительную информацию.

#### 6.1.3 Устройство ####
<p align="justify">Содержит код устройства и номер (<i><b>V1</b> – клапан №1</i>). Устройство уникально в пределах технологического объекта.</p>

### 6.2 Перечень устройств ###
<p align="justify">Ниже приведено описание используемых технологических устройств. Для каждого устройства также могут задаваться дополнительные поля (<i>смотри раздел <b>5.3</b> "Дополнительные параметры"</i>).</p>

#### 6.2.1 HA. Аварийная звуковая сигнализация. Сирена ####
Обозначение: __HA__.  
Каналы ввода/вывода: __DO__ – _1_.  
Пример: __HA1__. Аварийная звуковая сигнализация. Сирена.

<p align="center"><img src="images/HA_device.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример аварийной звуковой сигнализации, сирены</i></p>

#### 6.2.2 FQT. Счетчик ####
Обозначение: **FQT**.  
Подтип: **FQT**.  
Каналы ввода/вывода: **AI** – _1_.  
Название каналов: __AI1__ – _объем_.

Обозначение: **FQT**.  
Подтип: **FQT_F**.  
Каналы ввода/вывода: **AI** – _2_.  
Название каналов: __AI1__ – _поток_, __AI2__ – _объем_.

Обозначение: **FQT**.  
Подтип: **FQT_F_IOLINK**.  
Каналы ввода/вывода: **AI** – _1_.

Пример: __+OBJ1-FQT1__. Объект 1. Объем.

#### 6.2.3 HL. Световая сигнализация ####
Обозначение: __HL__.  
Каналы ввода/вывода: __DO__ – _1_.  
Пример: __HL1__. Аварийная сигнализация. Зеленый.

#### 6.2.4 LT. Текущий уровень ####
Обозначение: __LT__, **LT_CYL**, **LT_CONE**, **LT_TRUNC**.  
Каналы ввода/вывода: __AI__ – _1_.  
Пример: __+OBJ1-LT1__. Объект №1. Текущий уровень.

Обозначение: **LT_IOLINK**.  
Каналы ввода/вывода: __AI__ – _2_.  
Пример: __+OBJ1-LT1__. Объект №1. Текущий уровень.

#### 6.2.5 GS. Датчик положения ####
Обозначение: **GS**.  
Подтипы: **GS**, **GS_INVERSE**.  
Каналы ввода/вывода: **DI** – *1*.  
Пример: **+OBJ2-GS1**. Объект №2. Датчик люка.

#### 6.2.6 М. Мотор (электродвигатель) ####
Обозначение: **M**.  
Подтип: **M**.  
Каналы ввода/вывода: **DO** - *1*, **DI** – *1*.  
Название каналов: **DO1** - *пуск*, **DI1** – *обратная связь*.

Обозначение: **M**.  
Подтип: **M_FREQ**.
Каналы ввода/вывода: **DO** - *1*, **DI** – *1*, **AO** – *1*.  
Название каналов: **DO1** - *пуск*, **DI1** – *обратная связь*, **AO1** – *частота вращения*.

Обозначение: **M**.  
Подтип: **M_REV**.
Каналы ввода/вывода: **DO** – *2*, **DI** – *1*.  
Название каналов: **DO1** - *пуск*, **DO2** – *реверс*, **DI1** – *обратная связь*.

Обозначение: **M**.  
Подтип: **M_REV_FREQ**.
Каналы ввода/вывода: **DO** – *2*, **DI** – *1*, **AO** – *1*.  
Название каналов: **DO1** - *пуск*, **DO2** – *реверс*, **DI1** – *обратная связь*, **AO1** – *частота вращения*.

Обозначение: **M**.  
Подтип: **M_REV_2**.
Каналы ввода/вывода: **DO** – *2*, **DI** – *1*.  
Название каналов: **DO1** - *пуск*, **DO2** – *реверс*,  **DI1** – *обратная связь*.

Обозначение: **M**.  
Подтип: **M_REV_FREQ_2**.
Каналы ввода/вывода: **DO** – *2*, **DI** – *1*, **AO** – *1*.  
Название каналов: **DO1** - *пуск*, **DO2** – *реверс*, **DI1** – *обратная связь*, **AO1** – *частота вращения*.

Обозначение: **M**.  
Подтип: **M_REV_2_ERROR**.
Каналы ввода/вывода: **DO** – *2*, **DI** – *1*.  
Название каналов: **DO1** - *пуск*, **DO2** – *реверс*, **DI1** – *авария*.

Обозначение: **M**.  
Подтип: **M_REV_FREQ_2_ERROR**.
Каналы ввода/вывода: **DO** – *2*, **DI** – *2*, **AO** – *1*.  
Название каналов: **DO1** - *пуск*, **DO2** – *реверс*, **DI1** – *авария*, **DI2** – *обратная связь*, **AO1** – *частота вращения*.

Обозначение: **M**.  
Подтип: **M_ATV**, **M_ATV_LINEAR**.  
Каналы ввода/вывода: управляется через Ethernet.

Пример: **+OBJ1-M1**. Объект 1. Пуск.

#### 6.2.7 FS. Датчик наличия потока ####
Обозначение: **FS**.  
Каналы ввода/вывода: **DI** – *1*.  
Пример: **FS1**. Датчик наличия потока.

#### 6.2.8 LS. Предельный уровень ####
Обозначение: **LS_MIN**, **LS_MAX**.  
Каналы ввода/вывода: **DI** – *1*.  
Дополнительные поля:
* Тип подключения: _max_, _min_.

Обозначение: **LS**.  
Подтип: **IO_LINK_MIN**, **IO_LINK_MAX**
Каналы ввода/вывода: **AI** – *1* (AOAI).  
Дополнительные поля:
* Тип подключения: _max_, _min_.

Пример: **+TANK1-LS2**. Танк №1. Верхний уровень.

#### 6.2.9 QT. Датчик проводимости ####
Обозначение: **QT**.  
Подтип: **QT, QT_IOLINK**.  
Каналы ввода/вывода: **AI** – _1_.

Обозначение: **QT**.  
Подтип: **QT_OK**.  
Каналы ввода/вывода: **AI** – _1_, **DI** - _1_.

Пример: **OBJ1+-QT1**. Объект 1. Датчик проводимости.

#### 6.2.10 TE. Температура ####
Обозначение: **TE**.  
Подтип: **TE**, **TE_IOLINK**, **TE_ANALOG**.  
Каналы ввода/вывода: **AI** – *1*.  
Пример: **+OBJ1-TE1**. Объект №1. Температура.

#### 6.2.11 SB. Кнопка ####
Обозначение: **SB**.  
Каналы ввода/вывода: **DI** – *1*.  
Пример: **+OBJ1-SB1**. Объект №1. В дренаж.

#### 6.2.12 V. Клапан ####
Обозначение: **V**.  
Каналы ввода/вывода:
1. V_DO1: **DO** - _1_;
2. V_DO2: **DO** - _2_;
    - **DO** - _Закрыть_
    - **DO** - _Открыть_
3. V_DO1_DI1_FB_OFF, V_DO1_DI1_FB_ON: **DO** - _1_, **DI** - _1_;
4. V_DO1_DI2: **DO** - _1_, **DI** - _2_;
    - **DI** - _Закрыт_
    - **DI** - _Открыт_
5. V_DO2_DI2, V_DO2_DI2_BISTABLE: **DO** - _2_; **DI** - _2_;
    - **DO** - _Закрыть_
    - **DO** - _Открыть_
    - **DI** - _Закрыт_
    - **DI** - _Открыт_
6. V_MIXPROOF: **DO** - _3_; **DI** - _2_;
    - **DO** - _Открыть_
    - **DO** - _Открыть НС_
    - **DO** - _Открыть ВС_
    - **DI** - _Закрыт_
    - **DI** - _Открыт_
7. V_BOTTOM_MIXPROOF: **DO** - _3_; **DI** - _2_;
    - **DO** - _Открыть_
    - **DO** - _Открыть мини_
    - **DO** - _Открыть НС_
    - **DI** - _Закрыт_
    - **DI** - _Открыт_
8. V_IOLINK_MIXPROOF, V_AS_MIXPROOF, V_AS_DO1_DI2, V_IOLINK_DO1_DI2: **AO** - _1_, **AI** - _1_;
9. V_IOLINK_VTUG_DO1: **AO** - _1_;
10. V_IOLINK_VTUG_DO1_FB_OFF, V_IOLINK_VTUG_DO1_FB_ON: **AO** - _1_, **DI** - _1_.
11. V_IOLINK_VTUG_DO1_DI2: **AO** - _1_, **DI** - _2_.
    - **DI** - _Закрыт_
    - **DI** - _Открыт_
12. V_MINI_FLUSHING: **DO** - _2_; **DI** - _2_;
    - **DO** - _Открыть_
    - **DO** - _Открыть мини_
    - **DI** - _Закрыт_
    - **DI** - _Открыт_
13. V_IOL_TERMINAL_MIXPROOF_DO3: **AO** - _3_;
    - **AO** - _Открыть_
    - **AO** - _Открыть верхнее седло_
    - **AO** - _Открыть нижнее седло_

Пример: **+OBJ1-V7**. Объект №1. Дренаж.

#### 6.2.13 VC. Управляемый клапан ####
Обозначение: **VС**.  
Каналы ввода/вывода: **AO** – *1*.  
Пример: **VC3**. Паровой клапан.

#### 6.2.14 DO. Управляющий (выходной) сигнал ####
Обозначение: **DO**.  
Каналы ввода/вывода: **DO** – *1*.  
Пример: **OBJ2+-DO2**. Объект 2. Готовность объекта

#### 6.2.15 DI. Входной сигнал ####
Обозначение: **DI**.  
Каналы ввода/вывода: **DI** – *1*.  
Пример: **DI10**. Приемник готов.

#### 6.2.16 AO. Выходная величина ####
Обозначение: **AO**.  
Каналы ввода/вывода: **AO** – *1*.  
Пример: **AO1**. Задание производительности.

#### 6.2.17 AI. Входная величина ####
Обозначение: **AI**.  
Каналы ввода/вывода: **AI** – *1*.  
Пример: **AI1**. Ток двигателя.

#### 6.2.18 WT. Датчик веса ####
Обозначение: **WT**.  
Каналы ввода/вывода: **AI** – *2*.  
Пример: **WT1**. Весы танка 1.

Подтип: **WT_RS232**.  
Каналы ввода/вывода: **AI** – *1*, **AO** - *1*.

Подтип: **WT_ETH**.
Каналы ввода/вывода: отсутствуют.

Подтип: **WT_PXC_AXL**.  
Каналы ввода/вывода: **AI** – *1*, **AO** - *1*.

#### 6.2.19 PT. Датчик давления ####
Обозначение: **PT**.  
Подтип: **PT**, **PT_IOLINK**,  
Каналы ввода/вывода: **AI** – *1*.  
Пример: **OBJ1+-PT10**. Объект 1.  Датчик давления.

#### 6.2.20 Y (DEV_VTUG). Пневмоостров Festo ####
Обозначение: **Y**, **DEV_VTUG** - старые проекты.  
Каналы ввода/вывода: **AO** – *1*. (AOAI)  
Пример: **OBJ1+CAB1-Y1**. Проект OBJ1, шкаф №1, устройство пневмоостров Festo.

#### 6.2.21 F. Автоматический выключатель ####
Обозначение: **F**.  
Каналы ввода/вывода: **AI** - *1*, **AO** - *1* (AOAI)  
Пример: **OBJ1+CAB1-F1**. Проект OBJ1, шкаф №1, устройство автоматический выключатель.

#### 6.2.22 C. Регулятор ####
Обозначение: Любое обозначение устройства, с символом - **C** на крайней позиции.  
Каналы ввода/вывода: отсутствуют, виртуальное устройство. Только внутренние параметры.</br>
Подтип: **C_PID**(Или пустая строка), **C_THLD**.</br>
Пример: **OBJ1+TANK1-TC1**. Проект OBJ1, Танк №1, ПИД-регулятор температуры танка №1.

#### 6.2.23 HLA. Сигнальная колонна ####
Обозначение: **HLA**.

Подтип: **HLA** или пустой (_аналог HLA_).  
Каналы ввода/вывода: **DO** - 4 (_красный, желтый, зеленый и сирена_).

Подтип: **HLA_VIRT**  
Каналы ввода/вывода: 0

Подтип: **HLA_IOLINK**  
Каналы ввода/вывода:**AI** - *1*, **AO** - *1* (AOAI)

Пример: **OBJ1+TANK1-HLA1**. Проект OBJ1, танк №1, сигнальная колонна №1.

В сигнальной колонне используется три лампочки – зеленая, желтая, красная – и сирена.

Мигающий красный цвет – авария, тревога (*неподавленная*). Частота мигания *2* Гц.
Дополнительно включается сирена, которую можно отключить из проекта (_клик по значку_) либо она также отключиться после подтверждения тревог, пропадания аварий.

Мигающий желтый свет – неподтвержденное сообщение. Частота мигания *0.5* Гц.

Зеленый цвет – есть включенные операции (аппарата).

#### 6.2.24 CAM. Камера ####
Обозначение: **CAM**.  
Каналы ввода/вывода:
1. CAM_DO1_DI1 - **DO** - _1_, **DI** - _1_;
2. CAM_DO1_DI2 - **DO** - _1_, **DI** - _2_;
3. CAM_DO1_DI3 - **DO** - _1_, **DI** - _3_.

Название каналов: **DO** - _сигнал активации_. **DI** - _готовность_, _результат обработки 1_, _результат обработки 2_.  
Пример: **OBJ1+LINE1-CAM1**. Проект OBJ1, линия №1, камера №1.

#### 6.2.25 PDS. Сигнальный датчик разницы давления ####
Обозначение: **PDS**.  
Каналы ввода/вывода: **DI** – *1*.  
Пример: **+OBJ2-PDS1**. Объект №2. Сигнальный датчик разницы давления.

#### 6.2.26 TS. Сигнальный датчик температуры ####
Обозначение: **TS**.  
Каналы ввода/вывода: **DI** – *1*.  
Пример: **+OBJ2-TS1**. Объект №2. Сигнальный датчик температуры.

#### 6.2.27 G. Блок питания с автоматическим выключателем ####
Обозначение: **G**.  
Каналы ввода/вывода: **AI** - *1*, **AO** - *1* (AOAI)  
Пример: **OBJ1+CAB1-G1**. Проект OBJ1, шкаф №1, устройство автоматический выключатель.

#### 6.2.28 WATCHDOG. Устройство проверки связи ####
Обозначение: **WATCHDOG**.
Пример: **+OBJ2-WATCHDOG1**. Объект №2. Устройство проверки связи.

#### 6.2.29 EY. Преобразователь IO-Link ####
Обозначение: **EY**.
Пример: **+OBJ2-EY1**. Объект №2. Преобразователь IO-Link.

Подключение устройств осуществляется по аналогии с пневмоостровом.
К преобразователю можно подключить устройсва с подтипами (*_EY): **AO_EY**, **VC_EY**.
При подключении устройств к преобразователю автоматически заполняется свойство `TERMINAL` с названием преобразователя и
`R_EY_NUMBER` с номером канала преобразователя.

### 6.3 Дополнительные параметры ###
Дополнительные параметры указываются через свойства устройства.

Параметры и свойства устройства(Доп.поля 3 и 4) можно заполнить в дереве устройств("Eplaner" -> "Устройства, параметры объектов"). Для этого необходимо включить отображение параметров и свойств объектов. Измененные параметры и свойства сразу сохраняются в устройстве на схеме.

<p align="center"><img src="images/edit_parameters_properties.png"></p>

<p align="center"><b>Рисунок</b> - <i>Редактирование параметров и свойств в дереве устройств</i></p>


#### 6.3.1 Описание устройства ###
В поле «Примечание» записывается описание устройства. Пример приведён ниже.

<p align="center"><img src="images/dev_note.png"></p>

<p align="center"><b>Рисунок</b> - <i>Запись описания устройства</i></p>

#### 6.3.2 Назначение дополнительных полей ####
1. **Доп. поле [1]**. Определяет обрабатывать или нет данное устройство при экспорте для PAC (_например, ручная заслонка не управляется автоматически_). Если оно содержит значение - **1**, то данное устройство не обрабатывается. Или можно снять галочку "<em>Главная функция</em>" у устройства.</p>
2. **Доп. поле [2]**. Определяет подтип устройства. Описание:

| Параметр                    | Описание                                                                                                             |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------- |
| NONE                        | Подтип не определен.                                                                                                 |
| V_DO1                       | Клапан с одним каналом управления.                                                                                   |
| V_DO2                       | Клапан с двумя каналами управления.                                                                                  |
| V_DO1_DI1_FB_OFF            | Клапан с одним каналом управления и одной обратной связью (*выключенное состояние*).                                 |
| V_DO1_DI1_FB_ON             | Клапан с одним каналом управления и одной обратной связью (*включенное состояние*).                                  |
| V_DO1_DI2                   | Клапан с одним каналом управления и двумя обратными связями.                                                         |
| V_DO2_DI2                   | Клапан с двумя каналами управления и двумя обратными связями.                                                        |
| V_MIXPROOF                  | Клапан противосмешивающий (*2 канала управления и 2 обратные связи*).                                                |
| V_IOLINK_MIXPROOF           | Клапан противосмешивающий с **IO-Link**.                                                                             |
| V_AS_MIXPROOF               | Клапан противосмешивающий с **AS интерфейсом**.                                                                      |
| V_BOTTOM_MIXPROOF           | Клапан с промывкой и двумя обратными связями (донный).                                                               |
| V_AS_DO1_DI2                | Клапан с одним каналом управления и двумя обратными связями с **AS интерфейсом**.                                    |
| V_IOLINK_DO1_DI2            | Клапан с одним каналом управления и двумя обратными связями с **IO-Link**.                                           |
| V_DO2_DI2_BISTABLE          | Клапан с двумя каналами управления и двумя обратными связями бистабильный.                                           |
| V_IOLINK_VTUG_DO1           | **IO-Link VTUG** клапан с одним каналом управления.                                                                  |
| V_IOLINK_VTUG_DO1_FB_OFF    | **IO-Link VTUG** клапан с одним каналом управления и одной обратной связью (*выключенное состояние*).                |
| V_IOLINK_VTUG_DO1_FB_ON     | **IO-Link VTUG** клапан с одним каналом управления и одной обратной связью (*включенное состояние*).                 |
| V_IOLINK_VTUG_DO1_DI2       | **IO-Link VTUG** клапан с одним каналом управления и двумя обратными связями (*включенное и выключенное состояния*). |
| V_VIRT                      | Виртуальный клапан.                                                                                                  |
| V_MINI_FLUSHING             | Клапан с миниклапаном промывки и двумя обратными связями.                                                            |
| V_IOL_TERMINAL_MIXPROOF_DO3 | Противосмешивающий клапан с управление от пневмоострова IO-Link                                                      |
| LS_MIN                      | Предельный уровень по схеме минимум.                                                                                 |
| LS_MAX                      | Предельный уровень по схеме максимум.                                                                                |
| LS_IOLINK_MIN               | **IO-Link** уровень. Подключение по схеме минимум.                                                                   |
| LS_IOLINK_MAX               | **IO-Link** уровень. Подключение по схеме максимум.                                                                  |
| LS_VIRT                     | Виртуальный датчик предельного уровня.                                                                               |
| TE                          | Температура.                                                                                                         |
| TE_IOLINK                   | Температура **IO-Link** без дополнительных параметров.                                                               |
| TE_VIRT                     | Виртуальный датчик температуры.                                                                                      |
| TE_ANALOG                   | Аналоговый датчик температуры 4-20 мА.                                                                               |
| M                           | Мотор без управления частотой вращения.                                                                              |
| M_FREQ                      | Мотор с управлением частотой вращения.                                                                               |
| M_REV                       | Мотор с реверсом (*совместный*) без управления частотой вращения.                                                    |
| M_REV_FREQ                  | Мотор с реверсом (*совместный*) с управлением частотой вращения.                                                     |
| M_REV_2                     | Мотор с реверсом (*отдельный*) без управления частотой вращения.                                                     |
| M_REV_FREQ_2                | Мотор с реверсом (*отдельный*) с управлением частотой вращения.                                                      |
| M_REV_2_ERROR               | Мотор с реверсом (*отдельный*). Отдельный сигнал аварии.                                                             |
| M_REV_FREQ_2_ERROR          | Мотор с реверсом с управлением частотой вращения. Реверс включается отдельно. Отдельный сигнал ошибки.               |
| M_ATV                       | Мотор, управляемый частотным преобразователем Altivar. Связь с ЧП по Ethernet. Реверс и аварии опциональны.          |
| M_VIRT                      | Виртуальный мотор.                                                                                                   |
| M_ATV_LINEAR                | Аналогично M_ATV, только есть параметры для расчета линейной скорости.                                               |
| FQT                         | Счетчик.                                                                                                             |
| FQT_F                       | Счетчик с расходом.                                                                                                  |
| FQT_VIRT                    | Виртуальный счетчик (*без привязки к модулям*).                                                                      |
| FQT_IOLINK                  | Счетчик с расходом IO-Link.                                                                                          |
| QT                          | Концентратомер.                                                                                                      |
| QT_OK                       | Концентратомер с диагностикой.                                                                                       |
| QT_IOLINK                   | **IO-Link** концентратомер.                                                                                          |
| QT_VIRT                     | Виртуальный концентратомер.                                                                                          |
| LT                          | Датчик текущего уровня.                                                                                              |
| LT_CYL                      | Датчик уровня для танка цилиндрической формы.                                                                        |
| LT_CONE                     | Датчик уровня для цилиндрического танка с дном в форме конуса.                                                       |
| LT_TRUNC                    | Датчик текущего уровня для танка с дном в форме усеченного конуса.                                                   |
| LT_IOLINK                   | **IO-Link** текущий уровень с возможностью задания параметров для танка.                                             |
| LT_VIRT                     | Виртуальный датчик текущего уровня.                                                                                  |
| DI                          | Дискретный входной сигнал.                                                                                           |
| DI_VIRT                     | Виртуальный дискретный входной сигнал.                                                                               |
| АI                          | Аналоговый входной сигнал.                                                                                           |
| АI_VIRT                     | Виртуальный аналоговый входной сигнал.                                                                               |
| DO                          | Дискретный входной сигнал.                                                                                           |
| DO_VIRT                     | Виртуальный дискретный входной сигнал.                                                                               |
| АО                          | Аналоговый выходной сигнал.                                                                                          |
| АО_VIRT                     | Виртуальный аналоговый выходной сигнал.                                                                              |
| Y                           | Пневмоостров Festo.                                                                                                  |
| DEV_VTUG_8                  | SPECIAL Festo valve terminal (16 клапанов).                                                                          |
| DEV_VTUG_16                 | SPECIAL Festo valve terminal (32 клапана).                                                                           |
| DEV_VTUG_24                 | SPECIAL Festo valve terminal (48 клапанов).                                                                          |
| PT                          | Датчик давления.                                                                                                     |
| PT_IOLINK                   | **IO-Link** датчик давления.                                                                                         |
| PT_VIRT                     | Виртуальный датчик давления.                                                                                         |
| F                           | **IO-Link** автоматический выключатель.                                                                              |
| F_VIRT                      | Виртуальный автоматический выключатель.                                                                              |
| VC                          | Аналоговый клапан.                                                                                                   |
| VC_IOLINK                   | **IO-Link** аналоговый клапан.                                                                                       |
| VC_VIRT                     | Виртуальный аналоговый клапан.                                                                                       |
| HLA                         | Дискретная сигнальная колонна (*4 DO сигнала на каждый из цветов и сирену*).                                         |
| HLA_VIRT                    | Виртуальная сигнальная колонна.                                                                                      |
| HLA_IOLINK                  | IO-Link сигнальная колонна.                                                                                          |
| FS                          | Датчик наличия потока.                                                                                               |
| FS_VIRT                     | Виртуальный датчик наличия потока.                                                                                   |
| GS                          | Датчик положения.                                                                                                    |
| GS_VIRT                     | Виртуальный датчик положения.                                                                                        |
| GS_INVERSE                  | Датчик положения инверсный (0 - активное значение).                                                                  |
| HA                          | Сирена.                                                                                                              |
| HA_VIRT                     | Виртуальная сирена.                                                                                                  |
| HL                          | Сигнальная лампа.                                                                                                    |
| HL_VIRT                     | Виртуальная сигнальная лампа.                                                                                        |
| SB                          | Кнопка.                                                                                                              |
| SB_VIRT                     | Виртуальная кнопка.                                                                                                  |
| WT                          | Весы.                                                                                                                |
| WT_VIRT                     | Виртуальные весы.                                                                                                    |
| WT_RS232                    | Весы с интерфейсом RS-232.                                                                                           |
| WT_ETH                      | Весы с ethernet.                                                                                                     |
| WT_PXC_AXL                  | Весы Axioline F (для модулей Phoenix Contact).                                                                       |
| CAM_DO1_DI1                 | Камера с сигналом активации и результатом обработки.                                                                 |
| CAM_DO1_DI2                 | Камера с сигналом активации, результатом обработки и готовностью.                                                    |
| CAM_DO1_DI3                 | Камера с сигналом активации, двумя результатами обработки и готовностью.                                             |
| PDS                         | Сигнальный датчик разницы давления.                                                                                  |
| PDS_VIRT                    | Виртуальный сигнальный датчик разницы давления.                                                                      |
| TS                          | Сигнальный датчик температуры.                                                                                       |
| TS_VIRT                     | Виртуальный сигнальный датчик температуры.                                                                           |
| C_PID                       | ПИД-регулятор.                                                                                                       |
| C_THLD                      | Пороговый регулятор.                                                                                                 |
| G_IOL_4                     | **IO-Link** блок питания на 4 канала с автоматическим выключателем.                                                  |
| G_IOL_8                     | **IO-Link** блок питания на 8 канала с автоматическим выключателем.                                                  |
| WATCHDOG                    | Устройство проверки связи                                                                                            |
| DEV_CONV_AO2                | Конвертер **IO-Link** -> **AO** (2 канала).                                                                          |


Пример приведен ниже:

<p align="center"><img src="images/dev_supl_field_2.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример добавления типа устройству</i></p>

3. **Доп. поле [3]**. Определяет дополнительные параметры.
   Параметры задаются в следующем виде: **«имя_параметра»=«значение_параметра»**.

<p align="center"><img src="images/dev_supl_field_3.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример добавления доп. параметров к устройству</i></p>

Список параметров приведен ниже.

<table>
    <thead>
        <tr>
            <th> <p align="center"> <b> Тип
            <th> <p align="center"> <b> Параметр
            <th> <p align="center" colspan = 2> <b> Примечание
        </tr>
    </thead>
    <thbody>
        <tr> <td> <b> 
        V 
            <td> <b> P_ON_TIME <td> Время включения, <i>мс</i> (<i>для клапанов с обратной связью</i>)
        <tr> <td rowspan = 3> <b> 
        AI
            <td> <b> P_C0    <td> Сдвиг нуля <tr>
            <td> <b> P_MIN_V <td> Минимальное значение <tr>
            <td> <b> P_MAX_V <td> Максимальное значение
        <tr> <td rowspan = 2> <b> 
        AO
            <td> <b> P_MIN_V <td> Минимальное значение <tr>
            <td> <b> P_MAX_V <td> Максимальное значение
        <tr> <td> <b> 
        FS  
            <td> <b> P_DT <td> Время порогового фильтра, <i>мс</i>
        <tr> <td rowspan = 3> <b> 
        QT
            <td> <b> P_C0    <td> Сдвиг нуля <tr>
            <td> <b> P_MIN_V <td> Минимальное значение <tr>
            <td> <b> P_MAX_V <td> Максимальное значение
        <tr> <td> <b> 
        QT_IOLINK 
            <td> <b> P_ERR <td> Аварийное значение 
        <tr> <td> <b> 
        GS 
            <td> <b> P_DT <td> Время порогового фильтра, <i>мс</i>
        <tr> <td> <b> 
        LS 
            <td> <b> P_DT <td> Время порогового фильтра, <i>мс</i>
        <tr><td><b> 
        LS_IOLINK 
            <td> <b> P_ERR <td> Аварийное значение
        <tr> <td> <b> 
        DI 
            <td> <b> P_DT <td> Время порогового фильтра, <i>мс</i>
        <tr> <td rowspan = 2> <b> 
        LT
            <td> <b> P_C0  <td> Сдвиг нуля <tr>
            <td> <b> P_ERR <td> Аварийное значение уровня
        <tr> <td rowspan = 4> <b> 
        LT_CYL
            <td> <b> P_C0    <td> Сдвиг нуля <tr>
            <td> <b> P_MAX_P <td> Давление на которое настроен датчик, <i>бар</i> <tr>
            <td> <b> P_R     <td> Радиус танка, <i>м</i> <tr>
            <td> <b> P_ERR   <td> Аварийное значение уровня
        <tr> <td rowspan = 5> <b> 
        LT_CONE
            <td> <b> P_C0     <td> Сдвиг нуля <tr>
            <td> <b> P_MAX_P  <td> Давление на которое настроен датчик, <i>бар</i> <tr>
            <td> <b> P_R      <td> Радиус танка, <i>м</i> <tr>
            <td> <b> P_H_CONE <td> Высота конической части танка, <i>м</i> <tr>
            <td> <b> P_ERR    <td> Аварийное значение уровня
        <tr> <td rowspan = 5> <b> 
        LT_TRUNC
            <td> <b> P_C0      <td> Сдвиг нуля <tr>
            <td> <b> P_MAX_P   <td> Давление на которое настроен датчик, <i>бар</i> <tr>
            <td> <b> P_R       <td> Радиус танка, <i>м</i> <tr>
            <td> <b> P_H_TRUNC <td> Высота усеченной части танка, <i>м</i> <tr>
            <td> <b> P_ERR     <td> Аварийное значение уровня 
        <tr> <td rowspan = 5> <b> 
        LT_IOLINK
            <td> <b> P_C0      <td> Сдвиг нуля <tr>
            <td> <b> P_MAX_P   <td> Давление на которое настроен датчик, <i>бар</i> <tr>
            <td> <b> P_R       <td> Радиус танка, <i>м</i> <tr>
            <td> <b> P_H_CONE  <td> Высота конической части танка, <i>м</i> (по умолчанию - 0) <tr>
            <td> <b> P_ERR     <td> Аварийное значение уровня
        <tr> <td rowspan = 2> <b> 
        TE
            <td> <b> P_C0  <td> Сдвиг нуля <tr> 
            <td> <b> P_ERR <td> Аварийное значение температуры
        <tr> <td rowspan = 2> <b> 
        TE_IOLINK
            <td> <b> P_C0  <td> Сдвиг нуля <tr> 
            <td> <b> P_ERR <td> Аварийное значение температуры
        <tr> <td rowspan = 4> <b> 
        TE_ANALOG
            <td> <b> P_C0  <td> Сдвиг нуля <tr> 
            <td> <b> P_ERR <td> Аварийное значение температуры <tr>
            <td> <b> P_MIN_V <td> Минимальное значение <tr>
            <td> <b> P_MAX_V <td> Максимальное значение
        <tr> <td> <b> 
        М (кроме M_ATV_LINEAR)
            <td> <b> P_ON_TIME <td> Время включения, <i>мс</i>
        <tr> <td rowspan = 3> <b> 
        M_ATV_LINEAR
            <td> <b> P_ON_TIME         <td> Время включения, <i>мс</i> <tr>
            <td> <b> P_SHAFT_DIAMETER  <td> Диаметр вала, <i>м</i> <tr> 
            <td> <b> P_TRANSFER_RATIO  <td> Передаточное число
        <tr> <td rowspan = 5> <b> 
        FQT_F
            <td> <b> P_MIN_F        <td> Минимальное значение потока <tr> 
            <td> <b> P_MAX_F        <td> Максиальное значение потока <tr>
            <td> <b> P_C0           <td> Сдвиг нуля <tr> 
            <td> <b> P_DT           <td> Время ожидания появления расхода после включения связанного насоса, <i>мс<tr>
            <td> <b> P_ERR_MIN_FLOW <td> Параметр для обработки ошибки счета импульсов
        <tr> <td rowspan = 3> <b> 
        FQT_IOLINK
            <td> <b> P_C0           <td> Сдвиг нуля <tr> 
            <td> <b> P_DT           <td> Время ожидания появления расхода после включения связанного насоса, <i>мс<tr>
            <td> <b> P_ERR_MIN_FLOW <td> Параметр для обработки ошибки счета импульсов
        <tr> <td rowspan = 4> <b> 
        WT
            <td> <b> P_C0  <td> Сдвиг нуля, <i>кг<tr> 
            <td> <b> P_DT  <td> Точность датчика, <i>кг</i> (для фильтрации) <tr>
            <td> <b> P_NOMINAL_W  <td> Номинальный вес, <i>кг<tr>
            <td> <b> P_RKP  <td> Рабочий коэффициент передачи, <i>мВ/В</i>
        <tr> <td rowspan = 1> <b> 
        WT_RS232
            <td> <b> PC_0 <td> Сдвиг нуля
        <tr> <td rowspan = 1> <b> 
        WT_ETH
            <td> <b> PC_0 <td> Сдвиг нуля
        <tr> <td rowspan = 3> <b> 
        WT_PXC_AXL
            <td> <b> P_DT <td> Время порогового фильтра <tr>
            <td> <b> P_C0 <td> Сдвиг нуля <tr>
            <td> <b> P_K <td> Коэффициент пропорциональности
        <tr> <td rowspan = 3> <b> 
        PT
            <td> <b> P_C0 <td> Сдвиг нуля <tr> 
            <td> <b> P_MAX_V <td> Максимальное значение <tr>
            <td> <b> P_MIN_V <td> Минимальное значение
        <tr> <td rowspan = 1> <b> 
        PT_IOLINK
            <td> <b> P_ERR <td> Аварийное значение
        <tr> <td rowspan = 17> <b> 
        C_PID<br>(ПИД-регулятор)
            <td> <b>                     <td> <p align=center> Описание – значение по умолчанию <tr>
            <td> <b> P_k                 <td> Коэффициент усиления – 1 <tr> 
            <td> <b> P_Ti                <td> Время интегрирования – 15 <tr>
            <td> <b> P_Td                <td> Время дифференцирования - 0.01 <tr>
            <td> <b> P_dt                <td> Интервал расчета – 1000 мс. <tr> 
            <td> <b> P_max               <td> Максимиальное входное значение – 100 (ед. измерения датчика) <tr>
            <td> <b> P_min               <td> Минимальное входное значение – 0 (ед. измерения датчика) <tr>
            <td> <b> P_acceleration_time <td> Время выхода на режим регулирования – 30 <i>с</i> <tr> 
            <td> <b> P_is_manual_mode    <td> Ручной режим – 0 (false)<tr>
            <td> <b> P_U_manual          <td> Заданное ручное значение – 65% <tr>
            <td> <b> P_k2                <td> Коэффициент усиления 2 – 0 <tr> 
            <td> <b> P_Ti2               <td> Время интегрирования 2 – 0 <tr>
            <td> <b> P_Td2               <td> Время дифферинцирования 2 – 0 <tr>
            <td> <b> P_out_max           <td> Максимальное выходное значение – 100% <tr> 
            <td> <b> P_out_min           <td> Минимальное выходное значние – 0% <tr>
            <td> <b> P_is_reverse        <td> Выход обратного действия – 0 (false) <tr>
            <td> <b> P_is_zero_start     <td> Нулевое стартовое значение – 1 (true)
        <tr> <td rowspan = 2> <b> 
        C_THLD<br>(пороговый регулятор)
            <td> <b> P_is_reverse <td> Выход обратного действия (1 - true, 0 - false). Задает вектор изменения измеряемой величины. <tr> 
            <td> <b> P_delta <td> Дельта срабатывания. <tr>
        <tr> <td> <b> 
        CAM
            <td> <b> P_READY_TIME <td> Предельное время отсутствия готовности к работе, с (для <i>CAM_DO1_DI2</i> и <i>CAM_DO1_DI3</i>)
        <tr> <td rowspan = 2> <b> 
        WATCHDOG
            <td> <b> P_T_GEN <td> Интервал генерации выходных импульсов, <i>мс</i> <tr>
            <td> <b> P_T_ERR <td> Интервал ожидания изменения входа, <i>мс</i>
    </thbody>
</table>

4. **Доп. поле [4]**. Определяет дополнительные свойства. Они задаются в следующем виде: **«имя_свойства»=«’значение_ свойства’»**. Список свойств описан ниже. Если нет значения свойства, то оно устанавливается в пустое значение (_например, связанный насос для счетчика – **MT=''**_). Для некоторых устройсв доступно добавление нескольких значений в некоторые свойства через запятую (_например, **MT='dev1,dev2'**_), такие свойства будут отмечены __*__ в списке ниже.

<table>
    <thhed>
        <th> <p align="center"> <b> Тип
        <th> <p align="center"> <b> Свойства
        <th> <p align="center" colspan = 2> <b> Примечание
    </thhed>
    <thbody>
    <tr> <td rowspan = 1>
    FQT
        <td> <b> MT <td> Насосы, качающие через данный счетчик. Необходимы для анализа работоспособности счетчика (насос работает – счетчик должен показывать расход)
    <tr> <td rowspan = 1>
    LT_IOLINK
        <td> <b> PT <td> Датчик давления, указывающий дополнительное избыточное давление. Необходим для коррекции показаний (из значения основного датчика отнимается данное избыточное давление)
    </thbody>
    <tr> <td rowspan = 1>
    DO
        <td> <b> DST <td> Получатель сигнала
    </thbody>
    <tr> <td rowspan = 1>
    DI
        <td> <b> PT <td> Отправитель сигнал
    </thbody>
    <tr> <td rowspan = 1>
    M
        <td> <b> IP <td> IP-адрес для частотного преобразователя, управляемого через Ethernet (M_ATV, M_ATV_LINEAR) по шаблону: _IP='-.-.-.-'_
    </thbody>
    <tr> <td rowspan = 2>
    Регулятор (С)
        <td> <b> IN_VALUE <td> Устройство, задающее входную величину для регулятора (датчик, сигнал AI) <tr>
        <td> <b> OUT_VALUE <td> Устройство, задающее входную величину для регулятора (датчик, сигнал AI)
    </thbody>
    <tr> <td rowspan = 1>
    CAM
        <td> <b> IP <td> IP-адрес камеры: IP='-.-.-.-'
    </thbody>
    <tr> <td rowspan = 1>
    HLA_VIRT, HLA_IOLINK
        <td> <b> SIGNALS_SEQUENCE 
        <td> Последовательность сигналов (лампочек) и сирены на сигнальной колонне, начиная с нижнего элемента (<i>прим., SIGNALS_SEQUENCE='ABGYR'</i>). <b>A</b> - сирена, <b>B</b> - синяя лампа, <b>G</b> - зеленая лампа, <b>Y</b> - желтая лампа, <b>R</b> - красная лампа. <b>Правила</b>: дублировать символы нельзя, а длина последовательности должна быть от <b>1</b> до <b>5</b> символов (<i>т.е наличие компонента сигнальной колонны - обязательно</i>).
    </thbody>
    <tr> <td rowspan = 4>
    WATCHDOG
        <td> <b> DI_dev <td> Сигнал DI. Прием сигнала от стороннего контроллера. <tr>
        <td> <b> AI_dev <td> Сигнал AI. Прием сигнала от стороннего контроллера. <tr>
        <td> <b> DO_dev <td> Сигнал DO. Передача сигнала в сторонний контроллер. <tr>
        <td> <b> AO_dev <td> Сигнал AO. Передача сигнала в сторонний контроллер.
    </thbody>
    <tr> <td rowspan = 1>
    [*EY] <br> AO_EY <br> VC_EY
        <td> <b> TERMINAL <td> Преобразователь, к которому привязано устройство
    </thbody>
</table>


5.	**Доп. поле [5]**. Определяет дополнительные рабочие параметры.  Рабочие параметры всегда устанавливаются при загрузке контроллера, они хранятся в оперативной памяти и не передаются на сервер. Рабочие параметры задаются в следующем виде: **«имя_рабочего_параметра»=«значение_рабочего_параметра»**. Список рабочих параметров приведен ниже.

* ___V___
    * **R_AS_NUMBER** - AS-номер, с единицы. (_Для клапанов с **AS-интерфейсом**_).
    * **R_VTUG_NUMBER** - VTUG-номер, с единицы. (_Для клапанов с **IO-Link интерфейсом**_, в новом типе привязки пневмоострова задается автоматически).

* ___HLA___
    * **R_CONST_RED** - Тип красного сигнала устройства при подаче на него сигнала DO. (_Постоянный или мигающий)_. Указываем **1** - если мигающий, **0** - если постоянный.

* ___VC_EY___, ___AO_EY___ (***EY**)
    * **R_EY_NUMBER** - Номер канала в IO-Link преобразователе **EY**.

### 6.4 Изделия устройств ###
Надстройка контролирует задание изделий в устройствах. Это нужно для более полного описания проектов, а также для корректного расчета IO-Link адресов устройств (для IO-Link устройств) и генерирования файлов проекта.

Изделия не проверяются в устройствах следующих типов: __VC__ (*кроме **VC_IOLINK***), __M__ (*кроме **M_ATV, M_ATV_LINEAR***), __DI__, __DO__, __AI__, __AO__, __C__, __CAM__ и во всех виртуальных подтипах.

Список IO-Link устройств (их изделий) содержится в файле _sys_iolink_devices.lua_. В этом файле можно добавить новые изделия (если таковых не было раньше в проектах), задать для них области ввода-вывода. Это позволит системе корректно рассчитать IO-Link адреса устройств.

Добавлять новые данные в файл можно в любой момент, но они применятся только после закрытия и повторного открытия программы EPLAN.

Список поддерживаемых изделий с областями ввода-вывода:

| Тип          | Номер типа                                             | Input (Bytes) | Output (Bytes) |
| ------------ | ------------------------------------------------------ | ------------- | -------------- |
| V            | AL.9615-4003-06                                        | 4             | 1              |
| V            | AL.9615-4003-08                                        | 4             | 1              |
| V            | AL.9615-4004-20                                        | 4             | 1              |
| V            | DEF.SORIO-1SV                                          | 4             | 1              |
| V            | GEA.TA15P8IAJ                                          | 4             | 1              |
| V            | GEA.TA15L8IAJ                                          | 4             | 1              |
| FQT          | SMR12GGXFRKG/US-100                                    | 8             | 0              |
| FQT          | IFM.SM6100                                             | 8             | 0              |
| QT           | IFM.LDL100                                             | 12            | 0              |
| QT           | IFM.LDL200                                             | 12            | 0              |
| PT           | IFM.PI2715                                             | 2             | 0              |
| PT           | IFM.PI2794                                             | 2             | 0              |
| PT           | IFM.PI2797                                             | 2             | 0              |
| PT и LT      | IFM.PM1704                                             | 4             | 0              |
| PT           | IFM.PM1705                                             | 4             | 0              |
| PT и LT      | IFM.PM1707                                             | 4             | 0              |
| PT           | IFM.PM1708                                             | 4             | 0              |
| PT           | IFM.PM1709                                             | 4             | 0              |
| PT           | IFM.PM1715                                             | 4             | 0              |
| PT           | FES.8001446                                            | 2             | 0              |
| PT и LT      | IFM.PM1706                                             | 4             | 0              |
| PT и LT      | IFM.PM1717                                             | 4             | 0              |
| PT           | E&H.PMP23-CA7N2KB3CJ                                   | 4             | 0              |
| PT           | E&H.PMP23-CA7N1KB3CJ                                   | 4             | 0              |
| LT           | IFM.LR2750                                             | 2             | 0              |
| TE           | IFM.TA2502                                             | 2             | 0              |
| TE           | IFM.TA2532                                             | 2             | 0              |
| TE           | IFM.TA2535                                             | 2             | 0              |
| TE           | IFM.TA2435                                             | 2             | 0              |
| TE           | E&H.TM311-AAC0BH2BBB2A1                                | 4             | 0              |
| LS           | IFM.LMT100                                             | 2             | 0              |
| LS           | IFM.LMT102                                             | 2             | 0              |
| LS           | IFM.LMT104                                             | 2             | 0              |
| LS           | IFM.LMT105                                             | 2             | 0              |
| LS           | IFM.LMT121                                             | 2             | 0              |
| LS           | IFM.LMT202                                             | 2             | 0              |
| LS           | E&H.FTL33-GR7N2ABW5J                                   | 2             | 0              |
| LS           | E&H.FTW33-GR7NWVJ                                      | 2             | 0              |
| LS           | E&H.FTW33-GR7NW5J                                      | 2             | 0              |
| DEV_VTUG и Y | FES.VTUG-10-MSDR-B1Y-25V20-G18FD-DTFD-M7SFD-12K+M1SCVA | 0             | 4              |
| DEV_VTUG и Y | FES.VTUG-10-VRLK-B1Y-G18FD-DTFD-M7SFD-12K+SCVA         | 0             | 4              |
| DEV_VTUG и Y | FES.VTUG-10-VRLK-B1Y-G18FD-DTFD-M7SFD-16K+SCVA         | 0             | 4              |
| DEV_VTUG и Y | FES.VTUG-10-VRLK-B1Y-G18FD-DTFD-M7SFD-8K+SCVA          | 0             | 2              |
| DEV_VTUG и Y | FES.VTUG-10-VRLK-B1Y-G18FDL-DTFDL-M7SFD-4K+SCVA        | 0             | 2              |
| F            | PXC.2910411                                            | 8             | 3              |
| VC           | BURKERT.8694                                           | 10            | 5              |
| HLA          | PXC.1191993                                            | 0             | 2              |
| G            | PXC.1252696                                            | 18            | 7              |
| G            | PXC.1252697                                            | 18            | 7              |
| G            | PXC.1362791                                            | 18            | 7              |
| G            | PXC.1362792                                            | 18            | 7              |
| EY           | IFM.DP1213                                             | 1             | 4              |

Для **M_ATV** и **M_ATV_LINEAR** надо указывать изделие, которое содержит номер частотного преобразователя (_если не задано, то берется **360**. Дополнительно существует ещё **630**_).

### 6.5 Работа с регулятором ###

Регулятор используется как обычное устройство на функциональной схеме автоматизации. У него есть определенный перечень параметров и дополнительных свойств, узнать который можно [здесь](#632-Назначение-дополнительных-полей). Регулятор задается согласно ГОСТу т.е в обозначении устройства буква C (регулирование) должна стоять на крайней позиции.
**Пример**: _FC1_, _TC1_ и др.

<p align="justify">Базовые свойства ПИД-регулятора, которые записываются в <b>Доп. поле [3]</b> заданы стандартными значениями, которые описаны в перечне дополнительных свойств и параметров. Если нужно переопределить стандартное значение, то необходимо в <b>Доп. поле [3]</b> записать только переопределяемое значение (<i>см. рисунок ниже</i>).</p>

<p align="center"><img src="images/OverridePIDProperties.jpg"></p>
<p align="center"><b>Рисунок</b> - <i>Переопределение параметров ПИД-регулятора</i></p>

<p align="justify">В <b>Доп. поле [4]</b> задаются входы и выходы регулятора. Входом может быть <b>датчик</b>, <b>сигнал AI</b> или <b>другое устройство</b>. Для ПИД-регулятора выходом должны быть только устройства типа <b>VC</b>, <b>AO</b>, <b>M</b> или <b>ПИД-регулятор</b>. Когда выходом ПИД-регулятора указывается другой регулятор, то образуется <b>каскадное</b> регулирование, где выход одного ПИД-регулятора является заданием для связанного регулятора. Для порогового регулятора выходом могуты быть дискретные устройства, такие как: <b>DO</b>, <b>V</b> или <b>M</b>.</p>

<p align="center"><img src="images/MakeCascadePID.png"></p>
<p align="center"><b>Рисунок</b> - <i>Образование каскадного регулирования</i></p>

<p align="justify">При вводе несуществующих входов и выходов будет выведено сообщение о несуществующих устройствах. Дополнительно проверяется выход ПИД-регулятора на корректность ввода описанных ранее разрешенных устройств.</p>
<p align="justify">Использование (<i>запуск</i>) ПИД-регулятора осуществляется через использование (<i>см. рисунок ниже</i>) его в шагах операции. ПИД-регулятор добавляется во вкладку шага "<i>Устройства</i>" в группе во вкладке "<b>Устройства</b>", а в поле "<b>Производительность</b>" указывается его задание (<i>параметр или сигнал AI</i>).</p>

<p align="center"><img src="images/RunPID.png"></p>
<p align="center"><b>Рисунок</b> - <i>Использование ПИД-регулятора в шагах</i></p>

## 7 Общие сведения о технологических объектах ##

<p align="justify"><b>Технологический процесс</b> (<em>техпроцесс</em>) – процесс производства какого-либо продукта (<em>полуфабриката</em>).</br>
<b>Технологический объект</b> - объект, в котором (<em>который</em>) непосредственно осуществляется (<em>осуществляет</em>) техпроцесс. Технологический объект характеризуется наличием связанными с ним операциями. К технологическим объектам относятся танк, гребенка, автомат и т.д.</br>
<b>Операция</b> – часть техпроцесса, которую непосредственно может запустить (<em>включить</em>) или остановить (<em>выключить</em>) оператор.</br>
<b>Шаг</b> - часть операции, которой непосредственно не может управлять оператор.</br>
<b>Действие</b> - входят в шаги, отвечают за типовую функциональность (открытие\закрытие устройств и т.п.).</br>

Таким образом, инженер по автоматизации описывает техпроцесс через описание технологических объектов, их операций и шагов, дополнительных параметров.</p>

В данной главе представлено описание для измененного редактора технологических объектов. Для того, чтобы посмотреть изменения относительно старого редактора технологических объектов, нужно обратиться к [документации](NewEditor.md). Новый редактор модифицирует текущее дерево с оглядкой на модель рецептурного производства **S-88**.

### 7.1 Описание окна редактора ###
<p align="justify">Вызвать редактор можно через меню <strong>EasyEplanner->Редактировать технологические объекты</strong>. Все объекты представляются в иерархической древовидной структуре S88. </p>

<p align="center"><img src="images/techobject_descr.png"></p>

<p align="center"><b>Рисунок</b> - <i>Окно редактора</i></p>

Описание панели инструментов редактора (подписаны числами черного цвета под кнопками):
1. <img src=images/ToolBar/expand.png width = 20 height = 20> - Развернуть/свернуть дерево объектов до определенного уровня. 
2. <img src=images/ToolBar/highlight.png width = 20 height = 20> - Включить подсветку устройств на схеме автоматизации.
3. <img src=images/ToolBar/edit.png width = 20 height = 20> - Включить режим редактирования.
4. <img src=images/ToolBar/refresh.png width = 20 height = 20> - Сохранение и синхронизация объектов.
5. <img src=images/ToolBar/create.png width = 20 height = 20> - Создать новый объект в выделенной точке (вставка нового объекта) (**Ins**).
6. <img src=images/ToolBar/delete.png width = 20 height = 20> - Удалить выделенный объект <kbd>Delete</kbd>.
7. <img src=images/ToolBar/cut.png width = 20 height = 20> - Вырезать выделенный объект <kbd>Ctrl</kbd>+<kbd>X</kbd>.
8. <img src=images/ToolBar/copy.png width = 20 height = 20> - Копировать выделенный объект <kbd>Ctrl</kbd>+<kbd>C</kbd>.  
9. <img src=images/ToolBar/paste.png width = 20 height = 20> - Вставить скопированный объект в выделенное место как новый <kbd>Ctrl</kbd>+<kbd>V</kbd>.
10. <img src=images/ToolBar/replace.png width = 20 height = 20> - Вставить скопированный объект в выделенное место с заменой выделенного объекта <kbd>Ctrl</kbd> + <kbd>B</kbd>. 
11. <img src=images/ToolBar/moveup.png width = 20 height = 20> - Переместить выделеный объект выше <kbd>Ctrl</kbd>+<kbd>&uarr;</kbd>.
12. <img src=images/ToolBar/movedown.png width = 20 height = 20> - Переместить выделенный объект ниже <kbd>Ctrl</kbd>+<kbd>&darr;</kbd>.  
13. <img src=images/ToolBar/import.png width = 20 height = 20> - Импорт объектов в проект.
14. <img src=images/ToolBar/export.png width = 20 height = 20> - Экспорт объектов из проекта. 
15. <img src=images/ToolBar/changeObj.png width = 20 height = 20> - Сброс базового объекта.
16. <img src=images/ToolBar/hideEmptyItems.png width = 20 height = 20> - Скрыть пустые поля.  
17. <img src=images/ToolBar/search.png width = 20 height = 20> - Поиск.
18. <img src=images/ToolBar/toolSettings.png width = 20 height = 20> - Настройка панели инструментов.

**Поиск**:

- <p align="justify">текстовый фильтр по элементам дерева, как по отображаемому, так и по редактируемому значению, можно использовать совместно со скрытием пустых полей. Если нажимать на стрелку "Вниз" в правой части поискового поля, то в дереве будут по очереди выделяться найденные элементы.</p>

   <img src="images/search.png">

- Поиск включает в себя 2 настройки:

    + <b><ins>ab</ins></b> - _Слово целиком_. Ищет слова только целиком, как указано в поисковой строке, то есть при запросе "<b>TANK1V1</b>" устройства _TANK1V11 TANK1V12_ не будут включены в поиск.

    + <b>.*</b> - _Использовать регулярные выражения_. При включении этой настройки поиск поддерживает [регулярные выражения](https://ru.wikipedia.org/wiki/Регулярные_выражения).

    + Примеры регулярных выражений (функция слова целиком работает также для регулярного выражения):

        * "<b>TANK1V[1-3]</b>" - найдет все поля с устройствами в диапозоне: _TANK1V1_ ,_TANK1V2_ и _TANK1V3_;

        * "<b>TANK1V(1|11|21)</b>" - найдет поля с устройствами: _TANK1V1_ ,_TANK1V11_ и _TANK1V21_;

        * "<b>TANK1V1\d</b>" - найдет все устройства _TANK1V..._ с номерами 10-19;

        * Для упрощения запросов также была реализована поддержка логических выражений с использованием **||** и **&&**: "<b>TANK1V1 || TANK1V2 && TANK1V3</b>" - ищет строки, содержащие _TANK1V1_ или _TANK1V2_ и _TANK1V3_;

        * Для более сложных выражений смотрите [документацю]((https://ru.wikipedia.org/wiki/Регулярные_выражения)) по регулярным выражениям.

<p align="justify">Пользователь может настроить панель инструментов под себя, убрав неиспользуемые инструменты. Для этого в правом верхнем углу присутствует специальный инструмент для настройки панели. Пример настройки панели привелене на рисунке ниже.</p>

<div align=center>
<img src="images/SettingTools.png"/>
<br><p\><b>Рисунок</b> - Настройка панели инструментов<i></i>
</div>

<p align="justify">Контекстное меню редактора, вызываемое щелчком **ПКМ** по элементу дерева, содержит основные операции с элементами дерева. Также меню предпологает сокрытие недоступных для элемента функций, как показано на рисунке ниже.</p>

<div align=center>
<img src="images/ContextMenu.png"/>
<br><p\><b>Рисунок</b> - Контекстное меню<i></i>
</div>

<p align="justify">При копировании или вырезке элемента в контекстном меню на операциях вставить и заменить при наведении выскакивает подсказка, которая показывает скопированный объект.</p>

<div align=center>
<img src="images/ContextMenuPasteToolTip.png"/>
<br><p\><b>Рисунок</b> - Подсказка скопированного объекта в контекстном меню<i></i>
</div>

Имя объекта состоит из следующих составляющих: локальный номер в списке, имя, номер объекта, глобальный номер объекта. Например, объект - **1. Танк 2 (#4)**. Его составляющие:
1. Локальный номер - "**1.**";
2. Имя - "**Танк**";
3. Номер объекта - "**2**";
4. Глобальный номер объекта - "**(#4)**".

Для редактирования любого узла дерева применяются следующие команды (_клавиши_) клавиатуры:
* Удаление – <kbd>Delete</kbd>;
* Вставка – <kbd>Insert</kbd>;
* Редактирование текстового представления – **двойной клик по активному узлу дерева**;
* Отмена редактирования – <kbd>Esc</kbd> (_во время редактирования_);
* Ввод редактирования – <kbd>Enter</kbd> (_во время редактирования_), или клик по другой строке;
* Копирование узла – <kbd>Ctrl</kbd>+<kbd>C</kbd>;
* Вставка узла – <kbd>Ctrl</kbd>+<kbd>V</kbd>, при этом надо находиться на родительском узле, куда мы вставляем скопированный элемент;
* Вставка узла – <kbd>Ctrl</kbd>+<kbd>B</kbd>, необходимо находиться на узле, который хотим заменить ранее скопированным;
* Вырезка узла - <kbd>Ctrl</kbd>+<kbd>X</kbd>, необходимо находиться в узле, который надо вырезать. Работает только для неопознанных объектов;
* Автозаполнение - <kbd>Ctrl</kbd>+<kbd>A</kbd>;
* Перемещение узла вверх – <kbd>Ctrl</kbd>+<kbd>&uarr;</kbd>;
* Перемещение узла вниз – <kbd>Ctrl</kbd>+<kbd>&darr;</kbd>;
* Выделение нескольких элементов – <kbd>Shift</kbd>+<kbd>&uarr;</kbd> / <kbd>Shidt</kbd>+<kbd>&darr;</kbd>;
* Выделение элемента / снятие выделения с элемента – <kbd>Ctrl</kbd>+<kbd>ЛКМ</kbd>;
* Быстрое выделение элементов (выделяются все элементы одного типа относящиеся к одной группе, технологические объекты выделяются также по одному технологическому типу) – <kbd>Ctrl</kbd>+2x<kbd>ЛКМ</kbd>;
* При копировании – вставке/замене объекта копируются все поля исходного объекта необходимо учитывать следующие нюансы:
    * Номер объекта меняется на номер объекта, на место которого вставляем объект
    * Копируется полный список операций и происходит копирование устройств, которые используются в операции. При этом происходит корректная замена номера объекта на новый (Подробнее описано [здесь](#7111-модификация-названий-устройств)). Это происходит в случае совпадения у двух объектов поля ОУ. Так при копировании операций из объекта __Танк 1__ с устройством __TANK1V1__ и заменой в объекте __Танк 3__ устройство изменит свое имя на __TANK3V1__.
    * При копировании операций происходит копирование ограничений, описанных в операции. Для ограничений, относящихся к данному объекту (_«Ограничения внутри объекта», «Ограничения на последующие операции»_), происходит замена старого номера объекта на новый.
    * Можно копировать не только отдельные строки параметров, операций, а также целые группы параметров, ограничений, операций.

##### Модификация названий устройств #####




#### 7.1.1 Неопознанные объекты при загрузке описания проекта ####
<p align="justify">Если базовый объект будет не распознан системой, добавляемый при загрузке объект будет добавлен в группу "<em>Неопознанные объекты</em>". Пример на рисунке ниже.</p>

<p align="center"><img src="images/NewEditor/unidentifiedObject.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Неопознанные объекты</i></p>

<p align="justify">Неопознанный объект может им и оставаться. Но над ним нельзя выполнять никаких действий, кроме как: "<b>Удалить</b>", "<b>Вырезать</b>" и "<b>Редактировать</b>". Если не переносить базовый объект в другие объекты, то он будет сохраняться как неопознанный объект. То есть, этот объект остается объектом, но его нельзя никуда копировать (только через вырезку), и новые неопознанные объекты также нельзя добавлять.</p>

<p align="justify">Вырезать объект можно с помощью сочетания клавиш <b>Ctrl + X</b>. После вырезки, объект станет перечеркнутым (<em>будет перечеркнут текст, но объект останется активным</em>). Для того, чтобы отменить вырезку, нужно нажать клавишу <b>Esc</b> при любом активном элементе дерева.</p>

<p align="center"><img src="images/NewEditor/unidentifiedDisabledObject.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Неопознанные объекты</i></p>

<p align="justify">Для того, чтобы вставить вырезанный объект, необходимо выбрать место, куда его вставить, и нажать сочетание клавиш <b>Ctrl + V</b>. С точки зрения программы, будет перенос объекта из одного места в другое и назначение этому объекту базового объекта, в который он был перенесен. Глобальный номер объекта не изменится.</p>

<p align="center"><img src="images/NewEditor/unidentifiedObjectAfterInsert.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Перенесенный объект</i></p>

<p align="justify">Если нужно перенести объект в базовый объект, которого ещё нет, то нужно нажать сочетание клавиш <b>Ctrl + V</b> на элементе дерева выше (<em>например, если есть объект S88, то нажимаем на Агрегат, Аппарат</em>). Если же нет даже объектов S88, то нажимаем на корень проекта (<em>где название проекта</em>) и нажимаем нужное сочетание клавиш. Когда система не может определить, куда перенести объект, будет вызвано окно (<em>по аналогии с созданием нового объекта</em>), где нужно выбрать, куда переносится неопознанный объект.</p>

#### 7.1.2 Создание объектов ####
<p align="justify">В редакторе есть градация с возможностью создания конкретного базового объекта. В новом редакторе существует три варианта создания объекта: из корня дерева, из корня объекта S-88, из корня базового объекта.</p>

<p align="center"><img src="images/NewEditor/treeRootsExample.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Обозначение корней элементов</i></p>

<p align="justify">При создании объектов из первых двух корней (<i>корень дерева и корень объекта S-88</i>), будет вызвано диалоговое окно (<i>см. рисунок ниже</i>). В зависимости от того, из какого корня было оно вызвано, будут активированы или деактивированы возможные варианты. Подробности описаны ниже.</p>

<p align="center"><img src="images/NewEditor/createNewObject.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Создание нового объекта</i></p>

<p align="justify">Например, если создание объекта идет из корня дерева, то все списки в окне создания объекта будут доступны. При создании объекта из корня объекта S-88, так как объект уже известен, то будет заблокирован выбор объекта S-88, а при создании объекта из корня базового объекта, сразу будет создан соответствующий конкретный объект базового объекта без каких либо окон.</p>

#### 7.1.3 Копирование, вставка и замена объекта ####
<p align="justify">Можно копировать любой объект, но вставить и заменить можно только объект с одинаковым базовым объектом. То есть, мы можем заменить <b>Танк</b> на <b>Танк</b>, но не можем <b>Танк</b> на <b>Линию</b>. Внутри объектов ситуация не изменилась. Мы можем скопировать операцию <b>Танка</b> в операции <b>Линии</b>, но базовая операция должна быть переназначена пользователем.</p>

#### 7.1.4 Удаление объекта ####
<p align="justify">Нужно учитывать, что при удалении объекта его глобальный номер будет удален, а, следовательно, все объекты будут сдвинуты относительно предыдущего их положения.</p>

#### 7.1.5 Перемещение объектов вверх и вниз ####
<p align="justify">Перемещение объектов вверх и вниз изменяет их глобальные номера путем замены. Объект <b>Х</b> меняется на <b>У</b> и наоборот. Но так как в редакторе мы пользуемся локальными индексами и объекты сгруппированы, то перемещать объект вверх и вниз можно только в пределах одной группы. Выход в другие группы невозможен.</p>

#### 7.1.6 Добавление устройств в операции в текстовом виде ####
<p align="justify">Необходимо включить режим редактирования (<em>иконка синего карандаша вверху окна редактора</em>) и выбрать (<em>выделить</em>) нужный узел.</p>

<p align="center"><img src="images/select_node.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример выбора узла</i></p>

<p align="justify">Далее кликнуть по нему и перейти в режим редактирования.</p>

<p align="center"><img src="images/edit_selected_node.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример режима редактирования</i></p>

<p align="justify">Последовательно через пробел записать требуемые устройства (<em>как на рисунке с включенным режимом редактирования</em>) и завершить ввод нажав <b>Enter</b> (<em><b>Esc</b> - отмена изменений</em>), получив измененный результат и состояние строки, как на рисунке с примером выбора узла.</p>

#### 7.1.7 Добавление устройств в операции в графическом виде ####
<p align="justify">Необходимо перейти в данный режим, нажав следующие кнопки:</p>

<p align="center"><img src="images/edit_buttons.png"></p>

<p align="center"><b>Рисунок</b> - <i>Кнопки для работы с графическим режимом</i></p>

<p align="justify">Необходимо выделить нужный узел.</p>

<p align="center"><img src="images/select_node.png"></p>

<p align="center"><b>Рисунок</b> - <i>Выбор узла</i></p>

<p align="justify">На карте подсвечиваются участвующие устройства (устройства <em>выключать</em> - серого цвета, <em>остальное</em> - зеленого цвета).</p>

<p align="center"><img src="images/higlight_dev.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример подсветки объектов</i></p>

<p align="justify">Путем клика на необходимых устройствах, добавляем или удаляем их из шага. После завершения редактирования шага переходим к следующему (<em>клик по требуемому узлу</em>).</p>

#### 7.1.8 Добавление устройств в операции в табличном режиме ####
<p align="justify">Необходимо вызвать окно с устройствами, вызвав его из меню (<em>смотри главу 1</em>), или же, если включен режим редактирования (<em>смотри предыдущий подпункт</em>), то окно вызовется само при выборе узла для редактирования.</p>

<p align="center"><img src="images/edit_selected_node_table_mode.png"></p>

<p align="center"><b>Рисунок</b> - <i>Редактирование узла в табличном режиме</i></p>

<p align="justify">Путем отметки (<em>снятия отметки</em>) соответствующие устройства добавляются (<em>удаляются</em>) из действия.</p>

#### 7.1.9 Сохранение результатов редактирования ####
<p align="justify">Результаты редактирования сохраняются при закрытии проекта (<em>как при закрытии проекта отдельно, так и при закрытии окна EPlan с включенным проектом</em>), а так же с помощью кнопки "Синхронизация и сохранение" (<em>сине-зеленый круг справа на картинке</em>).</p>

<p align="center"><img src="images/edit_buttons.png"></p>

<p align="center"><b>Рисунок</b> - <i>Кнопка сохранения и синхронизации</i></p>

#### 7.1.10 Использование параметров в объекте ####

<p align="justify">В технологическом объекте задаются параметры объекта.</p>

<p align="justify">В поле "Параметры" есть функция автозаполнения (<kbd>Ctrl</kbd>+<kbd>A</kbd>).
При использовании данной функции поля параметров автоматически заполняются в соответствии с
описанием базового объекта, в базовых объектах эти параметры прописываются в базовых операциях.
После генерации параметров одной базовой операции добавляются 2 пустых параметра.</p>

<p align="justify">В дополнении присутствует механизм проверки параметров. С помощью этого механизма выявляются совпадения имен (Lua имен) параметров, так как имена должны быть уникальны. Механизм не проверяет параметры с пустым именем или со стандартным (Lua имя - "P"): 

1. Если Lua имя параметров совпадают, то оно сбрасывается у всех параметров.
2. При вставке скопированного параметра с уже существующим Lua именем, оно сбрасывается только у вставленного параметра.
3. Если попытаться изменить Lua имя на уже существующее, то изменения не произойдет.
</p>

<p align="center"><img src="images/TechObjectParameters.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Параметры технологического объекта</i></p>

<p align="justify">Также окно параметров содержится в каждой операции технологического объекта.</p>

<p align="center"><img src="images/TechObjectOperationParameters.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Параметры операции технологического объекта</i></p>

<p align="justify">Для удобства использования, в параметрах объекта есть поле "Операция", которое позволяет указать к какой операции относится параметр.</p> 

<p align="center"><img src="images/TechObjectOperationNumbersParameter.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Поле "Операции" в параметрах объекта</i></p>

<p align="justify">После того, как это поле будет заполнено, в заданной операции отобразится параметр, который был записан в поле "Операции" в параметрах объекта. В нынешней редакции можно задавать множество операций. Для этого необходимо перечислить номера операций через пробел (см. рисунок ниже). Для задания одного параметра необходимо указать его номер в поле, без пробелов.</p>

<p align="center"><img src="images/TechObjectOperationSetUpNumbers.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Поле "Операции" в параметрах объекта</i></p>

<p align="justify">После того, как все номера операций перечислены и зафиксированы, в заданных операциях объекта отобразятся эти параметры.</p>

<p align="center"><img src="images/TechObjectSetUpParametersIntoOperation.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Пример отображения параметров в операции</i></p>


#### 7.1.11 Модификация названий устройств ####

<p align=justify> Модификация названий привязанных устройств выполняется при изменении названия или номера технологического объекта, которое происходит в следствии редактирования полей, вставке или замене объекта. Так же модификация проводится при открытии и сохранении проекта. </p>

В модификации привязаных устройств учавствуют следующие поля в технологическом объекта:
- Все поля дейтсвий;
- Параметры действий(если к ним привязано устройство);
- Элементы поля `Доп.свойства`(в операциях);
- Элементы поля `Оборудование`.

##### Правила модификации устройств #####

Устройства в поле оборудования всегда соответсвуют технологическому объекту, поэтому там правило простое: подставляется устройство с соответствующим объектом или удаляется;

Для остальных полей модификация устройств проводится по следующим правилам:
- Если у привязанного устройства объект совпадает с изменяемым тех.объектом, то устройство модифицируется в соответсвии с изменением имени/номера объекта (или остается прежним в случае отсутсвия такого устройства):
    * (имя: "OBJ" => "OTHER") : `[OBJ]1V1` => `[OTHER]1V1`; [*][modify]
    * (номер: 1 => 2) : `OBJ[1]V1` => `OBJ[2]V1`; [*][modify]
- В случае если совпадает название объекта, но номер **НЕ** совпадает и при этом он совпадает с новым номером объекта, то он изменяется на противоположный:
    * (номер: 1 => 2) : `OBJ[2]V1` => `OBJ[1]V2`; [*][modify]
- Если устройства взяты из типового объекта, то в случае их отсутствия они удаляются;
- Модификация клапанов **MIXPROOF** и других подтипов осуществляется в следующих условиях:
    * Модифицируемый объкта - **Аппарат**;
    * Имя устойства объекта не совпадат с ОУ тех.объекта;
    * Устройство имеет тип **MIXPROOF** или схожий, а именно:
        + `V_DO1_DI2`
        + `V_DO2_DI2`
        + `V_DO2_DI2_BISTABLE`
        + `V_MIXPROOF`
        + `V_BOTTOM_MIXPROOF`
        + `V_IOLINK_MIXPROOF`
        + `V_AS_MIXPROOF`
        + `V_AS_DO1_DI2`
        + `V_IOLINK_DO1_DI2`
        + `V_IOL_TERMINAL_MIXPROOF_DO3`

  При этом модифицируется не номер объекта, а номер устройства (точнее, его часть свопадающая с номером тех.объекта), если такого устройства нет, оно удаляется из привязки:
    * (номер: 1 => 2) : `NO_UNIT1V[1]` => `NO_UNIT1V[2]` [*][modify]
    * (номер: 13 => 14) : `NO_UNIT1V2[13]` => `NO_UNIT1V2[14]` [*][modify]

[modify]: ## "В круглых скобках указывается изменение объекта, далее черех двоеточие результат модификации устройства, где в квадратных скобках указано, что именно изменяется."


### 7.2 Описание действий ####

Список реализованных действий:

1. **Проверяемые устройства**. Проверяются на ошибки устройства во время выполнения шага.
2. **Включать**. Включаются (устанавливаются в активное основное состояние) устройства.
3. **Включение устройств с задержкой**. Включаются (устанавливаются в активное основное состояние) устройства с установленой задежкой в соответствующей группе.
4. **Включать реверс**. Включаются в реверс (устанавливаются в активное реверсное состояние, обычно это двигатели и т.п.) устройства. По завершению действия устройства отключаются.
5. **Выключать**. Отключаются (устанавливаются в пассивное состояние) устройства.
6. **Выключение устройств с задержкой**. Отключаются (устанавливаются в пассивное состояние) устройства с установленой задержкой в соответствующей группе.
7. **Верхние седла**. Включается верхнее седло (устанавливается в активное состояние) для устройства. Обычно используется для промывки противосмешивающих клапанов для шагов операции мойки. По завершению действия устройства отключаются.
8. **Нижние седла**. Включается нижнее седло (устанавливается в активное состояние) для устройства. Обычно используется для промывки противосмешивающих клапанов для шагов операции мойки. По завершению действия устройства отключаются.
9. **Сигналы для включения**. При включении операции проверяются на активность данные устройства - если хотя бы одно из устройств не активно, то выдаётся соответствующее сообщение и операция не включается.
10. **Устройства**. Служит для упрощения типовой логики работы. Устройства, которые находятся в поле *"устройства"* включаются (активируются), а находящиеся в поле *"реверсные устройства"* включаются в реверс (аналогично действию **Включать реверс**) при активном (хотя бы одном) сигнале из поля *"DI"*. Если нет ни одного сигнала из поля *"DI"*, то устройства в поле *"устройства"* отключаются. Сигналы для поля *"DO"* выдаются всегда. По завершению действия все включенные устройства отключаются. Также поле *"Производительность"* служит для задания производительности включаемых моторов. Это может быть устройство **AI** (аналоговый сигнал) или номер параметра.
11. **Группы DI DI ... -> DO DO ...**. Специальное действие - выдача дискретных сигналов при наличии хотя бы одного из входных дискретных сигналов.
12. **Группы инвертированный DI DI ... -> DO DO ...**. Специальное действие - выдача дискретных сигналов при пропадании хотя бы одного из входных дискретных сигналов.
13. **Группы AI -> AO AO ...**. Специальное действие - выдача аналоговых сигналов по значению входного аналогового сигнала.
14. **Сигнал для включения текущего шага**. Служит для автоматического включения шага операции по сигналу **DI**, который записан в действии, и выключения шага по пропаданию этого сигнала, если это было указано в соответствующем параметре. Действие групповое, т.е можно группировать сигналы. Для сигналов, которые записаны в одно действие, действует условие **И** для включение шага, а для сигналов между действиями - **ИЛИ**.
15. **Переход к следующему шагу по условию**. Специальное действие - переход к шагу по выполнении условия: включение и выключение заданных устройств. Действие состоит из групп, которые включают в себя: включение устройств, выключение устройств и номера следующего шага.
    Между группами действует условие **ИЛИ**, а внутри группы - **И**.
16. **Переход к состоянию по условию**. Анологичено предыдущему действию для перехода между состояниями согласно схеме в пункте [5.1](#51-операции-объектов). Реализовано для состояний выполнения и ожидания во время выполнения операции.

Помимо описанных выше действий, шаги включают в себя параметры времени (__время шага__ и __максимальное время шага__) для безусловного перехода к шагу, указаному в поле __"номер следуюшего шага"__. В полях __"Время (параметр)"__ и __"Максимальное время шага (параметр)"__ указывается номер параметра, а в самом параметре устанавливается значение времени в ***секундах (с)***.

Для всех действий отслеживаются ошибки входящих в них устройств. Если шаг, в котором данное действие описано, активен и возникает ошибка устройства из данного действия (обратная связь для клапана и т.п.), операция становится на паузу с выдачей соответствующего сообщения.

Для упрощения работы реализованы ограничения на добавляемые в действия устройства. Типы устройств, которые можно добавлять в действия:

1. Проверяемые устройства - любые устройства.
2. Включать (включение устройств с задержкой) - **DO**, **M**, **V**;
3. Включать реверс - **M**;
4. Выключать (выключение устройств с задержкой) - **DO**, **M**, **V**;
5. Верхние седла - **V**, **DO** с подтипами **V_MIXPROOF**, **V_AS_MIXPROOF**, **V_IOLINK_MIXPROOF**, **V_VIRT**, **DO**, **DO_VIRT**;
6. Нижние седла - **V**, **DO** с подтипами **V_MIXPROOF**, **V_AS_MIXPROOF**, **V_IOLINK_MIXPROOF**, **V_VIRT**, **DO**, **DO_VIRT**;
7. Сигналы для включения - **DI**, **GS**;
8. Устройства
    * DI - **DI**, **SB**, **GS**, **FS**, **LS**;
    * DO - **DO**;
    * Устройства - **DO**, **M**, **V**, **VC**, **AO**, **ПИД-регулятор** (_вариации С_);
    * Реверсивные устройства - **M**;
9. Группы DI DI ... -> DO DO ... - **DI**, **GS**, **DO**, **SB**, **HL**, **FS**, **LS**;
10. Группы инвертированный DI DI ... -> DO DO ... - **DI**, **GS**, **DO**, **SB**, **HL**, **FS**, **LS**;
11. Группы AI -> AO AO ... - **AI**, **AO**, **M**, **VC**, **PT**, **LT**, **QT**, **FQT**, **TE**.
12. Сигнал для включения шага - **DI**,**LS**,**GS**,**SB**,**FS**,**TS**,**PDS**;
13. Перейти в шаг по условию - **V**, **GS**, **DI**, **DO**, **LS**.

### 7.3 Использование функциональности базового объекта и базовой операции ####

<p align="justify">Надстройка хранит описание базовой функциональности в файле. Файл хранится в папке с LUA файлами и заполняется по определенному шаблону (правила описания внутри файла, вначале). Имя файла - <code>sys_base_objects_description.lua</code>. Информация загружается из файла один раз, при запуске EPLAN. Для того, чтобы загрузить новые данные (после изменения файла), необходимо перезапустить EPLAN. При отсутствии этого файла в системе (был случайно удален или др.) этот файл будет создан заново со стандартным описанием (в теневом хранилище), и будет выведена ошибка о том, что файл не найден. Для исправления этой ошибки необходимо перенести созданный файл-шаблон из теневого хранилища в папку, где хранится надстройка, заполнить его и перезагрузить EPLAN.</p>

<p align="justify">Базовый объект выбирается автоматически при создании объекта. Базовый объект описывает, какие базовые операции, оборудование и др. компоненты будет содержать объект помимо своего основного функционала. В зависимости от базового объекта, к объекту могут быть привязаны те или иные объекты. Для этих целей, у объекта есть поле <code>Привязанные агрегаты</code>.</p>

#### 7.3.1 Привязка базовых объектов друг к другу ####
<p align="justify">Привязка позволяет привязать один объект к другому. В данный момент можно привязывать агрегаты к аппаратам, агрегаты к агрегатам, а также, привязывать танки к базовым линиям. Привязка агрегатов к аппаратам и агрегатов к агрегатам описана ниже. Привязка же танков к линиям осуществляется через поле "Группы танков" в базовых объектах линий. Привязка осуществляется по такому же принципу, как и привязка агрегатов к аппарату.</p>

<p align="center"><img src="images/NewEditor/attachTankToLines.png"></p>

<p align="center"><b>Рисунок</b> - <i>Привязка групп танков</i></p>

<p align="justify">Привязка агрегатов к аппаратам (<i>хотя, линии у нас относятся к агрегатам, но мы можем привязывать к ним другие агрегаты</i>) теперь выполняется не вручную, а может быть настроена также, как и ограничения (<i>окно "Операции, ограничения, привязка объектов" в режиме редактирования</i>). Пример настройки привязки объектов представлен ниже.</p>

<p align="justify">Доп. свойства операции, добавляемые при привязке объекта,
автоматически заполняются с добавлением float-параметра,
если есть соответсвующее описание базового объекта:
данные параметра генерируются автоматически в зависимости от базовой операции.</p>

<p align="center"><img src="images/NewEditor/attachObjects.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Новая привязка объектов</i></p>

<b>Примечание:</b>
1. Подчеркнутые номера - это глобальные номера объектов. Руками их менять нельзя. Объекты нужно привязывать через графический интерфейс. Ровно как и ограничения;
2. К аппаратам нельзя привязать два базовых объекта одного типа . Например, нельзя привязать "_Узел перемешивания 1_" и "_Узел перемешивания 2_" к объекту "_Танк 1_". Произойдет автоматическая отвязка старого и привязка нового объектов (_с сохранением заданных параметров, при условии, что это были объекты одного типа_).
3. К агрегатам можно привязывать множество агрегатов одного типа, но, есть пара моментов использования. Нужно, чтобы были одинаковые имена параметров у агрегатов т.к настройка одного привязанного агрегата будет распространяться сразу на все (_значения параметров будут браться из каждого агрегата, и они могут быть уникальные, но не имена параметров_). Включаться в операции также будут сразу все связанные агрегаты одного типа (нет настройки, чтобы можно было включать, к примеру, _Узел перемешивания 1_ в операции _Х_, и _Узел перемешивания 2_ в операции _Y_.
4. Объекты привязываются в том порядке, в котором их задал пользователь. Порядок привязки ни на что не влияет.

#### 7.3.2 Использование базовой операции ####
<p align="justify">Выбор базовой операции в базовом объекте осуществляется таким же образом, с тем лишь исключением, что выбирать нужно напротив названия операции.</p>

<p align="center"><img src="images/set_base_oper.png"></p>

<p align="center"><b>Рисунок</b> - <i>Выбор базовой операции</i></p>

<p align="justify">В <code>Операции</code> добавлено ещё один раскрывающийся элемент <code>Дополнительные cвойства (<i>Доп. свойства</i>)</code>. В зависимости от выбранной операции, появляется разное количество полей, которое необходимо заполнить. Если в операции нет доп. свойств, то это поле не будет показано (<i>будет скрыто</i>) Заполнять можно вручную или при помощи клика по добавляемому устройству на <b>ФСА</b>. Также доступно редактирование через окно "<b>Устройства, параметры объектов</b>".</p>

<p align="center"><img src="images/base_operation_props_set_up_parameters.png"></p>

<p align="center"><b>Рисунок</b> - <i>Настройка свойства через окно "Устройства, параметры объектов"</i></p>

<p align="justify">В этом окне можно графическим образом (<i>поставить галочки</i>) отметить, какие устройств или параметры должны быть заданы в поле. Если окно "<b>Устройства, параметры объектов</b>" пустое, значит графическим образом добавлять данные не предусмотрено либо это другие данные, которые таким способом добавлять нельзя.</p>

<p align="center"><img src="images/extra_oper_params.png"></p>

<p align="center"><b>Рисунок</b> - <i>Дополнительные поля операции</i></p>

Надстройка проверяет, какие свойства заполнены, а какие нет. Для того, чтобы не было сообщения о незаполненном свойстве (_например, оно не обрабатывается или сложилось так, что его нет, или какие-то другие условия_), необходимо явно задать специальное значение. При обработке данных свойств, система проверяет, не введено ли значение-заглушка (слово "**Нет**"). Проверяется не просто слово "**Нет**", а его наличие в вводимой строке. Если было введено слово "__АбвгднетАбвгд__", то система распознает заглушку "**Нет**" и запишет это значение в поле. При автоматической проверке проекта данные поля считаются корректно заполненными.

<p align="center"><img src="images/skip_extra_oper_params.png"></p>

<p align="center"><b>Рисунок</b> - <i>Использование значения-заглушки</i></p>

Типы свойств:
1. Текстовое - значение задается в виде текста вручную, или клик по схеме (если предусмотрено).
2. Булевское - двойной клик, который изменяет значение свойства на противоположное. Если значение отличается от стандартного, то оно будет выделено жирным.

##### Примечание:

* Если базовая операция не выбрана, то дополнительных полей не появится.
* Появляющиеся поля используются при формировании prg.lua.
* Если операции в списке нет, то эта операция не реализована.
* На каждый объект может быть выбрана только 1 базовая операция конкретного типа (прим., только 1 операция наполнения на объект).
* Если в объекте нет какой-то базовой операции т.е она не используется, то её можно удалить без вреда для управляющей программы.

#### 7.3.3 Использование базового шага ####

Базовый шаг позволяет указать те шаги, свойственные для базовой операции, информация о которых будет автоматически записана в файла prg.lua. Тем самым, описанный шаг не нужно будет вручную описывать в программе через файл main.plua. Выбор базового шага осуществляется по такому же принципу, как и выбор базового объекта, базовой операции. Список базовых шагов для каждой базовой операции будет описан в следующем разделе документации.

##### Примечание:
* Если в объекте нет какого-либо базового шага, т.е он не используется, его можно удалить без вреда для управляющей программы.

#### 7.3.4 Использование оборудования базового объекта ####
В технологическом объекте есть вкладка `Оборудование`. Эта вкладка содержит физическое оборудование выбранного базового технологического объекта. Если у объекта нет никакого оборудования, то эта вкладка будет скрыта автоматически. Например, для базового объекта `Узел перемешивания` добавляются 3 устройства: датчик люка, датчик решетки, мешалка. Все устройства можно добавлять как руками, так и по клику на соответствующее устройство на ФСА. Пример добавления на рисунке ниже.

<p align="center"><img src="images/baseEquipment.png"></p>

<p align="center"><b>Рисунок</b> - <i>Оборудование базового объекта</i></p>

Если какого-то оборудования нет в объекте, но оно есть в списке, то это оборудование можно не заполнять.

Примечание: оборудование можно добавлять по клику на объект в схеме.

В дополнении присутствует система автоматической привязки оборудования к объекту. Это происходит во время выбора/смены базового объекта, а также при открытии/закрытии/обновлении/сохранении проекта. Привязка осуществляется, только, если данное поле с оборудованием было заполнено стандартным значением и не является пустым. Автоматическая привязка работает на основании того, что стандартизированы имена устройств и их номера, которые используются для того или иного оборудования. Система формирует ОУ устройства (на основании ОУ объекта и его номера), составляет имя устройства, проверяет его наличие и привязывает, если устройство есть на схеме. Множественная автоматическая привязка устройств отсутствует.

Данный функционал позволяет привязывать более 1 устройства на один тип оборудования.

#### 7.3.5 Использование дополнительных свойств объекта ####

<p align="justify">Оборудование базового объекта является описанием физической структуры объекта, а поле "<i>Доп. свойства</i>" объекта позволяет настроить логику работы объекта (<i>например, игнорирование ошибок или что-то ещё</i>). В этом поле находятся свойства, которые влияют на объект. Если таких свойств у объекта нет, то это поле не будет отображаться т.е будет автоматически скрыто.</p>

<p align="center"><img src="images/baseObjPropertiesInTechObject.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Доп. свойства объекта</i></p>

<p align="justify">В этом поле могут быть параметры булевые (<i>да/нет</i>), или активные параметры, которые могут принимать устройства, параметры и др.</p>

#### 7.3.6 Использование системных параметров в базовом объекте ####
<p align="justify">Функциональность базового объекта добавляет системные параметры в объект, при их наличии. Если системные параметры были заданы в файле описания, они появятся в базовом объекте. Особенность системных параметров в том, что они управляют какими-то общими параметрами. В системных параметрах можно только редактировать значение, все остальное доступно только для чтения.</p>

<p align="center"><img src="images/systemBaseParameters.png"></p>

<p align="center"><b>Рисунок</b> - <i>Системные параметры объекта</i></p>

#### 7.3.7 Список базовых объектов, операций, параметров, шагов и оборудования ####

Перенесено в репозиторий с описанием базовых объектов. Т.е в ptusa-Lua-dairy-system. Файл ReadMe.md.

#### 7.3.8 Рекомендации по использованию ОУ (_обозначений устройств_) в объектах ####
* Для линии указывать букву, которая обозначает линию - `B`, `C` и др.
* Для узлов перемешивания/охлаждения/подогрева указывать ОУ - `MIX`/`COOLER`/`HEATER` соответственно (_регистр не важен_). Если узел перемешивания/охлаждения/подогрева принадлежит только одному объекту, то для его ОУ можно использовать обозначение того объекта, к которому он принадлежит. Например, для линии с ОУ `C` можно использовать такое же ОУ для узла.

#### 7.4 Экспорт объектов из редактора и обратный импорт ####

<p align="justify">Надстройка позволяет экспортировать объекты, описанные в редакторе в файл, а затем использовать экспортированные объекты в других проектах, предварительно загрузив их (<i>импортировав</i>) в проект. Вызов окон экспорта или импорта вызывается из окна редактора (<i>см. пункт <b>7.1</b></i>).</p>

В импорте и экспорте объектов, глобальные номера объектов будут занулены (_нулевые значения_). Это принято, потому что эти объекты ещё не находятся в общем пуле глобальных объектов основного дерева.

#### 7.4.1 Экспорт объектов ####

<p align="justify">При открытии меню экспорта, появляется специальное окно (<em>см. рисунок</em>), в котором нужно отметить галочками объекты, которые нужно экспортировать и нажать кнопку "<em>Экспортировать</em>". Кнопка "<em>Отмена</em>" - отменяет действие, закрывает окно экспорта. Дополнительные кнопки над списком: "<em>Всё</em>" и "<em>Очистить</em>", позволяют быстро отметить/снять галочки со всех элементов списка.</p>

<p align="center"><img src="images/exportObjectsForm.png"></p>

<p align="center"><b>Рисунок</b> - <i>Окно экспорта</i></p>

<p align="justify">После нажатия на кнопку "<em>Экспортировать</em>", откроется диалог (<em>стандартный Windows диалог, вызываемый при сохранении файла</em>), в котором надо указать место сохранения и название файла. После нажатия кнопки "<em>Сохранить</em>", окно экспорта будет автоматически закрыто, а файл с объектами появится по указанному пути с указанным именем (см. рисунок ниже).</p>

<p align="center"><img src="images/saveExportObjectsForm.png"></p>

<p align="center"><b>Рисунок</b> - <i>Окно сохранения</i></p>

Алгоритм сохранения:
1. Указываем путь к файлу;
2. Указываем имя файла;
3. Жмем кнопку "_Сохранить_".

#### 7.4.2 Импорт объектов ####

<p align="justify">При открытии меню импорта, появляется специальное окно (<em>см. рисунок ниже</em>). В этом окне, необходимо указать через кнопку "<em>Обзор</em>" файл с объектами и загрузить его, затем, отметив нужные объекты галочками в списке, нажать кнопку "<em>Импортировать</em>". Кнопка "<em>Отмена</em>" - отменяет действие и закрывает окно импорта. Дополнительные кнопки над списком: "<em>Всё</em>" и "<em>Очистить</em>", позволяют быстро отметить/снять галочки со всех элементов списка.</p>

**Примечание**:
1. У всех объектов при импорте привязка сбрасывается, т.к неизвестно, что привязано к нему в проекте и куда он импортируется;
2. В действиях сбрасываются устройства, которые не существуют в проекте, куда импортируется объект;
3. Сбрасываются ограничения операций, т.к они могут в новом проекте не совпадать и вызывать ошибки;
3. Все остальное полностью копируется.

<p align="center"><img src="images/importTechObjectsForm.png"></p>

<p align="center"><b>Рисунок</b> - <i>Окно импорта</i></p>

<p align="justify">Нажав кнопку "<em>Обзор</em>", появится окно (<em>см. рисунок ниже</em>), в котором надо указать путь к файлу (<em>пункт 1 на картинке</em>), выбрать файл и нажать кнопку "<em>Открыть</em>" (<em>пункт 2 на картинке</em>).</p>

<p align="center"><img src="images/loadImportedObjectsForm.png"></p>

<p align="center"><b>Рисунок</b> - <i>Окно загрузки</i></p>

<p align="justify">После открытия файла с объектами, объекты будут загружены в систему и их список будет выведен в окошке, в котором можно отмечать нужные для импорта объекты (<em>см. рисунок ниже</em>).</p>

<p align="center"><img src="images/loadImportedObjectsFormAfterImport.png"></p>

<p align="center"><b>Рисунок</b> - <i>Окно импорта после загрузки объектов</i></p>

<p align="justify">После расстановки галочек на нужных для импорта в проект объектах, необходимо нажать кнопку "<em>Импортировать</em>". Объекты добавятся в <strong>конец</strong> дерева объектов проекта, и окно импорта автоматически закроется.</p>

#### 7.5 Автоматическая вставка объектов из макросов ####

EasyEplanner позволяет автоматически вставлять нужные базовые объекты на основе макросов. То есть, достаточно вставить макрос с нужным описанием, и система автоматически добавит новый базовый объект. Подробнее этот функционал описан [здесь](AutomaticInsertObjectFromEplanMacros.md).

#### 7.6 Сброс базового объекта ####

Сброс базового объекта позволяет сбросить базовый объект. Для того, чтобы сбросить объект, необходимо выделить объект и нажать кнопку сброса ([картинка здесь](#71-Описание-окна-редактора)) под номером <strong>16</strong>. Необходимо включить режим редактирования. Базовый объект превратится в "<strong>Неопознанный объект</strong>" и будет перемещен в соответствующую вкладку редактора объектов. Изменение базового объекта из неопознанного в какой-то определенный объект можно осуществить через механизм вырезания (<em>Ctrl + X</em>). Подробнее - [здесь](#711-Неопознанные-объекты-при-загрузке-описания-проекта).

<p align="justify"><b>Внимание</b>: будут сброшены только поля и свойства, которые зависят от базового объекта. То есть, базовый шаги, базовые операции, оборудование и др. Все остальное - останется. Шаги, операции и устройства в них, а также параметры не поменяются.</p>

#### 7.7 Использование групп с типовым объектом ####

<p align="justify">Типовой объект определяет базовую функциональность для группы технологических объектов. Наследуемые объекты обновляются как при создании на основе типового, так и при редактировании типового объекта. Большая часть полей типового объекта не наследуется, если они не заполнены, а в наследуемых объектах можно задать этим полям различные значения.</p>

<p align=justify>Для корректного перемещения операций и шагов в типовом объекте и такого же перемещения элементов в наследуемых объектах, для них должны быть установлены уникальные названия.</p>

##### 7.7.1 Создание группы с типовым объектом и добавление тех. объектов в группу #####

Создать группу с типовым объектом можно 3-мя способами:
1. Из контекстного меню базового объекта создать новый типовой объект как показано на рисунке ниже, либо использовать комбинацию клавиш <kbd>Ctrl</kbd>+<kbd>Insert</kbd>:

<p align=center>
    <img src=images/CreateNewGenericGroup.png/>
    <br><b>Рисунок</b> - <i>Создание нового типового объекта</i>
</p>

2. Создать типовой объект на основе тех. объекта командой Создать(<kbd>Insert</kbd>), типовой объект приобретёт все поля исходного объекта;

3. Сгруппировать несколько технологических объектов из контекстного меню, как показано на рисунке ниже, либо использовать комбинацию клавиш <kbd>Ctrl</kbd>+<kbd>G</kbd>. В этом случае типовой объект автоматически приобретёт общие поля выделенных объектов:

<p align=center>
    <img src=images/CreateGenericGroupFromManyObjects.png/>
    <br><b>Рисунок</b> - <i>Группировка нескольких технологических объектов и создание типового объекта на их основе</i>
</p>

<p align="justify">Добавить новые объекты в группу с типовым объектом можно при помощи кнопки "Создать"(Insert) либо вставить копированные/вырезанные объекты, тогда они приобретут функциональность типового объекта и сохранят уже имеющуюся функциональность.</p>

##### 7.7.2 Действия #####

<p align="justify">Устройства, добавленные в действия типового объекта обозначаются в наследуемых объектах специальным выделением, как показано на рисунках ниже. Данные устройства можно редактировать и в наследуемом объекте.</p>

<div align=center>

Действие в типовом объекте |  Действие в наследуемом объекте
:-------------------------:|:-------------------------:
<img src="images/ActionGenericObject.png" height="60"/>  |  <img src="images/ActionInheritedObject.png" height="60"/>

<p><b>Рисунок</b> - <i>Наследование устройств в действии из типового объекта</i></p>
</div>

<p align = "justify">Устройства, добавленные в действие с названием объекта соответсвующим ОУ технологического объекта будут автоматически изменять номер объекта на технологический номер соответсвующего наследуемого объекта. Можно использовать устройство с любым номерм объекта.</p>

<div align=center>

Типовой танк |  Наследуемый танк №1 | Наследуемый танк №2 
:-------------------------:|:-------------------------:|:---------------:
<img src="images/ActionGenericEplanName.png" height=170/>  |  <img src="images/ActionInheritedEplanNameObject1.png" height=170/> | <img src="images/ActionInheritedEplanNameObject2.png" height=170/>

<p><b>Рисунок</b> - <i>Наследование устройств в действии из типового объекта c определенным ОУ</i></p>
</div>

##### 7.7.3 Параметры ####

<p align="justify">В наследуемые объекты переходят все параметры типового объекта, а также их данные (название, операция, lua-имя...) и значение. Если в параметре в типовом объекте какое-либо поле не заполнено, то данное поле не наследуется и его можно изменять во всех объектах группы. Для значения параметра в типовом объекте можно установить значение "-" (Минус), тогда значение поля не наследуется, и во всех объектах группы может быть установленно разное значение этого параметра, как показано на рисунках ниже.</p>

<div align=center>

Параметр без значения в типовом объекте |  Параметр со значением в наследуемом объекте
:-------------------------:|:-------------------------:
<img src="images/ParametersGenericEmptyValue.png" height="120"/> | <img src="images/ParametersInheritedEmtyValue.png" height="120"/>

<p><b>Рисунок</b> - <i>Наследование параметров с пустым значением</i></p>
</div>

<p align="justify"><b>Примечание:</b> В наследуемых объектах можно добавлять дополнительные параметры, но, при добавлении новых параметров в типовой объект, параметры наследуемого объекта будут "Затерты" новыми параметрами.</p>

#### 7.7.4 Привязанные агрегаты ####

<p align=justify>При привязке агрегата к типовому объекту можно привязать группу объектов к группе этого типового объекта. Для этого в привязываемых объектах должны быть заданы типы и они должны находиться в базовом объекте одного подтипа. Тогда привязка произойдёт в соответствии с технологическими номерами объектов. В наследуемых объектах можно дополнительно привязать объекты. Привязанные объекты, унаследованные от типового объекта, подсвечиваются по аналогии с устройствами и действиями, как показано на рисунке ниже. </p>

<p align=center><img src="images/GenericAttachedObjects.png"/><br><b>Рисунок</b> - <i>Наследование привязанных агрегатов</i></p>

#### 7.8 Автозаполнение ####

Автозаполнение - это функциональность для автоматического заполнения данных
технологических объектов на основании определенных преднастроек, установленных
при редактировании.

Активация данной функции доступна для определенных элементов дерева из
контекстного меню или сочетанием клавиш <kbd>Ctrl</kbd> + <kbd>A</kbd>.

##### 7.8.1 Автозаполнение параметров #####

Автоматическое заполнение параметров можно запустить из элементов
тех. объектов: `Параметры` или `Операции`. Запуск автозаполнения из данных
узлов запускает полное автозаполнение по всем операциям. Предварительно
необходимо определить порядок операций, привязать необходимые узлы и
настроить дополнительные свойства операций, выбрав в каких операциях
какие узлы используюстя (названия параметров для узлов не заполняются).

Параметры генерируются по следующему шаблону:
- [ 1 - 20 ] - Системные (общие) параметры (генерируются при создании объекта,
  при автозаполнении добавляются только заглушки)
- [ 21 - 30 ] - Параметры 1-й операции:
    + Параметры операции.
    + Параметры узлов операции.
    + Заглушки.
- [ 31 - 40 ] - Параметры 2-й операции.
- [ 41 - 60 ] - Параметры 3-й операции
  (если параметров генерируется больше 10, то группа увеличивается кратно 10).
- ...

Автоматическое заполнение можно запустить отдельно для каждой операции,
доп. свойств операции и отдельно для основного параметра привязаного узла.

### 8 Установка ограничений ###

<p align="justify">Для каждой операции в объекте создана дополнительная группа полей: «Ограничения внутри объекта», «Общие ограничения», «Ограничения на последующие операции» , которые предназначены для настройки ограничений для данной операции.</p>

<p align="center"><img src="images/restrictions.png"></p>

<p align="center"><b>Рисунок</b> - <i>Местонахождение ограничений</i></p>

<p align="justify">Ограничения представляются парами вида {N, M}, где <b>N</b> – номер объекта, в котором проверяем на включенность операцию <b>M</b> Только надо учитывать, что N - глобальный номер объекта, который для пользователя недоступен (<em>осталось от старого редактора</em>). Ограничения проверяются перед включением операции, в которой прописываются пары. «Ограничения внутри объекта» предназначены для описания недоступных операций внутри объекта. К примеру, для операции «Наполнение» можем указать операцию «Сквашивание», нам не нужно проверять «Сквашивание» во всех других объектах. «Общие ограничения» описывают недоступные операции с другими объектами. В поле «Ограничения на последующие операции» указываются операции объекта, которые нельзя включить после текущей. Например, после операции «Выдача» нельзя включить «Наполнение». Редактировать ограничения можно вручную или через окно со списком операций. Его можно вызвать из меню <b>"EasyEplanner" -> "Операции, ограничения, привязка объектов"</b> (<em>смотри пример в главе 1</em>). Если окно для редактирования технологических объектов находится в режиме редактирования, то при переходе на строку с ограничениями у узлов дерева с операциями появятся _CheckBox_ для выбора необходимых ограничений.</p>

<p align="center"><img src="images/selected_restrictions.png"></p>

<p align="center"><b>Рисунок</b> - <i>Редактирование ограничений</i></p>

<p align="justify">После редактирования и закрытия проекта все ограничения экспортируются в отдельный файл <b>main.restrictions.lua</b>, который в дальнейшем записывается в контроллер. Перезагрузка данного файла возможна без перезагрузки программы. Для работы с ограничениями созданы следующие системные параметры:</p>

* __CMD__ - Для перезагрузки файла ограничений в CMD пишем 100, если все ОК, то вернется 0, иначе 1 и строка с описанием ошибки будет в CMD_ANSWER.
* __CMD_ANSWER__ – Строка с описанием ошибки перезагрузки ограничений.
* __P_RESTRICTIONS_MODE__ – Параметр для включения/выключения ограничений - 0 - авто, 1 - ручной, 2 – полуручной (_через время P_RESTRICTIONS_MANUAL_TIME вернется в автоматический режим_).
* __P_RESTRICTIONS_MANUAL_TIME__ - Работа модуля ограничений в ручном режиме заданное время, мс.

### 9 Синхронизация и экспорт

#### 9.1 Синхронизация названий устройств и модулей ####

<p align="justify">Синхронизирует привязанные устройства: поля "Примечание" у устройств. Поле задается на функциональной схеме автоматизации (<em>ФСА</em>) и потом используется при привязке к модулям ввода-вывода. Если после выполнения привязки изменить это поле на ФСА, то там, где это устройство уже привязано, останется старое значение этого поля. Данная функция решает эту проблему. Будет полезно, когда за основу берется уже существующий проект или при изменении назначения устройств и др.</p>

**Примечание**:
1. Во избежание неправильного срабатывания функции синхронизации (_когда проект в EasyEplaner описан не полностью или с ошибками_), пожалуйста, делайте резервирование проекта перед вызовом функции синхронизации.
2. Учтите, что проекты, в которых DEV_VTUG попросту заменен на Y (обозначение пневмоострова) будут обрабатываться с удалением множественной привязки, потому что считается, что переход от старого вида привязки к новому (хоть и устройства привязаны) завершен не полностью. Что бы этого не происходило, необходимо полностью перейти на новый вид привязки пневмоострова Y (_см. раздел 3.2.2_)

<p align="justify">Также, если было удалено какое-либо привязанное устройство, то, запустив синхронизацию, это устройство автоматически будет удалено из всех привязок к модулям ввода-вывода.</p> 

<p align="justify">В зависимости от типа устройства и количества привязанных устройств алгоритм синхронизации будет отличаться.</p> 

* Для одинарных устройств (_когда к одному каналу привязано одно устройство_) будет всегда добавляться текст из поля "_Примечание_", даже если его удалить вручную, то при синхронизации текст автоматически запишется в функциональный текст в привязываемом модуле ввода-вывода.

<p align="justify">Если к модулю ввода-вывода привязано более 1 устройства, то есть на каждый канал устройства в функциональном тексте приходится два и более устройства (<em>это возможно только при привязке клапанов к пневмоострову и AS-i интерфейсу</em>), то в дело вступают другие алгоритмы обработки данных.</p> 

* Для AS-интерфейса комментарии не пишутся и не обновляются, но в AS-интерфейсе учитывается параметр *R_AS_NUMBER*, в зависимости от которого клапана размещаются в функциональном тексте. Для корректного отображения необходимо правильно настроить отображение функционального текста во вкладке "_Отображение_" (_см. конец подпункта_). Так же для модулей AS-интерфейса автоматически в свойство "Доп. поле [20]" записываются порядковые числа от 1 до 62 (_максимальное количество клапанов, которое может быть привязано для AS-i 3.0_) с разделителем, который представляет собой символ новой строки. С помощью этих порядковых номеров создается видимое отображение, которое показывает какой *R_AS_NUMBER* у клапана и какие *R_AS_NUMBER* свободны.

<p align="center"><img src="images/ASISynchronizeBinding.png"></p>

<p align="center"><b>Рисунок</b> - <i>Пример отображения для AS-i</i></p>

* Для пневмоострова обновление происходит более просто. Если к клемме пневмоострова привязано одно устройство, то синхронизация происходит по такому же алгоритму, как и для одинарных устройств, а если к клемме привязано более одного устройства, то возможны два варианта:
    * Если пневмоостров с привязкой находится на многополюсной схеме соединений, то у него будут убраны комментарии;
    * Если пневмоостров с привязкой находится на схеме типа "Обзор", то комментарии будут оставлены.

##### Настройка окна "Отображение" для AS-i модуля

Для того, что бы AS-i отображался нормально (и привязка, и порядковые номера), необходимо провести первоначальную настройку отображения функционального текста. **ВАЖНО** - порядковые номера клапанов записываются в Доп. поле [20] автоматически.

Ниже на рисунках показано, как должно быть настроено.

<p align="center"><img src="images/EplanFunctionalTextASI.png"></p>

<p align="center"><b>Рисунок</b> - <i>Настройка отображения функционального текста</i></p>

<p align="center"><img src="images/EplanUserFieldASI.png"></p>

<p align="center"><b>Рисунок</b> - <i>Настройка отображения Доп. поле [20]</i></p>

<p align="center"><img src="images/EplanFunctionalTextResultASI.png"></p>

<p align="center"><b>Рисунок</b> - <i>Результат настройки</i></p>

То есть, отображение должно быть настроено так, чтобы напротив цифры 1 из Доп. поле [20] было первое значение привязки, а функция синхронизации сама расположит модули в нужном порядке.

Так же, можно использовать альтернативную настройку отображения для Доп. поле [20] (_при условии, что отображение Функционального текста настроено так, как описано выше_).

<p align="center"><img src="images/EplanAlternativeUserFieldASI.png"></p>

<p align="center"><b>Рисунок</b> - <i>Альтернативная настройка отображения Доп. поле [20]</i></p>

При использовании альтернативной настройки расположение цифр в Доп. поле [20] нельзя поменять с помощью свойств _Абсцисса_ и _Ордината_.

#### 9.2 Экспорт XML для EasyServer ####

Позволяет создать базу каналов для EasyServer. При нажатии на данный пункт меню появится окно для настройки экспорта:

<p align="center"><img src="images/channelBaseExportDialog.jpg"></p>

<p align="center"><b>Рисунок</b> - <i>Окно экспорта базы каналов</i></p>

При открытии окна селекторы устанавливаются в стандартные положения (_как на картинке_).

Указывается:
1. Необходимость создавать новый файл базы каналов (первая пара селекторов - "_Да_", "_Нет, использовать существующую_") или же использовать существующую. После выбора в селекторе необходимо нажать кнопку "_Обзор_" и выбрать, куда сохранить базу каналов или выбрать файл базы каналов (_в зависимости от выбранного режима_). Для сохранения новой базы каналов можно использовать стандартный путь (_который задан в строке на картинке_).

2. Необходимость в группировке тегов в один подтип (вторая пара селекторов - "_Да_", "_Нет_"). В зависимости от выбранного режима группировки, объекты будут по-разному сгруппированы в базе каналов.

3. Формат записи базы каналов (третья пара селекторов - "_По индексам_", "_По именам_"). Позволяет выбрать формат записи имен объектов. По индексам - обычный, старый вариант. По именам - новый вариант, когда вместо OBJECT используется поле "Имя объекта Monitor" и номер объекта.

_Примечание:_ для корректного экспорта базы каналов, необходимо, чтобы в редакторе технологических объектов было правильно заполнено поле "Имя объекта Monitor" в объектах. Если эти поля в объектах будут совпадать, то эти объекты будут отключены (закомментированы) в базе каналов. Например, если есть объекты со значением поля TankObj с одинаковыми номерами (TankObj1 и TankObj1, тип не влияет), то база каналов закомментирует эти объекты. Поэтому важно, чтобы поле "Имя объекта Monitor" было уникально для каждого типа объектов. Например, _Танк молока 1_, _Танк воды 1_ можно обозначить, как _TankMilkObj_ и _TankWaterObj_. Надстройка предупреждает пользователя о совпадающих именах в объектах.

Дополнительно база каналов автоматически экспортируется при каждом закрытии проекта (_или закрытие проекта, или завершение Eplan с открытым проектом_). Сохранение осуществляется в папку с проектом Eplan в каталог **chbase**. База каналов будет иметь такое же название, как и имя проекта. В базе каналов теги будут сгруппированы по подтипам, а объекты описаны на основе индексов.

##### 9.2.1 Экспортируемые параметры #####

Если не указан подтип устройства, эти параметры экспортируются для любого типа этого устройства. Первый уровень списка - устройство, второй - подтип, третий - это параметры с комментариями.

1. Устройство - **V**
    * **V_DO1**, **V_DO2**, **V_IOLINK_VTUG_DO1**, **V_IOL_TERMINAL_MIXPROOF_DO3**
        * ST - состояние;
        * M - ручной режим;
    * **V_DO1_DI1_FB_ON**, **V_IOLINK_VTUG_DO1_FB_ON**, **V_DO1_DI1_FB_OFF**, **V_IOLINK_VTUG_DO1_FB_OFF**
        * ST - состояние;
        * M - ручной режим;
        * P_ON_TIME - время включения;
        * P_FB - включение/выключение обратной связи;
        * FB_OFF_ST - текущее состояние обратной связи (на отключенное состояние);
    * **V_DO1_DI2**, **V_DO2_DI2**, **V_DO2_DI2_BISTABLE**, **V_MIXPROOF**, **V_AS_MIXPROOF**, **V_AS_DO1_DI2**, **V_BOTTOM_MIXPROOF**, **V_IOLINK_VTUG_DO1_DI2**, **V_MINI_FLUSHING**
        * ST - состояние;
        * M - ручной режим;
        * P_ON_TIME - время включения;
        * P_FB - включение/выключение обратной связи;
        * FB_OFF_ST - текущее состояние обратной связи (на отключенное состояние);
        * FB_ON_ST - текущее состояние обратной связи (на включенное состояние);
    * **V_IOLINK_MIXPROOF**, **V_IOLINK_DO1_DI2**
        * ST - состояние;
        * M - ручной режим;
        * P_ON_TIME - время включения;
        * P_FB - включение/выключение обратной связи;
        * V - аналоговое значение;
        * BLINK - индикация местонахождения устройства (по умолчанию мигает фиолетовым цветом);
        * CS - сигнал управления;
        * ERR - ошибка;
    * **V_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
2. Устройство - **VC**
    * **VC**, **VC_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
    * **VC_EY**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
    * **VC_IOLINK**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * BLINK - индикация местонахождения устройства (быстро мигающие светодиоды);
        * NAMUR_ST - состояние по стандарту NAMUR;
        * OPENED - открыт;
        * CLOSED - закрыт;
3. Устройство - **M**
    * **M**
        * ST - состояние;
        * M - ручной режим;
        * P_ON_TIME - время включения;
    * **M_FREQ**
        * ST - состояние;
        * M - ручной режим;
        * P_ON_TIME - время включения;
        * V - аналоговое значение;
    * **M_REV**, **M_REV_FREQ**, **M_REV_2**, **M_REV_FREQ_2**, **M_REV_2_ERROR**
        * ST - состояние;
        * M - ручной режим;
        * P_ON_TIME - время включения;
        * V - аналоговое значение;
        * R - реверс;
    * **M_ATV**
        * ST - состояние;
        * M - ручной режим;
        * P_ON_TIME - время включения;
        * V - аналоговое значение;
        * R - реверс;
        * EST - расширенное состояние;
        * RPM - обороты в минуту;
        * FRQ - частота;
    * **M_ATV_LINEAR**
        * ST - состояние;
        * M - ручной режим;
        * P_ON_TIME - время включения;
        * V - аналоговое значение;
        * R - реверс;
        * EST - расширенное состояние;
        * RPM - обороты в минуту;
        * FRQ - частота;
        * P_SHAFT_DIAMETER - диаметр вала, м.;
        * P_TRANSFER_RATIO - передаточное число;
    * **M_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
4. Устройство - **LS**
    * **LS_MIN**, **LS_MAX**, **LS_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * P_DT - дельта;
    * **LS_IOLINK_MAX**, **LS_IOLINK_MIN**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * P_DT - дельта;
5. Устройство - **FS**
    * **FS**
        * ST - состояние;
        * M - ручной режим;
        * P_DT - дельта;
    * **FS_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
6. Устройство - **GS**
    * **GS**, **GS_INVERSE**
        * ST - состояние;
        * M - ручной режим;
        * P_DT - дельта;
    * **GS_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
7. Устройство - **TE**
    * **TE**, **TE_IOLINK**
        * ST - состояние;
        * M - ручной режим;
        * P_CZ - сдвиг нуля;
        * V - аналоговое значение;
    * **TE_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
    * **TE_ANALOG**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * P_ERR - значение ошибки (значение во время ошибки датчика);
        * P_MIN_V - минимальное значение;
        * P_MAX_V - максимальное значение;
        * P_CZ - сдвиг нуля;
8. Устройство - **LT**
    * **LT**
        * M - ручной режим;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
        * P_ERR - значение ошибки (значение во время ошибки датчика);
    * **LT_CYL**
        * M - ручной режим;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
        * P_MAX_P - максимальное давление;
        * P_R - радиус танка;
        * CLEVEL - пересчитанный уровень;
    * **LT_CONE**, **LT_IOLINK**
        * M - ручной режим;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
        * P_MAX_P - максимальное давление;
        * P_R - радиус танка;
        * CLEVEL - пересчитанный уровень;
        * P_H_CONE - высота конусной части танка;
    * **LT_TRUNC**
        * M - ручной режим;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
        * P_MAX_P - максимальное давление;
        * P_R - радиус танка;
        * CLEVEL - пересчитанный уровень;
        * P_H_TRUNC - высота усеченной части танка (нигде и никогда не использовалось);
    * **LT_VIRT**
        * M - ручной режим;
        * V - аналоговое значение;
9. Устройство - **HA**
    * **HA**, **HA_VIRT**
        * ST - состояние;
        * M - ручной режим;
10. Устройство - **HL**
    * **HL**, **HL_VIRT**
        * ST - состояние;
        * M - ручной режим;
11. Устройство - **SB**
    * **SB**
        * ST - состояние;
        * M - ручной режим;
        * P_DT - дельта;
    * **SB_VIRT**
        * ST - состояние;
        * M - ручной режим;
12. Устройство - **DI**
    * **DI**
        * ST - состояние;
        * M - ручной режим;
        * P_DT - дельта;
    * **DI_VIRT**
        * ST - состояние;
        * M - ручной режим;
13. Устройство - **DO**
    * **DO**, **DO_VIRT**
        * ST - состояние;
        * M - ручной режим;
14. Устройство - **AI**
    * **AI**
        * ST - состояние;
        * M - ручной режим;
        * P_MIN_V - минимальное значение;
        * P_MAX_V - максимальное значение;
        * V - аналоговое значение;
    * **AI_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
15. Устройство - **AO**
    * **AO**
        * M - ручной режим;
        * V - аналоговое значение;
        * P_MIN_V - минимальное значение;
        * P_MAX_V - максимальное значение;
    * **AO_VIRT**
        * M - ручной режим;
        * V - аналоговое значение;
    * **AO_EY**
        * M - ручной режим;
        * V - аналоговое значение;
        * P_MIN_V - минимальное значение;
        * P_MAX_V - максимальное значение;
16. Устройство - **PT**
    * **PT**
        * ST - состояние;
        * M - ручной режим;
        * P_MIN_V - минимальное значение;
        * P_MAX_V - максимальное значение;
        * P_CZ - сдвиг нуля;
        * V - аналоговое значение;
    * **PT_IOLINK**
        * ST - состояние;
        * M - ручной режим;
        * P_MIN_V - минимальное значение;
        * P_MAX_V - максимальное значение;
        * V - аналоговое значение;
    * **PT_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение значение;
17. Устройство - **FQT**
    * **FQT**
        * ST - состояние;
        * M - ручной режим;
        * V - относительное (пользовательское) значение;
        * ABS_V - абсолютное значение;
        * DAY_T1 - сегодня, счетчик 1;
        * PREV_DAY_T1 - вчера, счетчик 1;
        * DAY_T2 - сегодня, счетчик 2;
        * PREV_DAY_T2 - вчера, счетчик 2;
    * **FQT_F**, **FQT_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - относительное (пользовательское) значение;
        * ABS_V - абсолютное значение;
        * P_MIN_FLOW - минимальное значение потока;
        * P_MAX_FLOW - максимальное значение потока;
        * P_CZ - сдвиг нуля;
        * F - расход;
        * P_DT - дельта;
        * P_ERR_MIN_FLOW - параметр для обработки ошибки счета импульсов;
        * DAY_T1 - сегодня, счетчик 1;
        * PREV_DAY_T1 - вчера, счетчик 1;
        * DAY_T2 - сегодня, счетчик 2;
        * PREV_DAY_T2 - вчера, счетчик 2;
    * **FQT_IOLINK**
        * ST - состояние;
        * M - ручной режим;
        * V - относительное (пользовательское) значение;
        * ABS_V - абсолютное значение;
        * T - температура;
        * P_ERR_MIN_FLOW - параметр для обработки ошибки счета импульсов;
        * DAY_T1 - сегодня, счетчик 1;
        * PREV_DAY_T1 - вчера, счетчик 1;
        * DAY_T2 - сегодня, счетчик 2;
        * PREV_DAY_T2 - вчера, счетчик 2;
18. Устройство - **QT**
    * **QT**
        * ST - состояние;
        * M - ручной режим;
        * P_MIN_V - минимальное значение;
        * P_MAX_V - максимальное значение;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
    * **QT_OK**
        * ST - состояние;
        * M - ручной режим;
        * P_MIN_V - минимальное значение;
        * P_MAX_V - максимальное значение;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
        * OK - проверка концентратомера
    * **QT_IOLINK**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
        * T - температура;
    * **QT_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение значение;
19. Устройство - **WT**
    * **WT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * P_NOMINAL_W - номинальная нагрузка;
        * P_DT - дельта;
        * P_RKP - рабочий коэффициент передачи;
        * P_CZ - сдвиг нуля;
    * **WT_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение значение;
    * **WT_RS232**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
    * **WT_ETH**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * P_CZ - сдвиг нуля;
    * **WT_PXC_AXL**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * P_DT - время порогового фильтра;
        * P_CZ - сдвиг нуля;
        * P_K - коэффициент пропорциональности;

20. Устройство - **F**
    * **F**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * NOMINAL_CURRENT_CH - Заданный ток канала (_4 канала_);
        * LOAD_CURRENT_CH - Текущий ток канала (_4 канала_);
        * ST_CH - Состояние канала (_4 канала_);
        * ERR - Авария устройства;
        * ERR_CH - Авария канала (_4 канала_);
    * **F_VIRT**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;

21. Устройство - **ПИД-регулятор** вариации комбинаций с регулированием C (_TC, FC и др._)
    * ST - состояние;
    * M - ручной режим;
    * V - аналоговое значение;
    * Z - задание.
22. Устройство - **HLA**
    * **HLA**
        * ST - состояние;
        * M - ручной режим;
        * L_RED - состояние красной лампочки;
        * L_YELLOW - состояние желтой лампочки;
        * L_GREEN - состояние зелёной лампочки;
        * L_SIREN - состояние сирены;
    * **HLA_VIRT**, **HLA_IOLINK**
        * ST - состояние;
        * M - ручной режим;
        * L_BLUE - состояние голубой лампочки;
        * L_RED - состояние красной лампочки;
        * L_YELLOW - состояние желтой лампочки;
        * L_GREEN - состояние зелёной лампочки;
        * L_SIREN - состояние сирены;
23. Устройство - **CAM**
    * **CAM_DO1_DI1**
        * ST - состояние;
        * M - ручной режим;
        * RESULT - результат обработки;
    * **CAM_DO1_DI2** и **CAM_DO1_DI3**
        * ST - состояние;
        * M - ручной режим;
        * RESULT - результат обработки;
        * READY - готовность;
        * P_READY_TIME - предельное время отсутствия готовности к работе, сек.
24. Устройство - **PDS**
    * **PDS**
        * ST - состояние;
        * M - ручной режим;
        * P_DT - дельта;
    * **PDS_VIRT**
        * ST - состояние;
        * M - ручной режим;
25. Устройство - **TS**
    * **TS**
        * ST - состояние;
        * M - ручной режим;
        * P_DT - дельта;
    * **TS_VIRT**
        * ST - состояние;
        * M - ручной режим;
26. Устройство - **G**
    * **G_IOL_4**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * NOMINAL_CURRENT_CH - Заданный ток канала (_4 канала_);
        * LOAD_CURRENT_CH - Текущий ток канала (_4 канала_);
        * ST_CH - Состояние канала (_4 канала_);
        * ERR - Авария устройства;
        * SUM_CURRENTS - Суммарный ток;
        * VOLTAGE - Напряжение;
        * OUT_POWER_90 - Превышение 90% нагрузки;
    * **G_IOL_8**
        * ST - состояние;
        * M - ручной режим;
        * V - аналоговое значение;
        * NOMINAL_CURRENT_CH - Заданный ток канала (_8 каналов_);
        * LOAD_CURRENT_CH - Текущий ток канала (_8 каналов_);
        * ST_CH - Состояние канала (_8 каналов_);
        * ERR - Авария устройства;
        * SUM_CURRENTS - Суммарный ток;
        * VOLTAGE - Напряжение;
        * OUT_POWER_90 - Превышение 90% нагрузки;
27. Устройство - **WATCHDOG**
    * **WATCHDOG**
        * ST - состояние;
        * M - ручной режим;
        * P_T_GEN - Интервал генерации выходных импульсов;
        * P_T_ERR - Интервал ожидания изменения входа;
28. Устройство - **EY**
    * **DEV_CONV_AO2**
        * ST - состояние;
        * V - Аналоговое значение;
        * CH - Значение канала (_2 канала_);

Протоколируются: TE_V, QT_V, FQT_F, PT_V, VC_V, M_V, M_ST, LT_CLEVEL, V_ST, LS_ST, FS_ST, GS_ST,
SB_ST, DI_ST, DO_ST, SB_ST, HL_ST, HA_ST, AO_V, AI_V.

Устанавливается период: TE_V, QT_V, LT_V, PT_V, AO_V, AI_V, FQT_F, M_V, VC_V, LT_CLEVEL, V_V.

__Примечание:__
ПИД-регуляторы экспортируются исходя из базового объекта (_если выбран базовый объект ПИД, то будет экспортирован дополнительно ПИД-регулятор, с номером объекта_).

#### 9.3 Экспорт технологических устройств в Excel ####

Экспорт, выполняемый этим пунктом меню, создает Excel-файл, в котором содержится различная информация, а именно:
+ Описание модулей ввода-вывода (_привязка, цветовое обозначение_, номера клемм);
+ Перечисление всех технологических устройств с типами и подтипами, а так же с параметрами при их наличии;
+ Сводная таблица всех устройств (_сколько и каких устройств установлено_);
+ Подключение устройств (_текстовое описание, как в окне "Устройства, параметры объектов"_);
+ Параметры объектов (_из редактора технологических объектов_);
+ Описание операций и устройств (_из редактора технологических объектов_).

##### 9.3.1 Экспорт информации для SCADA из проекта #####

Также, надстройка при закрытии проекта (_или Eplan при открытом проекте_), генерирует новый файл Excel в папке _DOC_ с названием _"<Название проекта> auto report"_. Этот файл предназначен для инженеров, которые разрабатывают проекты в SCADA системе. Данные, находящиеся в этом файле, покрывают их потребность в использовании Eplan. Таким образом, это позволяет меньше использовать плавающие лицензии Eplan, если их недостаточное количество.

### 10 Объектная модель по ISA (S88, S95)

#### 10.1 Объектная модель рецептурного производства ####

![Объектная модель](images/s88_objects.svg)

<p align="center"><b>Рисунок</b> - <i>Объектная модель без модулей управления</i></p>

<p align="center"><img src="images/control_modules_s88.svg" width=60%></p>

<p align="center"><b>Рисунок</b> - <i>Объектная модель модулей управления</i></p>

### 11 Система помощи OSTIS

Это открытый [проект](https://github.com/savushkin-r-d/s88-ostis) базы знаний (сам проект OSTIS находится [тут](https://github.com/ostis-dev)). Он содержит в себе информацию об объектной модели ISA-88, которая используется при разработке проектов с помощью надстройки EasyEplanner.

Для использования этой базы знаний необходимо выделить объект в дереве и нажать кнопку <b>F1</b>. Надстройка сгенерирует ссылку и откроет её в браузере по умолчанию. Если описания данного объекта нет, то ссылка будет открыта с главными описанием стандарта ISA-88.

_Примечание_: если дерево объектов не выделено, то будет открываться стандартное окно справки Eplan. В случае, если дерево будет выделено и не будет выделен никакой элемент, надстройка уведомит об этом пользователя и никакой ссылки открыто не будет.

База знаний поддерживает следующие языки: русский, английский, немецкий, украинский. Наполненность данными в каждом языке может отличаться.

Настройки:
1. Для того, чтобы изменить адрес главной страницы, которая будет открываться, если не найдено описание объекта, нужно открыть файл конфигурации <code>configuration.ini</code>, найти секцию <code>helpSystem</code> и в ключе <code>mainAddress</code> нужно указать адрес, который будет открываться.
2. Для изменения адреса базы знаний ostis (_основной ссылки_), нужно открыть файл конфигурации <code>configuration.ini</code>, найти секцию <code>helpSystem</code> и в ключе <code>address</code> нужно указать адрес, который будет использоваться для генерации ссылок.

_Примечание_: адрес базы знаний (_основной_) используется для дополнения его дополнительными данными в адресной строке и открытию ссылки по новой получившейся ссылке.

### 12 Межпроектный обмен сигналами ###

Данный функционал позволяет настроить обмен сигналами между проектами с помощью удобного графического интерфейса. Модуль автоматически генерирует необходимые файлы сразу во всех проектах, с которыми он взаимодействиями. Полное описание работы с модулем расположено [здесь](InterprojectExchange.md).

### 13 Настройка и программирование описания базовых объектов ###

Базовые объекты не хранятся внутри надстройки, а подгружаются из файлов с их описанием. Надстройка может иметь более **1** файла описания с базовыми объектами. Файлы с описанием хранятся по следующему пути: "**Lua\BaseObjectsDescriptionFiles**". В эту папку нужно загружать **.lua** файлы с описанием базовых объектов. При отсутствии файлов описания в папке с описанием (_или самой папки_), будет создан файл пустого шаблона (_шаблон описан ниже_). Необходимо заполнить базовые объекты по шаблону (заполняя только то, что конкретно нужно Вам), можно в том же файле или в своем собственном. Заполненный файл нужно добавить в директорию, описанную выше.

В Функции **get_main_packages()** записывается список модулей, которые будут добавляться в файле **main.plua** при генерации шаблона.


Файлы описания должны описываться по следующему шаблону:
```LUA
-- Шаблон файла, описывающего базовую функциональность.
-- В этом файле описан один пустой базовый объект, для примера.

-- Базовый объект (название таблицы - eplanName т.е LUA-имя объекта, пишется в любых регистрах):
-- 1. s88Level - уровень объекта по ISA-88 (1 - для юнитов, аппаратов. 2 - для агрегатов).
-- 2. name - русскоязычное название объекта.
-- 3. baseOperations - описание базовых операций объекта.
-- 4. basicName - англоязычное имя объекта, которое фигурирует в функциональности (add_functionality).
-- Это имя должно содержать имя без приписки "basic_"
-- 5. equipment - оборудование базового объекта.
-- 6. aggregateParameters - параметры объекта, который является агрегатом (которые будут добавлены
-- в аппарат, при привязке агрегата к аппарату).
-- 7. bindingName - имя агрегата, используемое при привязке его к аппарату (для аппаратов не обязательно).
-- 8. isPID - является ли объект ПИД-регулятором.
-- 9. objectGroups - группы объектов (танки, линии и др).
-- 10. system_params - системные параметры объекта.
-- 11. parameters - указываются параметры объекта. Можно указать в виде ссылки на другую переменную,
-- которая представляет параметр, или же описать самому в виде lua-таблицы. При описании в виде
-- ссылки на переменную, параметры будут идти по порядку (по индексам), а если описывать через
-- Lua-таблицы, то по ключу Lua-таблицы. Предпочтительный первый вариант, он описан ниже по файлу,
-- а именно, там где определена переменная object_parameters.
-- 12. luaModuleName - имя модуля Lua, в котором описана логика работы базового объекта. Обычно описана
-- в скриптах, которые идут в поставке вместе с этим файлом. На основании этого имени в prg.lua
-- будет генерироваться заголовок подключаемого модуля - require( "luaModuleName").
-- Пустое или отсутствующее значение - модуль не будет подключен.
-- 13. monitorName - имя объекта Monitor, которое будет задаваться при автоматической настройке объекта
-- при его добавлении в дерево. Если не задано - будет задаваться стандартное значение - TankObj.
-- 14. baseProperties - базовые (дополнительные) свойства объекта. Добавляются также, как и параметры
-- базовой операции. За исключением того, что доступны только bool и active параметры.
-- 15. deprecated - устарел объект или нет. Если устарел - не будет показан в списке базовых объектов,
-- но его можно использовать в уже существующих проектах, где такие объекты используются. Для этого
-- надо добавлять его через Insert в группе объектов.

-- Базовые операции (baseOperations) (название таблицы - это Lua-имя операции, пишется в верхнем регистре):
-- 1. name - русскоязычное название операции.
-- 2. params - параметры операции, могут быть активными, булевыми.
-- 3. state - состояние базовой операции, в котором находятся шаги.
-- 4. defaultPosition - позиция операции при автоматической настройке, когда осуществляется вставка
-- объекта. Если поле отсутствует - операция не будет настраиваться автоматически.
-- Значения этого поля должны быть от 1 и не пересекаться (опционально).

-- Базовое состояние (state) - название таблицы, это LUA-имя состояния. Пока что это весь функционал
-- состояния. Внутри состояния указываются базовые шаги (steps).
-- Существующие состояния: IDLE (Простой), RUN (Выполнение), PAUSE (Пауза), STOP (Остановка), STARTING (Запускается), PAUSING (Становится в паузу), UNPAUSING (Выходит из паузы), STOPPING (Останавливается).

-- Базовые шаги - шаг базовой операции (steps). Название таблицы - LUA-имя базового шага, в верхнем регистре.
-- Внутри таблицы указываются следующие поля:
-- 1. name = строковое обозначение имени шага.
-- 2. defaultPosition - по аналогии с defaultPosition в базовой операции, только относится
-- к базовому шагу (опционально).

-- Активные параметры (active) - параметры, которые отображаются и сохраняются, имеют общую обработку,
-- которая характерна для всех таких параметров (название таблицы - это Lua-имя параметра,
-- пишется в верхнем регистре):
-- 1. name - русскоязычное имя параметра.
-- 2. defaultValue - значение по-умолчанию (опционально).
-- 3. displayObjects - список параметров, указывающий, что будет отображаться в окне
-- графической настройки параметра (окно "Устройства"), при настройке параметра.
-- Таблица displayObjects может отсутствовать.
-- Допустимые свойства: signals - будут добавлены сигналы AO, AI, DO, DI;
-- parameters - будут добавлены все параметры объекта.
-- Пример: displayObjects = { "signals", "parameters" } - будут добавлены сигналы и параметры.

-- Булевые параметры (bool) - аналог активных параметров, только имеют два значения - да или нет
-- (название таблицы - это Lua-имя параметра, пишется в верхнем регистре):
-- 1. name - русскоязычное имя параметра.
-- 2. defaultValue - значение по-умолчанию.

-- Главный параметр агрегата (main) - аналог булевого параметра. Является главным управляющим
-- параметром агрегата (управляет доступностью параметров). Имеет только два значения - да или нет
-- (название таблицы - это Lua-имя параметра, пишется в верхнем регистре):
-- 1. name - русскоязычное имя параметра.
-- 2. defaultValue - значение по-умолчанию.

-- Параметр оборудования (equipment) - параметр для оборудования. Обработка схожая с действиями
-- в шагах операции. Этот тип параметра создается, когда заполняется equipment в объекте.
-- Создается таблице equipment. Имеет общую обработку,которая характерна для
-- всех таких параметров (название таблицы - это Lua-имя параметра,
-- пишется в верхнем регистре):
-- 1. name - русскоязычное имя параметра.
-- 2. defaultValue - значение по-умолчанию (опционально).

-- Группы объектов (objectGroups) - группы объектов (в основном для линий). Внутри этой переменной
-- указываются группы объектов, которые нужны в объекте.
-- Название таблицы - Lua-имя группы, пишется в любом регистре:
-- 1. name - русскоязычное название группы.
-- 2. allowedObjects - указывается один из доступных типов объекта в виде строки (units, aggregates, all).
-- Стандартное значение - aggregates, оно будет использоваться, если не указать это поле.

-- Оборудование - параметр оборудования.
-- Параметры объекта, как агрегата - по аналогии с активными и булевскими параметрами и
-- главным параметром агрегата, он является обязательным для агрегата. main-параметр задается только один!

-- Системные параметры объекта (systemParams) - системные параметры объекта, которые используются
-- в контроллере. Доступны только для чтения, можно менять только значение.
-- Индекс таблицы - указывает его номер в списке параметров.
-- 1. name - русскоязычное название параметра
-- 2. meter - единица измерения параметра
-- 3. defaultValue - стандартное значение параметра
-- 4. nameLua - LUA-имя параметра

base_tech_objects = function()
return
    {
        uniqueEplanName = { -- Уникальное Lua-имя объекта
            name = "",
            s88Level = 0,
            baseOperations =
            {
                uniqueOperationLuaName = { -- Уникальное Lua-имя операции
                    name = "",
                    params =
                    {
                        active = -- Активные параметры
                        {
                            uniqueLuaName = { name = "Имя", defaultValue = "Значение по-умолчанию" },
                        },
                        bool = -- Булевые активные параметры
                        {
                            uniqueLuaName = { name = "Имя", defaultValue = "Значение по-умолчанию" },
                        },
                    },
                    state = -- Состояние
                    {
                        RUN =
                        {
                            steps = -- Шаги
                            {
                                uniqueLuaName = { name = "Имя" }
                            },
                       },
                    },
                },
            },
            basicName = "",
            equipment = -- Оборудование
            {
                uniqueLuaName = { name = "Имя", defaultValue = "Значение по-умолчанию" },
            },
            aggregateParameters = -- Параметры агрегата
            {
                uniqueLuaName = { name = "Имя", defaultValue = "Значение по-умолчанию" },
            },
            bindingName = "Lua-имя для привязки",
            system_params =
            {
                 [ 1 ] =
                     {
                         name = "Название параметра",
                         meter = "ед.изм",
                         defaultValue = 20,
                         nameLua = "parLuaName",
                     },
            },
            parameters = { object_parameters.ParLuaName1, },
            luaModuleName = "name",
            monitorName = "TankObj",
            baseProperties =
            {
                active = -- Активные параметры
                        {
                            uniqueLuaName = { name = "Имя", defaultValue = "Значение по-умолчанию", displayObjects = { "signals" }, },
                        },
                        bool = -- Булевые активные параметры
                        {
                            uniqueLuaName = { name = "Имя", defaultValue = "Значение по-умолчанию" },
                        },
            },
        },
    }
end

-- Здесь содержится общий пул параметров, для базовых объектов. Параметры
-- настраиваются следующим образом:
-- 1. luaName - указывается строковое Lua-имя параметра. Это Lua-имя дублируется
-- в названии переменной (таблицы) параметра.
-- 2. name - указывается строковое отображаемое название.
-- 3. value - указывается начальное значение параметра.
-- (целое число или число с плавающей запятой).
-- 4. meter - указывается единица измерения в виде строки.
object_parameters =
{
    ParLuaName1 = {
        luaName = "ParLuaName1",
        name = "Название параметра",
        value = 20,
        meter = "сек",
    },
}

-- Здесь содержится список путей к модулям, добавляемым в шаблон управляющей программы "main.plua"
get_main_packages = function()
    return 
    {
        ";./dairy-sys/?.lua",
    }
end
```

### 14 Автоматическая генерация описания для IOL-Conf ###

Для **IO-Link** модулей ввода-вывода **Phoenix Contact** и **IO-Link** устройств можно сгенерировать автоматическое описание, которое может быть загружено через **IOL-Conf** в модуль ввода-вывода, тем самым получим автоматическую настройку на основе описания **EPLAN**.

**Примечание**: **IODD** файлы должны быть загружены в **IOL-Conf** для автоматической настройки адресов ввода-вывода на клеммах модуля ввода-вывода.

В надстройке есть каталог **IOL-Conf**, внутри него каталоги **Devices** и **Modules**.

**Modules** - служит для хранения шаблонов описания модулей ввода-вывода **IO-Link** в **.lrp** формате. Название файла шаблона должно совпадать с названием изделия в EPLAN.  
**Devices** - аналогично каталогу **Modules**, только для **IO-Link** устройств.

Механизм генерации пропускает модуль или устройство в очереди на генерацию описания, если не найден шаблон. Если не найден шаблон устройства, пропустит устройство, а если не найден шаблон модуля, то пропустит весь модуль в т.ч. и устройства расположенные на нем.

Готовые конфигурации будут сохранены в каталоге **IOL-Conf** в папке с файлами проекта, файлы конфигурации разделены по модулям и имеют имя, как на схемах ФСА (_A100, A200, и т.д._) в формате **.lrp**.

#### 14.1 Генерация шаблонов устройств и модуля ввода-вывода ####

Для того, чтобы получить шаблон для модуля ввода-вывода, нужно подключиться к модулю через **IOL-Conf**, выбрать его и сохранить конфиг.

<p align="center"><img src="images/loadSaveConfigs.png"></p>

Нужно обязательно выбрать только что-то одно (_модуль или устройство_)

<p align="center"><img src="images/choosingModuleOrDevice.png" width=60%></p>

И нажать кнопку сохранить. После этого, ввести название изделия и сохранить.

**Примечание**: корректное сохранение модуля ввода-вывода возможно, если в нем не определены устройства (_порты пусты_).

<p align="center"><img src="images/emptyPortsExample.png"></p>

#### 14.2 Настройка параметров устройств ####

Функционал поддерживает настройку параметров устройства по его изделию. Для этого нужно знать имя параметра, которое нужно настроить, и значение, которое нужно указать. Имя параметра можно посмотреть в шаблоне устройства, в атрибуте **Id**.

Указываются параметры в **Доп. поле[7]** устройства.

<p align="center"><img src="images/iolconfDeviceParameters.png"></p>

Параметры записываются в виде: `<Название параметра>=<Значение>`, разделителем параметров является **запятая**. Разделитель целой части чисел - **точка**.

**ВАЖНО**: Если изменяемый параметр в шаблоне имеет **InternalValue** и **Value** равные **0**, то параметр не может быть установлен. Эта проблема решается установкой значения отличного от нуля. Это происходит из-за расчета градиента (_коэффициента_), на основе которого работает IOL-Conf. Пользователь указывает лишь **Value**, а **InternalValue** уже рассчитывается на основе строк шаблона по пропорции.

#### 14.3 Возможные сообщения окна логов, и пути их решения ####

**E** - exception/ошибка.
**S** - solution/exception

**E**: Шаблон <*путь к шаблону*> с ошибкой.  
**S**: Что-то не так с шаблоном, который предоставил **IOL-Conf**. Шаблон нужно повторно выгрузить (*при условии, что его не правили вручную*). Обычно, это значит, что изменилась схема **XML** и нужно менять её в EasyEplanner.

**E**: В устройстве <имя устройства в EPLAN> задано свойство <имя свойства>, его не существует в шаблоне устройства <изделие устройства>.  
**S**: Было задан параметр, которого в шаблоне нет. Либо изменился шаблон, либо пользователь ошибся при вводе имени параметра. Проверьте шаблоны, возможно неправильно связан с изделием, либо он изменился и такого свойства в нем больше нет.

**E**: Шаблон <*путь к шаблону*> уже существует.  
**S**: Такой шаблон уже был прочитан и добавлен в список шаблонов. Проверьте папки **Devices** и **Modules**, где-то совпадают имена файлов шаблонов.

**E**: Параметр клеммы <*название параметра*> модуля <*имя модуля ввода-вывода прим., А100*> <*изделие модуля*> не найден.  
**S**: Имя параметров портов (*в шаблоне они в атрибуте **Id***) сейчас зашито в код т.к оно везде одинаковое, а именно "**V_PortConfig_ХХ**", где **ХХ** - номер, двузначный (*01, 02, 03, и т.д*). Нужно проверять шаблон, поменялся ли он. Если да (*более 2-х типов названий*), то надо поправить EasyEplanner. Конфигуратор не может настроить режимы работы клемм на модуле ввода-вывода.

**E**: В шаблоне изделия <**имя изделия**>, параметр <**параметр изделия из шаблона**> содержит **Value** или **InternalValue** равное **0**. Деление на **0**. Установите другие значения в шаблоне.  
**S**: Это происходит, когда стандартное значение **InternalValue** и **Value** равняется **0**. Я не могу посчитать множитель градиента (*на который мы умножаем **Value**, чтобы получить **InternalValue***). Поэтому, нужно в шаблоне изменить этот параметр (*через IOL-Conf*) на допустимые значения. После этого, все будет считаться как нужно. Если параметр не изменяется, но имеет **Value** и **InternalValue** равное **0**, то это допустимо.

**E**: Невозможно проверить существование папок с шаблонами IOL-Conf.  
**S**: Эта ошибка не должна вообще появляться. Она появляется если EasyEplanner не может найти путь к dll. Такое возможно при условии, что кто-то испортил исходный код и не протестировал изменения. Вероятность ошибка 1%.

**E**: Невозможно найти генерируемые файлы проекта.  
**S**: Файлы проекта не найдены. Возможно такое, когда кто-то правил код и не проверил изменения. Также, такое возможно, если в файле configuration.ini не указывать вообще никакой путь к файлам проекта, но тогда описание становится неправильным. У нас по умолчанию уже какие-то пути да заданы. Вероятность ошибки 1%.

**E**: Каталоги не созданы, сначала создайте каталоги.  
**S**: Только достигается из кода. Кто-то изменил последовательность методов и передал неверные данные. Вероятность и причины появления такие же, как и в предыдущих двух ошибках.

**E**: Отсутствуют описания устройств.  
**S**: В папке **Devices** нет ни одного шаблона, который мог бы быть считан. Будет показана эта ошибка, но описание модулей будет сгенерировано.

**E**: Отсутствуют описания модулей ввода-вывода.  
**S**: В папке **Modules** нет ни одного шаблона, который мог бы быть считан. Генерация работать не будет.

**E**: Шаблоны не загружены, загрузите шаблоны.  
**S**: Кто-то в коде пропустил этап загрузки шаблонов или сломал их. Вероятность ошибки 1%. Происходит по вине программиста.
овы](#21-Апісанне-надбудовы)
+ [Падключэнне да Eplan](#22-Падключэнне-да-Eplan)
+ [Апісанне аўтаматычна генераваных Lua-файлаў](#23-Апісанне-аўтаматычна-генераваных-Lua-файлаў)
+ [Настройка каталога праектаў](#24-Настройка-каталога-праектаў)
+ [Версія надбудовы](#25-Версія-надбудовы)
+ [Статыстыка](#26-Статыстыка)
    + [Ацэначная складанасць праекта](#261-Ацэначная-складанасць-праекта)
    + [Модуль прастою надбудовы](#262-Модуль-прастою-надбудовы)

#### Настройкі праекта
+ [Настройка дыяпазону IP-адрасоў праекта](#31-Настройка-дыяпазону-IP-адрасоў-праекта)
+ [Настройка тэсціравання праекта](#32-Настройка-тэсціравання-праекта)
+ [Імпартаванне старых праектаў](#33-Імпартаванне-старых-праектаў)
    + [Апісанне старога праекта](#331-Апісанне-старога-праекта)
    + [Настройка правільнай працы імпарту прылад](#332-Настройка-правільнай-працы-імпарту-прылад)
    + [Перайменаванне старых прылад](#333-Перайменаванне-старых-прылад)
    + [Імпарт апісання старога праекта на ФСА](#334-Імпарт-апісання-старога-праекта-на-ФСА)
    + [Дакумент адпаведнасці назваў прылад](#335-Дакумент-адпаведнасці-назваў-прылад)

#### Абсталяванне IO
+ [Настройка вузлоў і модуляў уводу-вываду](#41-Настройка-вузлоў-і-модуляў-уводу-вываду)
+ [Прывязка прылад да модуляў IO](#42-Прывязка-прылад-да-модуляў-IO)
    + [Прывязка пнеўмавострава Festo (VTUG)](#421-Прывязка-пнеўмавострава-Festo-VTUG)
    + [Правілы напісання каментароў да прывязкі](#422-Правілы-напісання-каментароў-да-прывязкі)
+ [Падтрымліваемыя модулі ўводу-вываду](#43-Падтрымліваемыя-модулі-ўводу-вываду)

#### Аперацыі Eplan
+ [Аб'екты тэхналагічнай схемы](#5-Аб'екты-тэхналагічнай-схемы)
    + [Аперацыі аб'ектаў](#51-Аперацыі-аб'ектаў)
    + [Схемы](#52-Схемы)

#### Структура ПЛК [<sup>[StructPLC.md]</sup>](StructPLC.md)

#### Прылады тэхналагічнай схемы
+ [Нумарацыя прылад](#61-Нумарацыя-прылад)
    + [Тэхналагічны аб'ект](#611-Тэхналагічны-аб'ект)
    + [Карыстальніцкі аб'ект](#612-Карыстальніцкі-аб'ект)
    + [Прылада](#613-Прылада)
+ [Пералік прылад](#62-Пералік-прылад)
    + [HA. Аварыйная гукавая сігналізацыя. Сірэна](#621-HA-Аварыйная-гукавая-сігналізацыя-Сірэна)
    + [FQT. Лічыльнік](#622-FQT-Лічыльнік)
    + [HL. Светлавая сігналізацыя](#623-HL-Светлавая-сігналізацыя)
    + [LT. Бягучы ўзровень](#624-LT-Бягучы-ўзровень)
    + [GS. Датчык становішча](#625-GS-Датчык-становішча)
    + [M. Матор (электрарухавік)](#626-M-Матор-электрарухавік)
    + [FS. Датчык наяўнасці патоку](#627-FS-Датчык-наяўнасці-патоку)
    + [LS. Гранічны ўзровень](#628-LS-Гранічны-ўзровень)
    + [QT. Датчык праводнасці](#629-QT-Датчык-праводнасці)
    + [TE. Тэмпература](#6210-TE-Тэмпература)
    + [SB. Кнопка](#6211-SB-Кнопка)
    + [V. Клапан](#6212-V-Клапан)
    + [VC. Кіраваны клапан](#6213-VC-Кіраваны-клапан)
    + [DO. Кіраўнік (выхадны) сігнал](#6214-DO-Кіраўнік-выхадны-сігнал)
    + [DI. Уваходны сігнал](#6215-DI-Уваходны-сігнал)
    + [AO. Выходная велічыня](#6216-AO-Выходная-велічыня)
    + [AI. Уваходная велічыня](#6217-AI-Уваходная-велічыня)
    + [WT. Датчык вагі](#6218-WT-Датчык-вагі)
    + [PT. Датчык ціску](#6219-PT-Датчык-ціску)
    + [Y (DEV_VTUG). Пнеўмавостраў Festo](#6220-Y-DEV_VTUG-Пнеўмавостраў-Festo)
    + [F. Аўтаматычны выключальнік](#6221-F-Аўтаматычны-выключальнік)
    + [С. ПІД-рэгулятар](#6222-С-ПІД-рэгулятар)
    + [HLA. Сігнальная калона](#6223-HLA-Сігнальная-колона)
    + [CAM. Камера](#6224-CAM-Камера)
    + [PDS. Сігнальны датчык розніцы ціску](#6225-PDS-Сігнальны-датчык-розніцы-ціску)
    + [TS. Сігнальны датчык тэмпературы](#6226-TS-Сігнальны-датчык-тэмпературы)
    + [G. Блок харчавання з аўтаматычным выключальнікам](#6227-G-Блок-харчавання-з-аўтаматычным-выключальнікам)
    + [WATCHDOG. Прылада праверкі сувязі](#6228-WATCHDOG-Прылада-праверкі-сувязі)
    + [EY. Пераўтваральнік IO-Link](#6229EY-Пераўтваральнік-IO-Link)
+ [Дадатковыя параметры](#63-Дадатковыя-параметры)
    + [Апісанне прылады](#631-Апісанне-прылады)
    + [Прызначэнне дадатковых палёў](#632-Прызначэнне-дадатковых-палёў)
+ [Вырабы прылад](#64-Вырабы-прылад)
+ [Праца з ПІД-рэгулятарам](#65-Праца-з-ПІД-рэгулятарам)

#### Рэдагаванне тэхналагічных аб'ектаў
+ [Агульныя звесткі аб тэхналагічных аб'ектах](#7-Агульныя-звесткі-аб-тэхналагічных-аб'ектах)
+ [Апісанне акна рэдактара](#71-Апісанне-акна-рэдактара)
    + [Неапазнаныя аб'екты пры загрузцы апісання праекта](#711-Неапазнаныя-аб'екты-пры-загрузцы-апісання-праекта)
    + [Стварэнне аб'ектаў](#712-Стварэнне-аб'ектаў)
    + [Капіраванне, устаўка і замена аб'екта](#713-Капіраванне-устаўка-і-замена-аб'екта)
    + [Выдаленне аб'екта](#714-Выдаленне-аб'екта)
    + [Перамяшчэнне аб'ектаў уверх і ўніз](#715-Перамяшчэнне-аб'ектаў-уверх-і-ўніз)
    + [Даданне прылад у аперацыі ў тэкставым выглядзе](#716-Даданне-прылад-у-аперацыі-ў-тэкставым-выглядзе)
    + [Даданне прылад у аперацыі ў графічным выглядзе](#717-Даданне-прылад-у-аперацыі-ў-графічным-выглядзе)
    + [Даданне прылад у аперацыі ў таблічным рэжыме](#718-Даданне-прылад-у-аперацыі-ў-таблічным-рэжыме)
    + [Захаванне вынікаў рэдагавання](#719-Захаванне-вынікаў-рэдагавання)
    + [Выкарыстанне параметраў у аб'екце](#7110-Выкарыстанне-параметраў-у-аб'екце)
    + [Мадыфікацыя назваў прылад](#7111-Мадыфікацыя-назваў-прылад)
+ [Апісанне дзеянняў](#72-Апісанне-дзеянняў)
+ [Выкарыстанне функцыянальнасці базавага аб'екта і базавай аперацыі](#73-Выкарыстанне-функцыянальнасці-базавага-аб'екта-і-базавай-аперацыі)
    + [Прывязка базавых аб'ектаў адзін да аднаго](#731-Прывязка-базавых-аб'ектаў-адзін-да-аднаго)
    + [Выкарыстанне базавай аперацыі](#732-Выкарыстанне-базавай-аперацыі)
    + [Выкарыстанне базавага кроку](#733-Выкарыстанне-базавага-кроку)
    + [Выкарыстанне абсталявання базавага аб'екта](#734-Выкарыстанне-абсталявання-базавага-аб'екта)
    + [Выкарыстанне дадатковых уласцівасцяў аб'екта](#735-Выкарыстанне-дадатковых-уласцівасцяў-аб'екта)
    + [Выкарыстанне сістэмных параметраў у базавым аб'екце](#736-Выкарыстанне-сістэмных-параметраў-у-базавым-аб'екце)
    + [Спіс базавых аб'ектаў, аперацый, параметраў, крокаў і абсталявання](#737-Спіс-базавых-аб'ектаў-аперацый-параметраў-крокаў-і-абсталявання)
    + [Рэкамендацыі па выкарыстанні ПП у аб'ектах](#738-Рэкамендацыі-па-выкарыстанні-ПП-у-аб'ектах)
+ [Экспарт аб'ектаў з рэдактара і зваротны імпарт](#74-Экспарт-аб'ектаў-з-рэдактара-і-зваротны-імпарт)
    + [Экспарт аб'ектаў](#741-Экспарт-аб'ектаў)
    + [Імпарт аб'ектаў](#742-Імпарт-аб'ектаў)
+ [Аўтаматычная ўстаўка аб'ектаў з макрасаў](#75-Аўтаматычная-ўстаўка-аб'ектаў-з-макрасаў)
+ [Скід базавага аб'екта ў рэдактары](#76-Скід-базавага-аб'екта-ў-рэдактары)
+ [Выкарыстанне груп з тыпавым аб'ектам](#77-Выкарыстанне-груп-з-тыпавым-аб'ектам)
    + [Стварэнне групы і даданне тэх. аб'ектаў](#771-Стварэнне-групы-і-даданне-тэх-аб'ектаў)
    + [Дзеянні](#772-Дзеянні)
    + [Параметры](#773-Параметры)
    + [Прывязаныя агрэгаты](#774-Прывязаныя-агрэгаты)
+ [Аўтазапаўненне](#78-Аўтазапаўненне)
    + [Аўтазапаўненне параметраў](#781-Аўтазапаўненне-параметраў)

#### Ўстаноўка абмежаванняў
+ [Ўстаноўка абмежаванняў у таблічным выглядзе](#8-Ўстаноўка-абмежаванняў-у-таблічным-выглядзе)

#### Сінхранізацыя і экспарт
+ [Сінхранізацыя назваў прылад і модуляў](#91-Сінхранізацыя-назваў-прылад-і-модуляў)
+ [Экспарт XML для EasyServer](#92-Экспарт-XML-для-EasyServer)
    + [Экспартуемыя параметры](#921-Экспартуемыя-параметры)
+ [Экспарт тэхналагічных прылад у Excel](#93-Экспарт-тэхналагічных-прылад-у-Excel)
    + [Экспарт інфармацыі ў Excel для SCADA](#931-Экспарт-інфармацыі-ў-Excel-для-SCADA)

#### Аб'ектная мадэль па ISA
+ [Аб'ектная мадэль тэхналагічных аб'ектаў](#101-Аб'ектная-мадэль-тэхналагічных-аб'ектаў)

#### Сістэма дапамогі OSTIS
+ [Выкарыстанне OSTIS як сістэмы дапамогі](#11-Выкарыстанне-OSTIS-як-сістэмы-допамогі)

#### Міжпраектны абмен сігналамі
+ [Настройка міжпраектнага абмену сігналамі](#12-Настройка-міжпраектнага-абмену-сігналамі)
+ [Абмен сігналамі па пратаколе Modbus](ModbusExchange.md)

#### Праца з апісаннем базавых аб'ектаў
+ [Настройка і праграмаванне апісання базавых аб'ектаў](#13-Настройка-і-праграмаванне-апісання-базавых-аб'ектаў)

### IOL-Conf
+ [Аўтаматычная генерацыя апісання для IOL-Conf](#14-Аўтаматычная-генерацыя-апісання-для-IOL-Conf)
    + [Стварэнне шаблонаў прылад і модуляў уводу/вываду](#141-Стварэнне-шаблонаў-прылад-і-модуляў-уводу-вываду)
    + [Настройка параметраў прылад](#142-Настройка-параметраў-прылад)
    + [Магчымыя паведамленні акна логаў і шляхі іх рашэння](#143-Магчымыя-паведамленні-акна-логаў-і-шляхі-іх-рашэння)




## 1 Правілы наймення праекта ##

Імя праекту з'яўляецца важнай часткай любога праекта. Яно выкарыстоўваецца ў аўтаматычна генераваных .lua файлах (*PAC_name*), а гэтак жа ў іншых функцыях надбудовы. Імя праекта бярэцца з назвы файла-цэтліка праекта (прадастаўляецца API Eplan_).

Імя праекта лагічна складаецца з дзвюх частак: імя пляцоўкі, імя праекта.

Правілы наймення:
- Імя не павінна змяшчаць двукоссяў, дужак і іншых спецзнакаў (_за выключэннем знака **мінус**_);
- Імя пляцоўкі задаецца сімваламі лацінскага алфавіту з магчымасцю нумарнога абазначэння пляцоўкі;
- Імя праекта задаецца сімваламі кірылічнага алфавіту з магчымасцю нумарнога абазначэння;
- Знакі прабелу, якія выкарыстоўваюцца ў імені праекта, павінны быць заменены на знак мінус.

## 2 Апісанне надбудовы і яе выкарыстанне ##

### 2.1 Апісанне надбудовы ###
<p align="justify">Надбудова EasyEPlanner распрацавана як Add-In да EPLAN, на дадзены момант выкарыстоўваецца EPLAN 2.9. Надбудова выкарыстоўваецца пры распрацоўцы праектаў у EPLAN і дазваляе аўтаматызаваць працу
інжынера па аўтаматызацыі, а таксама інжынера-праграміста, які апісвае праект на мове праграмавання LUA. З дапамогай EasyEPlanner апісваюцца тэхналагічныя аб'екты (Танк, Бойлер і інш.), аперацыі гэтых аб'ектаў, крокі аперацый, усталёўваюцца абмежаванні для аперацый, а гэтак жа мноства іншых уласцівасцяў тэхналагічнага аб'екта. У канчатковым выніку EasyEPlanner генеруе LUA файлы, якія загружаюцца ў кантролер.</p>

Надбудова змяшчае наступныя пункты меню:

1. Экспарт XML для EasyServer.
2. Экспарт тэхналагічных прылад у Excel.
3. Рэдагаваць тэхналагічныя аб'екты.
4. Прылады, параметры аб'ектаў.
5. Аперацыі, абмежаванні і прывязка аб'ектаў.
6. Сінхранізацыя назваў прылад і модуляў.
7. Генерацыя апісання IOL-Conf.
8. Аб дапаўненні.

Апісанне кожнага з пунктаў Вы знойдзеце пры чытанні дадзенай дакументацыі.

### 2.2 Падключэнне да Eplan ##
<p align="justify">Для таго, каб выкарыстоўваць EasyEPlanner, можна перакампіляваць бібліятэку або спампаваць апошнюю Release версію праекта. Для падпісвання надбудовы выкарыстоўвайце свой Eplan сервер подпісаў. Далей, неабходна запусціць EPLAN і ў меню перайсці ў <b>Сэрвісныя праграмы -> API-Addins</b>. У якое з'явілася акне неабходна націснуць кнопку "</b>Загрузіць</b>", адкрыецца дыялогавае акно, у якім неабходна перайсці ў тэчку з надбудовай і абраць файл "<b>EPLAN.EplAddin.EasyEPlanner.dll</b>", а пасля націснуць кнопку "<b>Адкрыць</b>". Надбудова загрузіцца, і з'явіцца пункт меню "<b>EPlaner</b>".</p>
<p align="justify"><b>ВАЖНА</b>: Перыядычна абнаўляйце тэчку з надбудовай праз SVN, а таксама не выдаляйце файлы з тэчкі, інакш праца надбудовы не гарантуецца!</p>

### 2.3 Апісанне аўтаматычна генераваных Lua-файлаў ###
Дадатак EasyEPLANner аўтаматычна генеруе некаторыя файлы кіравальнай праграмы кантролера. Дадзеныя файлы знаходзяцца ў наступным каталогу з праектамі (задаецца ў configuration.ini).

Спіс файлаў, якія апісваюць праект:

- __*main.plua*__ - апісанне кіравальнай праграмы. Пры адсутнасці дадзенага файла, ён генеруецца аўтаматычна з шаблонамі неабходных функцый. Калі дадзены файл ужо існуе, то тады ён застаецца ранейшым;
- __*main.io.lua*__ - апісанне прывязкі прылад да модуляў I/O. У дадзеным файле спачатку ідзе спіс выдаленых вузлоў (BC - bus couplers) з указаннем іх параметраў (IP-адрас, тып і да т.п.) і напаўненні - модуляў уводу/высновы (I/O modules). Далей ідзе спіс тэхналагічных прылад (S88 term - control modules) з указаннем каналаў уводу\высновы, якія з імі злучаны. Усярэдзіне каналаў апісваецца да якога BC яны прывязаныя, да якіх партоў падлучаныя і зрушэнні адраснай прасторы. Апроч каналаў усярэдзіне тэхналагічных прылад могуць быць яго розныя параметры;
- __*main.modbus_srv.lua*__ - апісанне ўзаемадзеяння з modbus-кліентамі;
- __*main.objects.lua*__ - апісанне аб'ектаў праекту. Апісанне з рэдактара тэхналагічных аб'ектаў. Спачатку апісваюцца тэхналагічныя аб'екты (Танк, Бойлер і інш.). Усярэдзіне гэтых аб'ектаў могуць апісвацца розныя параметры, таймеры, паказвацца ўласцівасці гэтага аб'екта, а гэтак жа спіс аперацый з крокамі і дзеяннямі;
- __*main.profibus.lua*__ - апісанне profibus шыны;
- __*main.restrictions.lua*__ - апісанне абмежаванняў, якія ўстанаўліваюцца для тэхналагічных аб'ектаў праз рэдактар ​​тэхналагічных аб'ектаў. Усталёўваюцца ў лікавым выглядзе, таму лепш праглядаць іх праз рэдактар ​​у EPLAN;
- __*main.rm_PACs.lua*__ - апісанне ўзаемадзеяння з выдаленымі PAC. Знаходзіцца ў бэта-версіі.
- __*prg.lua*__ - апісанне базавай функцыянальнасці аб'ектаў. У бягучай рэалізацыі ў файле спачатку апісваюцца зменныя, да якіх прысвойваюцца тыя ці іншыя аб'екты, пасля ідзе даданне базавай функцыянальнасці, у даляглядзе будзе дададзеная гэтак жа базавая ініцыялізацыя аб'ектаў. Файл генеруецца таксама на аснове дадзеных рэдактара тэхналагічных прылад.

### 2.4 Настройка каталога праектаў ##

Дадатак дазваляе наладжваць каталог для запісу і счытванні __lua__ файлаў праектаў. Для гэтых мэт у каталогу з дадаткам ёсць файл __configuration.ini__. Калі шляхі не пазначаны, будзе выведзена памылка.

У файле насупраць ключа __folder_path__ у двукоссі паказваецца шлях да каталога праектаў. Напрыклад: _folder_path="**C:\Folder1\folder2**"_.

Таксама ёсць магчымасць указання ў файле configuration.ini некалькіх шляхоў да праектаў. Калі зададзены шляхі, але ніводны з іх не існуе - апісанне будзе захавана па першым знойдзеным шляху. Калі зададзена і існуе некалькі шляхоў, будзе захавана па першым існуючым шляху. Раздзяляльнік для шляхоў - "**;**" (_кропка з коскі_).

Напрыклад: _folder_path="**C:\Folder1\folder2**;**D:\Folder3\folder4**"_.

### 2.5 Версія надбудовы ###

У меню EasyEplanner ёсць пункт - _Аб дадатку_. З дапамогай гэтага пункта можна даведацца пра бягучую версію надбудовы, якая падключана да Вашага Eplan. Націснуўшы гэты пункт меню будзе паказана дыялогавае акно, у якім будзе пазначана версія надбудовы.

Версія генеруецца па наступным шаблоне - `Год.Месяц.Зборка.Рэвізія`.

**Зборка** - колькасць дзён, пачынаючы з __1__ студзеня __2000__ гады.
**Рэвізія** - лік секунд ад паўночы, незалежна ад гадзіннага пояса.

### 2.6 Статыстыка ###

#### 2.6.1 Ацэначная складанасць праектаа ####
У надбудове ажыццяўляецца генерацыя статыстыкі адносна складанасці праекта (па загадзя зададзеным значэнням). У прыватнасці, вымяраецца колькасць радкоў кода ў файле `main.plua` (_лімітавае значэнне для статыстыкі - 1000 радкоў кода_), вымяраецца колькасць апаратаў у праекце (_лімітавае значэнне - 10 штук_), агрэгатаў (_50 штук_), колькасць тэгаў (_5000 штук_) і колькасць прылад (_10. На аснове гэтых значэнняў генеруюцца SVG-карцінкі, якія могуць казаць аб складанасці праекту. Малюнкі будуць знаходзіцца ў тэчцы з апісаннем праекту (_docs/statistics_).

Файлы:
* agregates_total.svg – колькасць агрэгатаў праекта.
* lines_total.svg - колькасць радкоў кода ў файле `main.plua`.
* tags_total.svg - колькасць тэгаў у праекце.
* units_total.svg - колькасць апаратаў у праекце.
* devices_total.svg - колькасць прылад у праекце.
* io_link_usage.svg - колькасць выкарыстоўваных IO-Link модуляў уводу-высновы ў адсоткавым стаўленні да агульнай колькасці модуляў уводу-высновы.
* io_couplers_total.svg - колькасць вузлоў уводу-высновы.
* io_modules_total.svg - агульная колькасць выкарыстоўваных модуляў вовда-высновы.

#### 2.6.2 Модуль прастою надбудовы ####

У надбудове ажыццяўляецца маніторынг актыўнасці. Калі на працягу адной гадзіны ў карыстача не было актыўнасці ў Windows (_заблакаваў кампутар, сышоў дадому і інш._), то надбудова аўтаматычна зробіць захаванне праекта, яго закрыццё і завершыць працу Eplan, тым самым, вызваляючы якая плавае ліцэнзію (_калі выкарыстоўваецца такі тып ліцэнзавання)_.

## 3 Настройкі праекта ##
### 3.1 Настройка дыяпазону IP-адрасоў праекта ###

Апроч карэктнага імя, у праекце неабходна задаць дыяпазоны IP-адрасоў, якія былі закладзены для гэтага праекту. Гэтыя дыяпазоны задаюцца ва ўласцівасцях праекту, у поле "_Карыстальнік, доп. поле[1]_".

Дыяпазон IP-адрасоў задаецца праз злучок (**-**), а некалькі дыяпазонаў праз коску. Прыклад:
__"10.0.16.230 - 10.0.16.240, 10.0.16.250-10.0.16.260"__.
Дадзены запіс задае 2 дыяпазоны IP-адрасоў.

Па зададзеных дыяпазонах правяраюцца ўсе прылады, якія змяшчаюць IP-адрас, на карэктнае запаўненне.

Прыклад карэктнага IP-адрасы: "_192.168.1.0_". IP-адрас задаецца без двукоссяў і падзяляецца кропкамі.

### 3.2 Настройка тэсціравання праекта ###

Надбудова дазваляе тэсціраваць праект на працаздольнасць. Тэсты напісаны не на ўвесь функцыянал, праект тэсціруецца часткова.

У дадзены момант, каб уключыць тэставанне, неабходна ў файле канфігурацыі **configuration.ini** пазначыць у секцыі **TestSettings** параметр **ProjectsTestEnabled** у **True**. Калі гэтага параметра ў секцыі няма, тое будзе выкарыстана стандартнае значэнне - **False**.

Прыклад:
```
[TestSettings]
ProjectTestEnabled=True
```

Калі пераключыць гэты параметр у **False**, тое тэставанне не будзе ўключацца.

Тэставанне аўтаматычна запускаецца кожны раз, калі адбываецца абнаўленне файлаў праекту. Напрыклад, пры ручным абнаўленні файлаў праекту. Вынік працы скрыпту выводзіцца ў агульнае акно логаў. У залежнасці ад вынікаў яго працы могуць быць розныя паведамленні:

1. **Тэставанне праекта прайшло паспяхова.** - Гэта паведамленне азначае, што бягучыя тэсты праведзены паспяхова, але гэта не гарантуе 100% працаздольнасці праекта, так як тэсты не пакрываюць усе выпадкі.
2. **У сістэме не знойдзены LUA, тэсціраванне праекта немагчыма.** - Гэта паведамленне кажа аб тым, што ў сістэме не знойдзены LUA, яго трэба ўсталяваць.
3. **Тэставанне праекта завяршылася з памылкамі. Праект не працаздольны. ** - Гэта паведамленне кажа аб тым, што тэсты завяршыліся з памылкай. Пасля гэтага паведамлення звычайна выводзяцца логі праведзеных тэстаў, дзе бачна, якія памылкі прывялі да яго некарэктнай працы.

Калі пасля завяршэння тэставання з'явілася памылка (**Не знойдзены канал xxxx (напрыклад, AODOAIDI)**), трэба распачаць наступныя дзеянні:

1. **Заходзім у пункт меню EPlaner і зноўку які генеруецца апісанне IOL-Conf.**
2. **У гэтым жа пункце меню выбіраемы "Сінхранізацыя назваў прылад і модуляў".**

Для карэктнага запуску тэстаў, тэставы скрыпт павінен быць абноўлены да апошняй версіі. Сістэма спрабуе знайсці тэставы скрыпт у дырэкторыі `..\..\spec\main.lua`, адносна тэчкі з файламі праекту. Таксама, апроч наладжанага каталога з праектамі, трэба каб скрыпты кіравальнай праграмы таксама былі наладжаныя. Гэта каталог `..\..\sys-scripts` адносна тэчкі з файламі праекту, таксама `..\..\editor` адносна тэчкі з файламі праекту. Аргументы каманднага радка захоўваюцца ў тэчцы `CMD` гэтага праекту.

### 3.3 Імпартаванне старых праектаў ###

Для імпарту старых праектаў (ICP CON) у меню EPlanner ёсць наступныя функцыі:
- `Імпарт ICP CON праекта` -
функцыя для імпарту праекта<sup>[[3.3.4]](#334-імпарт-апісанні-старога-праекта-на-фса)</sup>.

- `Стварыць/змяніць файл перайменавання прылад` -
функцыя для перайменавання старых прылад для наступнага імпартавання
праекта<sup>[[3.3.3]](#333-перайменаванне-старых-прылад)</sup>.

- `Дакумент адпаведнасці назваў прылад CSV` - стварае csv-дакумент са схемай адпаведнасці назваў прылад
у старым і новым праекце<sup>[[3.3.5]](#335-дакумент-адпаведнасці-назваў-прылад)</sup>.

#### 3.3.1 Апісанне старога праекта ####

Для імпартавання праекту спатрэбіцца файл `main.wago.plua`. Каб атрымаць дадзены файл, неабходна дадаткам
[`wprg.exe`](https://github.com/savushkin-r-d/wago_dsx/releases/latest)
адкрыць патрэбны праект з пашырэннем `.ds4`, пасля чаго экспартаваць яго:
`Прылады` -> `Экспарт для WAGO 750-860` - як паказана на малюнку ніжэй.
Пасля чаго ў тэчцы з праектам з'явіцца патрэбны файл
(`Увага`: файл з апісаннем пры экспарце замяняе стары файл апісання іншага праекта).

<p align="center"><img src="images/wprg4_export.png"></p>

<p align="center"><b>Рысунак</b> - <i>Экспарт праекта для WAGO</i></p>

#### 3.3.2 Настройка правільнай працы імпарту прылад ####

Для карэктнай працы імпарту апісання старых праектаў неабходна ў файле канфігурацыі (`configuration.ini`)
пазначыць шлях да EPLAN макрасаў модуляў уводу-вываду, калі такой наладкі яшчэ не ўстаноўлена:
неабходна ў секцыі `[path]` дадаць зменную `wago_import_macros_path = "ДЫСК:\шлях\да\тэчкі\з\макрасамі"`
і `wago_macros_path = "ДЫСК:\шлях\да\тэчкі\з\макрасамі"`.
Пошук праводзіцца спачатку па `wago_import_macros_path`, а пасля па `wago_macros_path`.

Першы каталог з макрасамі выкарыстоўваецца для макрасаў са спецыяльнымі настройкамі для карэктнага імпарту,
другі - шлях да асноўнага каталога з макрасамі. Для карэктнага аўтаматычнага імпарту і наладкі модуляў
неабходна скапіяваць макрас клемніка ў каталог `wago_macros_import_path` з усталяванай "Галоўнай функцыяй".
Інакш клемнікі будуць імпартавацца без перайменавання, і назоў модуля прыйдзецца змяняць у ручную.
Пры гэтым у логу можна будзе ўбачыць памылку `"Не атрымалася праіндэксаваць модуль -Axxx на старонцы n"`.

Сама тэчка з макрасамі павінна быць структураваная ў адпаведнасць з апошнімі зменамі ў гэтай тэчцы, а менавіта:
яны павінны быць разбітыя па тэчках адпаведным сваім групам і менавацца па наступным фармаце `750-x00` (**x** - нумар групы).
Макрас выбіраецца па назве `WAGO.750-xyy.ema` (**xyy** - нумар модуля).

Калі ў макраса ёсць нейкая мадыфікацыя (варыяцыя) тыпу `WAGO.750-xyy_025-000.ema`, то такі макрас абраны не будзе,
патрабуецца строгае назву макраса, які будзе выкарыстоўвацца.

#### 3.3.3 Перайменаванне старых прылад ####

Перад імпартаваннем старога праекта можна загадзя скласці файл з наладай перайменавання прылад.
Для гэтага неабходна ў меню абраць функцыю: `EPlaner` -> `Стварыць/змяніць файл перайменавання прылад`.
У якое адкрылася акне правадыра неабходна абраць файл праекту `main.wago.plua`. Далей з'явіцца наступнае акно:

<p align="center"><img src="images/DeviceRenamingMap.png"></p>

<p align="center"><b>Рысунак</b> - <i>Настройка перайменавання старых прылад</i></p>

У дадзеным акне можна наладзіць перайменаванне прылад.
Усе вочкі рэдагуюцца па падвойнай пстрычцы (акрамя першых двух слупкоў).
Далей файл перайменавання неабходна захаваць, націснуўшы кнопку прымяніць або зачыніўшы акно.
У далейшым змяніць налады перайменавання можна непасрэдна ў захаваным файле,
альбо паўтарыўшы ўсе дзеянні апісаныя вышэй і націснуўшы на кнопку ў акне `Выкарыстоўваць файл перайменавання`,
што падгрузіць захаваны файл і можна працягнуць яго рэдагаванне.

**Заўвага:**
На ўкладцы `Параметры па змаўчанні` наладжваюцца стандартныя значэнні параметраў
для пэўных тыпаў прылад, але ў файл яны не захоўваюцца, таму на бягучым этапе
дадзеная ўкладка не выкарыстоўваецца.

#### 3.3.4 Імпарт апісання старога праекта на ФСА ####

Для імпартавання апісання старога праекту неабходна ў меню абраць наступную функцыю: `EPlaner` -> `Імпарт ICP-CON праекту`.
У якое адкрылася акне правадыра неабходна абраць файл праекту `main.wago.plua`. Пасля гэтага пачнецца імпарт старога праекту.

Падчас імпартавання выклікаецца акно перайменавання прылад як і ў пункце [3.3.3](#333-перайменаванне-старых-прылад).
Праца з гэтым акном праводзіцца таксама як апісана ў дадзеным пункце.
Пасля націску кнопкі `Ужыць` ці зачыненні акна, ужываецца перайменаванне прылад і працягваецца імпарт прылад.
Таксама на дадзеным этапе наладжваюцца параметры па змаўчанні для прылад на якая адпавядае ўкладцы:
параметры наладжваюцца ў межах тыпаў прылад.

**Заўвагі па імпарце праекта:**
- У старых праектах выкарыстоўваліся 4 тыпу вузла:
+ 750-315 - RS-485
+ 750-815 - RS-485 (Programmable)
+ 750-341 - Ethernet coupler
+ 750-841 - Ethernet (Programmable)

Так як у бягучых праектах няма апісання першых двух вузлоў RS-485, то яны замяняюцца на адпаведныя Ethernet вузлы.

- Старонкі ў EPLAN генеруюцца з назвамі па-змаўчанні ў адпаведнасці з малюнкам ніжэй:

<p align="center"><img src="images/imported_pages_explorer.png"></p>

<p align="center"><b>Рысунак</b> - <i>Структура імпартаванага праекта</i></p>

- Прылады ўводу-вываду імпартуюцца з падзелам па аб'ектах у месцах усталёўкі (EPLAN) па аналогіі з модулямі.
Месцы ўсталёўкі не заўсёды правільна расшыфроўваюцца, і пад кожнай прыладай паказаны каментар з ICP-CON,
па ім можна звяраць карэктнасць.

- Пры імпартаванні прылад правяраюцца назовы ўжо дададзеных прылад:
калі прылада з такой назвай ужо ёсць, то на ФСА яно не будзе дададзена.
Для правільнай прывязкі будзе падцягнута новае апісанне з існуючай прылады
і ў існуючай прыладзе будзе абноўлена доп. поле[10] са старой назвай у ICP CON.

- Пасля імпарту прылад і модуляў, наладжваецца іх прывязка.

- У логах паказваюцца некаторыя памылкі пры імпартаванні праекту.

#### 3.3.5 Дакумент адпаведнасці назваў прылад ####

Для таго, каб стварыць дакумент адпаведнасці назоваў прылад паміж старым (ICP CON) і новым праектам,
неабходна ў меню абраць наступную функцыю: `EPlaner` -> `Дакумент адпаведнасці назоваў прылад CSV`.
Дадзеная функцыя прапануе захаваць файл у фармаце `*.csv` - тэкставы фармат таблічных дадзеных.
Для адкрыцця дадзенага файла ў Excel неабходна абраць укладку `Дадзеныя` -> "З тэкставага/CSV-файла" (залежыць ад версіі excel).
Гэтак жа пры імпарце CSV-файла неабходна абраць кадоўку `UTF-8`.

<p align="center"><img src="images/CsvToExcel.png"></p>

<p align="center"><b>Рысунак</b> - <i>Адкрыццё дакумента адпаведнасці назваў прылад у Excel</i></p>

**Заўвага**:
Для карэктнай працы дадзенага функцыяналу неабходна, каб у прыладах на ФСА было прапісана доп. поле[10],
дзе ўсталёўваецца стары назоў прылады ў ICP CON. Дадзенае поле запаўняецца аўтаматычна на этапе
[3.3.4](#334-імпарт-апісанні-старога-праекта-на-фса), Аднак калі прылады ствараюцца ўручную,
то неабходна ўручную праставіць дадзенае поле. Або ў далейшым дапоўніць дадзенае поле ўжо ў Excel.

**Дадаткова**:
Надбудова таксама прапануе захаваць дадзены файл на этапе [3.3.4](#334-імпарт-апісанні-старога-праекта-на-фса),
тут ужо не патрабуецца наяўнасць доп. поле[10]. Але калі назвы ў далейшым будуць мяняцца,
то ў дадзенай функцыі няма неабходнасці.

## 4 Абсталяванне IO ##

**ВАЖНА:** Усе прылады (прылады, вузлы ўводу-высновы і інш.), якія дадаюцца ў праект павінны быць размешчаны на ФСА (функцыянальная схема аўтаматызацыі) для таго, што б надбудова іх счытвала. Калі прылады на ФСА няма, тое яно не будзе прачытана! Дадатковыя палі прылад запаўняюцца таксама на ФСА. Таксама __важно__, каб у прыладзе на ФСА быў уключаны сцяжок - "Галоўная функцыя", а ў яго макрасах на іншых схемах - адключаная.

<p align="justify"><b>Кантроль адраснай прасторы вузла.</b> Вузлы маюць абмежаваную адрасную прастору і максімальную колькасць падключаемых модуляў: для <i>WAGO</i> - <b>64 модуля і 2 кБ</b>, <i>Phoenix Contact</i> - <b>6. Пры даданні ў вузел модуля, праўзыходнага максімальная колькасць падключаюцца модуляў або адрасную прастору, з'яўляецца адпаведная памылка і модуль не захоўваецца ў апісанні (<i>Для WAGO абмежаванне па адраснай прасторы пакуль адсутнічае</i>).</p>

### 4.1 Настройка вузлоў і модуляў уводу-вываду

<p align="justify">Назва вузлоў ажыццяўляецца ў наступным выглядзе: літара A і нумар, кратны 100. Прыклад: "A100", "A200". У праекце вузлы павінны ісці паслядоўна ад "A100" (<em>для WAGO - старыя праекты</em>), а для новых тыпаў праекту (<em>Phoenix Contact</em>) неабходна ўлічваць, што вузлавы кантролер (<em>на якім знаходзіцца кіравальная праграма</em>) завецца як "A1".</p>

У вузлоў таксама можна задаваць параметры:

1. Дад. поле[1] - прыкмета пропуску прылады (калі ў поле напісана значэнне - 1, то прылада ігнаруецца);
2. Пачатковы адрас карты ПЛК (у акне "Блок ПЛК") - паказваецца IP-адрас прылады.

Інфармацыя аб модулях уводу-высновы атрымліваецца на аснове апісання модуля (звесткі аб вырабе). У праекце павінен быць галоўны выраб для модуля (вузел).

### 4.2 Прывязка прылад да модуляў IO ###

<p align="justify">Для злучэння клемы модуля ўводу-высновы і прылады неабходна, каб функцыянальны тэкст (клемы) адпавядаў назову канала прылады. Для спрашчэння дадзенай працэдуры рэалізавана акно са спісам прылад і каналаў.</p>



<p align="center"><img src="images/devices_form.png"></p>

<p align="center"><b>Рысунак</b> - <i>Акно "Прылады"</i></p>

<p align="justify">Выклік дадзенага акна ажыццяўляецца праз пункт меню <b>"EPlaner" -> "Прылады"</b></p>

<p align="center"><img src="images/device_form_path.png"></p>

<p align="center"><b>Рысунак</b> - <i>Шлях да акна "Прылады"</i></p>

<p align="justify">Для прывязкі клемы неабходна пры актыўным функцыянальным тэксце клемы <b>двойчы</b> націснуць (<i>double click</i>) на патрабаваны канал у акне прылад (<i>прыклад, вылучана зялёным</i>).</p>

**Нататка**: для клапанаў з AS-інтэрфейсам і IO-Link Mixproof клапана прывязваецца толькі 1 з 2 каналаў (_AI або AO_).

<p align="center"><img src="images/assign_channel_to_plc.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад прывязкі да модуля ўводу-вываду</i></p>

<p align="justify">Пасля падвойнага кліку адпаведны тэкст аўтаматычна занясецца ў функцыянальны тэкст. Пры неабходнасці прывязкі больш адной прылады да адной і той жа клемы неабходна <b>заціснуць</b> пры гэтым клавішу <b>Ctrl</b> (<i>да тэксту дапішацца дадзеная прылада</i>). Для размяшчэння назвы прылады на новым радку неабходна карыстацца сімвалам новага радка (¶), неабходна ўставіць сімвал паміж радкамі (<i>напрыклад, скапіяваўшы яго папярэдне з Word</i>).</p>

Пры прывязцы дзейнічаюць наступныя абмежаванні:
* Да модулю AI прывязваецца AI сігнал;
* Да модулю AO прывязваецца AO сігнал;
* Да модулю DI прывязваецца DI сігнал;
* Да модулю DO прывязваецца DO сігнал;
* Да модулю IO-Link ад Wago прывязваюцца AO, AI сігналы;
* Да модулю IO-Link ад Phoenix Contact прывязваюцца AO, AI, DO, DI сігналы;
* Да модулю DO/DI ад Phoenix Contact прывязваюцца DO і DI сігналы;

**Заўвага**:
1. Для IO-Link модуля Phoenix Contact дадаткова, пасля каментара да сігналу, (заўв., _Пуск_, як на малюнку ніжэй) праз сімвал новага радка паказваецца тып канала. Тып канала паказваецца не заўсёды, толькі калі прылада мае больш за два каналы для прывязкі. Тып канала паказваецца **ТОЛЬКІ** для DI ці DO канала. Тып каналаў можа быць:
* DI (для каналаў DI);
* DO (для каналаў DO).
2. Калі прылада па нейкай прычыне не прывязваецца, калі ласка, праверце ўсе клемы прылады ўводу-вываду, да якога вы хочаце прывязацца. Клеммы не павінны мець галачак "Галоўная функцыя_".
3. Калі выпадкова абрана не сігнальная клема (напрыклад, сілкаванне), то прывязкі прылады па падвойнай пстрычцы не адбудзецца. Калі ж функцыянальны тэкст клемы быў запоўнены ўручную, то надбудова адлюструе адпаведную памылку.

<p align="center"><img src="images/PXCIOLFuncText.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад функцыянальнага тэксту для модуля Phoenix Contact IO-Link</i></p>

<p align="center"><img src="images/functional_text_example.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад функцыянальнага тэксту</i></p>

<p align="center"><img src="images/functional_text_display_example.png"></p>

<p align="center"><b>Рысунак</b> - <i>Адлюстраванне ўведзенага функцыянальнага тэксту</i></p>

### 4.2.1 Прывязка пнеўмавострава Festo (VTUG) ###

Пнеўмавостраў Festo (_DEV_VTUG - старыя праекты, Y - новыя_) падтрымлівае звычайную прывязку да сваіх клем, а гэтак жа множную прывязку. Важна, каб прывязка ажыццявілася - гэта наяўнасць прывязкі самага пнеўмавострава да клемы модуля ПЛК.

На электрычнай схеме паказваецца, да якой клемы ПЛК прывязаны пнеўмавостраў, а на схеме агляду пнеўмавострава (_ці электрычнай схеме, у залежнасці ад размяшчэння_) адбываецца прывязка клапанаў да клем пнеўмавострава. __Важна__: выкарыстоўваць спосабы паасобна для кожнай з прылад.

**Заўвага:**
* Толькі тып пнеўмавострава Y прывязваецца апісваным спосабам. Для старых тыпаў DEV_VTUG неабходна выкарыстоўваць звычайны спосаб прывязкі (стары тып састарэлы, але выкарыстоўваецца ў старых праектах). Падтрымліваецца "пераходны стан", калі DEV_VTUG заменены на Y, але выкарыстоўваецца стары тып прывязкі. Пры выкарыстанні старога тыпу прывязкі з новым тыпам пнеўмавострава не гарантуецца праца функцыі - _Сінхранізацыя назоваў прылад і модуляў_.
* Пнеўмавостраў, які размешчаны на ФСА і на схеме агляду, павінен мець галачку "Галоўная функцыя".

<p align="center"><img src="images/FestoBindCircuitList.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Прывязка пнеўмавострава на электрычнай схеме</i></p>

На першай частцы малюнка - пнеўмавостраў без клем і яго прывязка да модуля ўводу-высновы. На другім малюнку - прывязка да клем у прастакутным макрасе пнеўмавострава на схеме "Пнеўмавостраў.Агляд".

<p align="center"><img src="images/FestoBindReviewList.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прывязка пнеўмавострава на схеме агляду</i></p>

Апроч усяго апісанага вышэй, неабходна паказаць тып выкарыстоўванага пнеўмавострава. Для гэтага схематычна размяшчаем пнеўмавостраў на ФСА і прапісваем у доп. поле 2 тып выкарыстоўванай версіі (гл. пункт 5.2.3). Не забываемся пра сцяжок "Галоўная функцыя".

<p align="center"><img src="images/set_vtug_tip.png"></p>

<p align="center"><b>Рысунак</b> - <i>Указанне тыпу версіі пнеўмавострава, якая выкарыстоўваецца</i></p>

### 4.2.2 Правілы напісання каментароў да прывязкі ###

Пры множнай прывязцы, у функцыянальны тэкст будзе заносіцца толькі пазначэнне прылад (_ОУ_) сябар за сябрам (_заўв., "+V1 +V2 +V3"_), прычым можна задаваць яе як у радок (_задаецца першапачаткова_), так і ў слупок (_неабходна расставіць знакі пераносу радка паміж ОУ_). Раздзяляльнік пры множнай прывязцы - сімвал пераносу на новы радок.

Пры адзінарнай прывязцы ў функцыянальны тэкст заносіцца гэтак жа каментар.

Для ўсталёўкі каментара неабходна ўлічваць наступныя правілы:

+ Каментарый павінен пачынацца з загалоўнай літары;
+ Каментарый не павінен утрымоўваць у сабе ОУ (заўв., +V3);
+ Каментарый можа змяшчаць літары лацінскага і кірылічнага алфавіту ў любым рэгістры (_верхні, ніжні_), а таксама літарна-лічбавыя абазначэння (_заўв., CR2, B4 і інш.);
+ Каментарый не павінен утрымоўваць спецзнакі, клямарчыкі, і інш. (_за выключэннем знака - **№**_).

Прыклад карэктнага каментара: **"Падача ў аб'ект OBJECT2"**.

### 4.3 Падтрымліваемыя модулі ўводу-вываду ###
У гэтым раздзеле знаходзіцца спіс модуляў уводу-вываду, якія падтрымліваюцца надбудовай. Дадзеныя захоўваюцца ў файле **sys_io_modules.lua**, калі гэты файл выдаліць, то будзе створаны файл са стандартным шаблонам апісання, які трэба будзе запоўніць. У файле знаходзіцца падказка па запаўненні дадзеных, якая палягчае занясенне змен. Файл знаходзіцца ў тэчцы Lua.

| Вытворца   | Назва (Нумар)                 | Тып         | Заўвага                                     |
| --------------- | -------------------------------- | ----------- | ---------------------------------------------- |
| WAGO            | 750-450                          | AI          | 4 канала RTD                                   |
| WAGO            | 750-461                          | AI          | 2 канала RTD                                   |
| WAGO            | 750-466                          | AI          | 2 канала RTD                                   |
| WAGO            | 750-491                          | AI          | 1 канал resistance measuring bridge            |
| WAGO            | 750-496                          | AI          | 8 каналов                                      |
| WAGO            | 750-638                          | AI          | Лічыльнік                                      |
| WAGO            | 750-554                          | AO          | 2 канала                                       |
| WAGO            | 750-555                          | AO          | 4 канала                                       |
| WAGO            | 750-655                          | AI/AO       | AS-інтэрфейс                                   |
| WAGO            | 750-657                          | AI/AO       | IO-Link                                        |
| WAGO            | 750-402                          | DI          | 4 канала                                       |
| WAGO            | 750-430                          | DI          | 8 каналаў                                      |
| WAGO            | 750-1405                         | DI          | 16 каналаў                                     |
| WAGO            | 750-1415                         | DI          | 8 каналаў                                      |
| WAGO            | 750-1420                         | DI          | 4 канала                                       |
| WAGO            | 750-504                          | DO          | 4 канала                                       |
| WAGO            | 750-512                          | DO          | 2 канала relay module                          |
| WAGO            | 750-530                          | DO          | 8 каналаў                                      |
| WAGO            | 750-1504                         | DO          | 16 каналаў                                     |
| WAGO            | 750-1515                         | DO          | 8 каналаў                                      |
| WAGO            | 750-600                          | -           | Канчатковы модуль                              |
| WAGO            | 750-602                          | -           | Сілкаванне                                     |
| WAGO            | 750-612                          | -           | Сілкаванне                                     |
| WAGO            | 750-627                          | -           | Пашырэнне шыны                                 |
| WAGO            | 750-628                          | -           | Пашырэнне шыны                                 |
| Phoenix Contact | AXL F CNT2 INC2 1F (2688093)     | AI          | 4 канала, лічыльнік                            |
| Phoenix Contact | AXL F AI4 I 1H (2688491)         | AI          | 4 канала                                       |
| Phoenix Contact | AXL F RTD4 1H (2688556)          | AI          | 4 канала RTD                                   |
| Phoenix Contact | AXL F AO4 1H (2688527)           | AO          | 4 канала                                       |
| Phoenix Contact | AXL F IOL8 2H (1027843)          | AI/AO/DI/DO | IO-Link с прывязкай DI/DO, 8 каналаў           |
| Phoenix Contact | AXL F DI16/4 2F (2688022)        | DI          | 16 каналаў                                     |
| Phoenix Contact | AXL F DO16/3 2F (2688048)        | DO          | 16 каналаў                                     |
| Phoenix Contact | AXL F DO16/2 2H (1027904)        | DO          | 16 каналаў                                     |
| Phoenix Contact | AXL F DI8/3 DO8/3 2H (2702071)   | DI/DO       | 8 каналаў DI и 8 каналаў DO                    |
| Phoenix Contact | AXL F DI8/1 DO8/1 1H (2701916)   | DI/DO       | 8 каналаў DI и 8 каналаў DO                    |
| Phoenix Contact | AXL F AI2 AO2 1H 0-10V (2702072) | AI/AO       | 2 канала AI и 2 канала DI                      |
| Phoenix Contact | AXL F RS UNI 1H (2688666)        | AI/AO       | Камунікацыйны модуль RS-232, RS-485, RS-422    |
| Phoenix Contact | AXL F AI8 1F (2688064)           | AI          | 8 каналаў                                      |
| Phoenix Contact | AXL F SGI2 1H (2702911)          | AI          | Вымяральны модуль тэнзадатчыка                 |
| Phoenix Contact | AXL SE AI4 I 4-20 (1088062)      | AI          | 4 канала                                       |
| Phoenix Contact | AXL SE AI4 U 0-10 (1088126)      | AI          | 4 канала                                       |
| Phoenix Contact | AXL SE RTD4 PT100 (1088106)      | AI          | 4 канала RTD                                   |
| Phoenix Contact | AXL SE RTD4 PT1000 (1182190)     | AI          | 4 канала RTD                                   |
| Phoenix Contact | AXL SE CNT1 (1088131)            | AI          | 1 канал, лічыльнік                             |
| Phoenix Contact | AXL SE AO4 I 4-20 (1088123)      | AO          | 4 канала                                       |
| Phoenix Contact | AXL SE IOL4 (1088132)            | AI/AO/DI/DO | IO-Link з прывязкай DI/DO, 4 канала            |
| Phoenix Contact | AXL SE DI16/1 (1088127)          | DI          | 16 каналаў                                     |
| Phoenix Contact | AXL SE DO16/1 (1088129)          | DO          | 16 каналаў                                     |
| Phoenix Contact | AXL SE SC-A (1088134)            | -           | Заглушка                                       |
| Phoenix Contact | AXL SE PD16 24V (1337223)        | -           | Размеркавальнік патэнцыялу                     |
| Phoenix Contact | AXL SE PD16 GND (1337224)        | -           | Размеркавальнік патэнцыялу                     |

Падтрымліваюцца кантролеры і каплеры, якія бяруцца з файла **sys_io_nodes.lua**. Ён працуе аналагічна **sys_io_modules.lua**:

| Вытворца        | Назва (нумар)     |
| --------------- | ----------------- |
| WAGO            | 750-863           |
| WAGO            | 750-341           |
| WAGO            | 750-841           |
| WAGO            | 750-352           |
| WAGO            | 750-362           |
| WAGO            | 750-8202          |
| WAGO            | 750-8203          |
| WAGO            | 750-8204          |
| WAGO            | 750-8206          |
| Phoenix Contact | AXL F BK ETH      |
| Phoenix Contact | AXL F BK ETH NET2 |
| Phoenix Contact | AXC F 1152        |
| Phoenix Contact | AXC F 2152        |
| Phoenix Contact | AXC F 3152        |

##  5 Аб'екты тэхналагічнай схемы ##

<p align="justify">Объектами являются физические танки, линии и т.д. Логически они делятся на аппараты, агрегаты, блоки управления.</p>

### 5.1 Аперацыі аб'ектаў ###
<p align="justify">Аперацыі можа ўключаць аператар. Падчас аперацыі адбываецца ўключэнне\выключэнне прылад, апрацоўка значэнняў з датчыкаў і т.д. Аперацыі выдзяляюцца, зыходзячы з сістэмнага падыходу. Яны падзяляюцца на асноўныя і дапаможныя. Кожная аперацыя мае назву, якое характарызуецца адзіным для ўсіх праектаў апісаннем (г.зн. аперацыя "напаўненне" аднолькавая для ўсіх праектаў і характарызуецца наступнымі параметрамі: аб'ёмам напаўнення, праводнасць сумесі, праводнасць вады). Аперацыі апісваюцца ў графічным выглядзе ў рэдактары аперацый Eplaner.</p>

Для аперацыі вызначаецца:
1. Нумары аперацый, на якія можна перайсці пасля дадзенай аперацыю (з схемы аперацый).
2. Значэнні параметраў, неабходных для выканання аперацыі.

Аперацыі складаюцца з крокаў. Аперацыя можа знаходзіцца ў стане __просты__, __выкананне__, __паўза__, __прыпынак__, __запуск__, __становіцца ў паўзу__, __выходзіць з паўзы__, __спыняецца__.

<p align="center"><img src="images/transition_between_operations.svg"></p>

<p align="center"><b>Рысунак</b> - <i>Пераход паміж станамі аперацый</i></p>

Стан аперацыі можа быць абрана для запуску пры старце праграмы.
Для аднаго аб'екта магчымы выбар для запуску толькі адной аперацыі ў некаторым стане.
Для гэтага трэба ў стане абраць опцыю `Запускаць пры старце праграмы`.
(Астатнія станы аўтаматычна скідаюць гэтую опцыю).

<p align="center"><img src="images/AutorunState.png"></p>

<p align="center"><b>Рысунак</b> - <i>Выбар стану аперацыі для запуску</i></p>

### 5.2 Схемы ###
<p align="center"><img src="images/operations_descr_in_eplan.png"></p>

<p align="center"><b>Рысунак</b> - <i>Схема апісання аперацый у Eplan</i></p>

## 6 Прылады тэхналагічнай схемы

### 6.1 Нумарацыя прылад ###
Для ідэнтыфікацыі выкарыстоўваюцца вялікія лацінскія літары, знак падкрэслівання, спецыяльныя сімвалы (<b>=</b>,<b>=</b>, <b>+</b>, <b>-</b>) і <b>лічбы</b>.

Аб'екты ідэнтыфікуюцца з дапамогай наступнай натацыі:
<b>==</b> сайт <b>=</b> праект <b>+</b> тэхналагічны аб'ект <b>#</b> аб'ект карыстальніка <b>-</b> прылада.

#### 6.1.1 Тэхналагічны аб'ект ####
Назва тэхналагічнага аб'екта (_танка, лініі…_). Заўсёды змяшчае назву лацінкай і лічбавы нумар.
Прыклады тыпавых тэхналагічных аб'ектаў:
* __M2__ - лінія № 2;
* __KOAG2__ – каагулятар №2;
* __TCW1__ – бачок з халоднай вадой №1;
* __THW1__ - бачок з гарачай вадой №1.

#### 6.1.2 Карыстальніцкі аб'ект ####
Змяшчае дадатковую інфармацыю.

#### 6.1.3 Прылада ####
<p align="justify">Змяшчае код прылады і нумар (<i><b>V1</b> – клапан №1</i>). Прылада ўнікальна ў межах тэхналагічнага аб'екта.</p>

### 6.2 Пералік прылад ###
<p align="justify">Ніжэй прыведзена апісанне выкарыстоўваных тэхналагічных прылад. Для кожнай прылады таксама могуць задавацца дадатковыя палі (<i>глядзі падзел <b>5.3</b> "Дадатковыя параметры"</i>).</p>

#### 6.2.1 HA. Аварыйная гукавая сігналізацыя. Сірэна ####
Абазначэнне: __HA__.
Каналы ўводу/высновы: __DO__ – _1_.
Прыклад: __HA1__. Аварыйная гукавая сігналізацыя. Сірэна.

<p align="center"><img src="images/HA_device.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад аварыйнай гукавой сігналізацыі, сірэны</i></p>

#### 6.2.2 FQT. Лічыльнік ####
Абазначэнне: **FQT**.
Падтып: **FQT**.
Каналы ўводу/высновы: **AI** – _1_.
Назва каналаў: __AI1__ - _аб'ём_.

Абазначэнне: **FQT**.
Падтып: **FQT_F**.
Каналы ўводу/высновы: **AI** – _2_.
Назва каналаў: __AI1__ - _струмень_, __AI2__ - _аб'ём_.

Абазначэнне: **FQT**.
Падтып: **FQT_F_IOLINK**.
Каналы ўводу/высновы: **AI** – _1_.

Прыклад: __+OBJ1-FQT1__. Аб'ект 1. Аб'ём.  

#### 6.2.3 HL. Светлавая сігналізацыя ####
Абазначэнне: __HL__.
Каналы ўводу/высновы: __DO__ – _1_.
Прыклад: __HL1__. Аварыйная сігналізацыя. Зялёны.

#### 6.2.4 LT. Бягучы ўзровень ####
Абазначэнне: __LT__, **LT_CYL**, **LT_CONE**, **LT_TRUNC**.
Каналы ўводу/высновы: __AI__ – _1_.
Прыклад: __+OBJ1-LT1__. Аб'ект №1. Бягучы ўзровень.

Абазначэнне: **LT_IOLINK**.
Каналы ўводу/высновы: __AI__ – _2_.
Прыклад: __+OBJ1-LT1__. Аб'ект №1. Бягучы ўзровень.

#### 6.2.5 GS. Датчик становішча ####
Абазначэнне: **GS**.
Падтыпы: **GS**, **GS_INVERSE**.
Каналы ўводу/высновы: **DI** – *1*.
Прыклад: **+OBJ2-GS1**. Аб'ект №2. Датчык люка.

#### 6.2.6 М. Матор (электрарухавік) ####
Абазначэнне: **M**.
Падтып: **M**.
Каналы ўводу/высновы: **DO** - *1*, **DI** – *1*.
Назва каналаў: **DO1** - *пуск*, **DI1** - *зваротная сувязь*.

Абазначэнне: **M**.
Падтып: **M_FREQ**.
Каналы ўводу/высновы: **DO** - *1*, **DI** – *1*, **AO** – *1*.
Назва каналаў: **DO1** - *пуск*, **DI1** – *зваротная сувязь*, **AO1** – *частата кручэння*.

Абазначэнне: **M**.
Падтып: **M_REV**.
Каналы ўводу/высновы: **DO** – *2*, **DI** – *1*.
Назва каналаў: **DO1** - *пуск*, **DO2** – *рэверс*, **DI1** – *зваротная сувязь*.

Абазначэнне: **M**.
Падтып: **M_REV_FREQ**.
Каналы ўводу/высновы: **DO** – *2*, **DI** – *1*, **AO** – *1*.
Назва каналаў: **DO1** - *пуск*, **DO2** – *рэверс*, **DI1** – *зваротная сувязь*, **AO1** – *частата кручэння*.

Абазначэнне: **M**.
Падтып: **M_REV_2**.
Каналы ўводу/высновы: **DO** – *2*, **DI** – *1*.
Назва каналаў: **DO1** - *пуск*, **DO2** – *рэверс*, **DI1** – *зваротная сувязь*.

Абазначэнне: **M**.
Падтып: **M_REV_FREQ_2**.
Каналы ўводу/высновы: **DO** – *2*, **DI** – *1*, **AO** – *1*.
Назва каналаў: **DO1** - *пуск*, **DO2** – *рэверс*, **DI1** – *зваротная сувязь*, **AO1** – *частата кручэння*.

Абазначэнне: **M**.
Падтып: **M_REV_2_ERROR**.
Каналы ўводу/высновы: **DO** – *2*, **DI** – *1*.
Назва каналаў: **DO1** - *пуск*, **DO2** – *рэверс*, **DI1** – *аварыя*.

Абазначэнне: **M**.
Падтып: **M_REV_FREQ_2_ERROR**.
Каналы ўводу/высновы: **DO** – *2*, **DI** – *2*, **AO** – *1*.
Назва каналаў: **DO1** - *пуск*, **DO2** – *рэверс*, **DI1** – *аварыя*, **DI2** – *зваротная сувязь*, **AO1** – *частата кручэння*.

Абазначэнне: **M**.
Падтып: **M_ATV**, **M_ATV_LINEAR**.
Каналы ўводу/высновы: кіруецца праз Ethernet.

Прыклад: **+OBJ1-M1**. Аб'ект 1. Пуск.

#### 6.2.7 FS. Датчык наяўнасці патоку ####
Абазначэнне: **FS**.
Каналы ўводу/высновы: **DI** – *1*.
Прыклад: **FS1**. Датчык наяўнасці патоку.

#### 6.2.8 LS. Гранічны ўзровень ####
Абазначэнне: **LS_MIN**, **LS_MAX**.
Каналы ўводу/высновы: **DI** – *1*.
Дадатковыя палі:
* Тып падключэння: _max_, _min_.

Абазначэнне: **LS**.
Падтып: **IO_LINK_MIN**, **IO_LINK_MAX**
Каналы ўводу/высновы: **AI** – *1* (AOAI).
Дадатковыя палі:
* Тып падключэння: _max_, _min_.

Прыклад: **+TANK1-LS2**. Танк №1. Верхні ўзровень.

#### 6.2.9 QT. Датчык праводнасці ####
Абазначэнне: **QT**.
Падтып: **QT, QT_IOLINK**.
Каналы ўводу/высновы: **AI** – _1_.

Абазначэнне: **QT**.
Падтып: **QT_OK**.
Каналы ўводу/высновы: **AI** – _1_, **DI** - _1_.

Прыклад: **OBJ1+-QT1**. Аб'ект 1. Датчык праводнасці.

#### 6.2.10 TE. Тэмпература ####
Абазначэнне: **TE**.
Падтып: **TE**, **TE_IOLINK**, **TE_ANALOG**.
Каналы ўводу/высновы: **AI** – *1*.
Прыклад: **+OBJ1-TE1**. Аб'ект №1. Тэмпература.

#### 6.2.11 SB. Кнопка ####
Абазначэнне: **SB**.
Каналы ўводу/высновы: **DI** – *1*.
Прыклад: **+OBJ1-SB1**. Аб'ект №1. У дрэнаж.

#### 6.2.12 V. Клапан ####
Абазначэнне: **V**.
Каналы ўводу/высновы:
1. V_DO1: **DO** - _1_;
2. V_DO2: **DO** - _2_;
- **DO** - _Закрыць_
- **DO** - _Адкрыць_
3. V_DO1_DI1_FB_OFF, V_DO1_DI1_FB_ON: **DO** - _1_, **DI** - _1_;
4. V_DO1_DI2: **DO** - _1_, **DI** - _2_;
- **DI** - _Закрыты_
- **DI** - _Адкрыты_
5. V_DO2_DI2, V_DO2_DI2_BISTABLE: **DO** - _2_; **DI** - _2_;
- **DO** - _Закрыць_
- **DO** - _Адкрыць_
- **DI** - _Закрыты_
- **DI** - _Адкрыты_
6. V_MIXPROOF: **DO** - _3_; **DI** - _2_;
- **DO** - _Адкрыць_
- **DO** - _Адкрыць НС_
- **DO** - _Адкрыць нд_
- **DI** - _Закрыты_
- **DI** - _Адкрыты_
7. V_BOTTOM_MIXPROOF: **DO** - _3_; **DI** - _2_;
- **DO** - _Адкрыць_
- **DO** - _Адкрыць міні_
- **DO** - _Адкрыць НС_
- **DI** - _Закрыты_
- **DI** - _Адкрыты_
8. V_IOLINK_MIXPROOF, V_AS_MIXPROOF, V_AS_DO1_DI2, V_IOLINK_DO1_DI2: **AO** - _1_, **AI** - _1_;
9. V_IOLINK_VTUG_DO1: **AO** - _1_;
10. V_IOLINK_VTUG_DO1_FB_OFF, V_IOLINK_VTUG_DO1_FB_ON: **AO** - _1_, **DI** - _1_.
11. V_IOLINK_VTUG_DO1_DI2: **AO** - _1_, **DI** - _2_.
- **DI** - _Закрыты_
- **DI** - _Адкрыты_
12. V_MINI_FLUSHING: **DO** - _2_; **DI** - _2_;
- **DO** - _Адкрыць_
- **DO** - _Адкрыць міні_
- **DI** - _Закрыты_
- **DI** - _Адкрыты_
13. V_IOL_TERMINAL_MIXPROOF_DO3: **AO** - _3_;
- **AO** - _Адкрыць_
- **AO** - _Адкрыць верхняе сядло_
- **AO** - _Адкрыць ніжняе сядло_

Прыклад: **+OBJ1-V7**. Аб'ект №1. Дрэнаж.

#### 6.2.13 VC. Кіраваны клапан ####
Абазначэнне: **VС**.
Каналы ўводу/высновы: **AO** – *1*.
Прыклад: **VC3**. Паравы клапан.

#### 6.2.14 DO. Кіраўнік (выхадны) сігнал ####
Абазначэнне: **DO**.
Каналы ўводу/высновы: **DO** – *1*.
Прыклад: **OBJ2+-DO2**. Аб'ект 2. Гатоўнасць аб'екта

#### 6.2.15 DI. Уваходны сігнал ####
Абазначэнне: **DI**.
Каналы ўводу/высновы: **DI** – *1*.
Прыклад: **DI10**. Прымач гатовы.

#### 6.2.16 AO. Выходная велічыня ####
Абазначэнне: **AO**.
Каналы ўводу/высновы: **AO** – *1*.
Прыклад: **AO1**. Заданне прадукцыйнасці.

#### 6.2.17 AI. Выходная велічыня ####
Абазначэнне: **AI**.
Каналы ўводу/высновы: **AI** – *1*.
Прыклад: **AI1**. Ток рухавіка.

#### 6.2.18 WT. Датчык вагі ####
Абазначэнне: **WT**.
Каналы ўводу/высновы: **AI** – *2*.
Прыклад: **WT1**. Шалі танка 1.

Падтып: **WT_RS232**.
Каналы ўводу/высновы: **AI** – *1*, **AO** - *1*.

Падтып: **WT_ETH**.
Каналы ўводу/высновы: адсутнічаюць.

Падтып: **WT_PXC_AXL**.
Каналы ўводу/высновы: **AI** – *1*, **AO** - *1*.

#### 6.2.19 PT. Датчык ціску ####
Абазначэнне: **PT**.
Падтып: **PT**, **PT_IOLINK**,
Каналы ўводу/вываду: **AI** – *1*.
Прыклад: **OBJ1+-PT10**. Аб'ект 1. Датчык ціску.

#### 6.2.20 Y (DEV_VTUG). Пнеўмавостраў Festo ####
Абазначэнне: **Y**, **DEV_VTUG** - старыя праекты.
Каналы ўводу/высновы: **AO** – *1*. (AOAI)
Прыклад: **OBJ1+CAB1-Y1**. Праект OBJ1, шафа №1, прылада пнеўмавостраў Festo.

#### 6.2.21 F. Аўтаматычны выключальнік ####
Абазначэнне: **F**.
Каналы ўводу/высновы: **AI** - *1*, **AO** - *1* (AOAI)
Прыклад: **OBJ1+CAB1-F1**. Праект OBJ1, шафа №1, прылада аўтаматычны выключальнік.

#### 6.2.22 C. ПІД-рэгулятар ####
Абазначэнне: Любое абазначэнне прылады, з сімвалам - **C** на крайняй пазіцыі.
Каналы ўводу/высновы: адсутнічаюць, віртуальная прылада. Толькі ўнутраныя параметры.</br>
Падтып: **C_PID**(Або пусты радок), **C_THLD**.</br>
Прыклад: **OBJ1+TANK1-TC1**. Праект OBJ1, Танк №1, ПІД-рэгулятар тэмпературы танка №1.

#### 6.2.23 HLA. Сігнальная калона ####
Абазначэнне: **HLA**.

Падтып: **HLA** ці пусты (_аналаг HLA_).
Каналы ўводу/высновы: **DO** - 4 (_чырвоны, жоўты, зялёны і сірэна_).

Падтып: **HLA_VIRT**
Каналы ўводу/высновы: 0

Падтып: **HLA_IOLINK**
Каналы ўводу/высновы:**AI** - *1*, **AO** - *1* (AOAI)

Прыклад: **OBJ1+TANK1-HLA1**. Праект OBJ1, танк №1, сігнальная калона №1.

У сігнальнай калоне выкарыстоўваецца тры лямпачкі - зялёная, жоўтая, чырвоная - і сірэна.

Які мігціць чырвоны колер - аварыя, трывога (*непрыгнечаная*). Частата мігцення * 2 * Гц.
Дадаткова ўключаецца сірэна, якую можна адключыць з праекту (_клік па значку_) альбо яна таксама адключыцца пасля пацверджання трывог, знікненні аварый.

Мігатлівае жоўтае святло - непацверджанае паведамленне. Частата мігцення *0.5* Гц.

Зялёны колер - ёсць уключаныя аперацыі (апарата).

#### 6.2.24 CAM. Камера ####
Абазначэнне: **CAM**.
Каналы ўводу/высновы:
1. CAM_DO1_DI1 - **DO** - _1_, **DI** - _1_;
2. CAM_DO1_DI2 - **DO** - _1_, **DI** - _2_;
3. CAM_DO1_DI3 - **DO** - _1_, **DI** - _3_.

Назва каналаў: **DO** - _сігнал актывацыі_. **DI** - _гатоўнасць_, _вынік апрацоўкі 1_, _вынік апрацоўкі 2_.
Прыклад: **OBJ1+LINE1-CAM1**. Праект OBJ1, лінія №1, камера №1.

#### 6.2.25 PDS. Сігнальны датчык розніцы ціску ####
Абазначэнне: **PDS**.
Каналы ўводу/высновы: **DI** – *1*.
Прыклад: **+OBJ2-PDS1**. Аб'ект №2. Сігнальны датчык розніцы ціску.

#### 6.2.26 TS. Сігнальны датчык тэмпературы ####
Абазначэнне: **TS**.
Каналы ўводу/высновы: **DI** – *1*.
Прыклад: **+OBJ2-TS1**. Аб'ект №2. Сігнальны датчык тэмпературы.

#### 6.2.27 G. Блок харчавання з аўтаматычным выключальнікам ####
Абазначэнне: **G**.
Каналы ўводу/высновы: **AI** - *1*, **AO** - *1* (AOAI)
Прыклад: **OBJ1+CAB1-G1**. Праект OBJ1, шафа №1, прылада аўтаматычны выключальнік.

#### 6.2.28 WATCHDOG. Прылада праверкі сувязі ####
Абазначэнне: **WATCHDOG**.
Прыклад: **+OBJ2-WATCHDOG1**. Аб'ект №2. Прылада праверкі сувязі.

#### 6.2.29 EY Пераўтваральнік IO-Link ####
Абазначэнне: **EY**.
Прыклад: **+OBJ2-EY1**. Аб'ект №2. Пераўтваральнік IO-Link.

Падлучэнне прылад ажыццяўляецца па аналогіі з пнеўмавостравам.
Да пераўтваральніка можна падлучыць прыладу з падтыпамі (*_EY): **AO_EY**, **VC_EY**.
Пры падлучэнні прылад да пераўтваральніка аўтаматычна запаўняецца ўласцівасць `TERMINAL` з назовам пераўтваральніка і
`R_EY_NUMBER` з нумарам канала пераўтваральніка.

### 6.3 Дадатковыя параметры ###
Дадатковыя параметры паказваюцца праз уласцівасці прылады.

Параметры і ўласцівасці прылады(Дап.палі 3 і 4) можна запоўніць у дрэве прылад("Eplaner" -> "Прылады, параметры аб'ектаў"). Для гэтага неабходна ўключыць адлюстраванне параметраў і ўласцівасцяў аб'ектаў. Змененыя параметры і ўласцівасці адразу захоўваюцца ў прыладзе на схеме.

<p align="center"><img src="images/edit_parameters_properties.png"></p>

<p align="center"><b>Рысунак</b> - <i>Рэдагаванне параметраў і ўласцівасцяў у дрэве прылад</i></p>


#### 6.3.1 Апісанне прылады ###
У полі "Заўвага" запісваецца апісанне прылады. Прыклад прыведзены ніжэй.

<p align="center"><img src="images/dev_note.png"></p>

<p align="center"><b>Рысунак</b> - <i>Запіс апісання прылады</i></p>

#### 6.3.2 Прызначэнне дадатковых палёў ####
1. **Доп. поле [1]**. Вызначае апрацоўваць ці не дадзенае прылада пры экспарце для PAC (_напрыклад, ручная засланка не кіруецца аўтаматычна_). Калі яно змяшчае значэнне - **1**, то дадзеная прылада не апрацоўваецца. Ці можна зняць галачку "<em>Галоўная функцыя</em>" ля прылады.</p>
2. **Доп. поле [2]**. Вызначае падтып прылады. Апісанне:

| Параметр                    | Апісанне                                                                                                             |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------- |
| NONE                        | Падтып не вызначаны.                                                                                                 |
| V_DO1                       |Клапан з адным каналам кіравання.                                                                                   |
| V_DO2                       | Клапан з двума каналамі кіравання.                                                                                  |
| V_DO1_DI1_FB_OFF            | Клапан з адным каналам кіравання і адной зваротнай сувяззю (*выключаны стан*).                                 |
| V_DO1_DI1_FB_ON             |Клапан з адным каналам кіравання і адной зваротнай сувяззю (*уключаны стан*).                                  |
| V_DO1_DI2                   | Клапан з адным каналам кіравання і двума зваротнымі сувязямі.                                                         |
  | V_DO2_DI2                   | Клапан з двума каналамі кіравання і двума зваротнымі сувязямі.                                                        |
| V_MIXPROOF                  | Клапан супрацьзмешвальны (*2 канала кіравання і 2 зваротныя сувязі*).                                                |
| V_IOLINK_MIXPROOF           | Клапан супрацьзмешвальны з **IO-Link**.                                                                             |
| V_AS_MIXPROOF               | Клапан супрацьзмешвальны з **AS інтэрфейсам**.                                                                      |
| V_BOTTOM_MIXPROOF           | Клапан з прамываннем і двума зваротнымі сувязямі (донны).                                                               |
| V_AS_DO1_DI2                | Клапан з адным каналам кіравання і двума зваротнымі сувязямі з **AS інтэрфейсам**.                                    |
| V_IOLINK_DO1_DI2            | Клапан з адным каналам кіравання і двума зваротнымі сувязямі з **IO-Link**.                                           |
| V_DO2_DI2_BISTABLE          | Клапан з двума каналамі кіравання і двума зваротнымі сувязямі бістабільны.                                           |
| V_IOLINK_VTUG_DO1           | **IO-Link VTUG** клапан з адным каналам кіравання.                                                                  |
| V_IOLINK_VTUG_DO1_FB_OFF    | **IO-Link VTUG** клапан з адным каналам кіравання і адной зваротнай сувяззю (*выключаны стан*).                |
| V_IOLINK_VTUG_DO1_FB_ON     | **IO-Link VTUG** клапан з адным каналам кіравання і адной зваротнай сувяззю (*уключаны стан*).                 |
| V_IOLINK_VTUG_DO1_DI2       | **IO-Link VTUG** клапан з адным каналам кіравання і двума зваротнымі сувязямі (*уключаны і выключаны стану*). |
| V_VIRT                      | Віртуальны клапан.                                                                                                  |
| V_MINI_FLUSHING             | Клапан з мініклапанам прамывання і двума зваротнымі сувязямі.                                                            |
| V_IOL_TERMINAL_MIXPROOF_DO3 | Супрацьзмешвальны клапан з кіраванне ад пнеўмавострава IO-Link                                                      |
| LS_MIN                      | Гранічны ўзровень па схеме мінімум.                                                                                 |
| LS_MAX                      | Гранічны ўзровень па схеме максімум.                                                                                |
| LS_IOLINK_MIN               | **IO-Link** ўзровень. Падлучэнне па схеме мінімум.                                                                   |
| LS_IOLINK_MAX               | **IO-Link** ўзровень. Падлучэнне па схеме максімум.                                                                  |
| LS_VIRT                     | Віртуальны датчык гранічнага ўзроўню.                                                                               |
| TE                          | Тэмпература.                                                                                                         |
| TE_IOLINK                   | Тэмпература **IO-Link** без дадатковых параметраў.                                                               |
| TE_VIRT                     | Віртуальны датчык тэмпературы.                                                                                      |
  | TE_ANALOG                   | Аналагавы датчык тэмпературы 4-20 мА.                                                                               |
| M                           | Матор без кіравання частатой кручэння.                                                                              |
| M_FREQ                      | Матор з кіраваннем частатой кручэння.                                                                               |
| M_REV                       | Матор з рэверсам (*сумесны*) без кіравання частатой кручэння.                                                    |
| M_REV_FREQ                  | Матор з рэверсам (*сумесны*) з кіраваннем частатой кручэння.                                                     |
| M_REV_2                     | Матор з рэверсам (*асобны*) без кіравання частатой кручэння.                                                     |
| M_REV_FREQ_2                | Матор з рэверсам (*асобны*) з кіраваннем частатой кручэння.                                                      |
| M_REV_2_ERROR               | Матор з рэверсам (*асобны*). Асобны сігнал аварыі.                                                             |
| M_REV_FREQ_2_ERROR          | Матор з рэверсам з кіраваннем частатой кручэння. Рэверс уключаецца асобна. Асобны сігнал памылкі.               |
| M_ATV                       | Матор, кіраваны частотным пераўтваральнікам Altivar. Сувязь з ПП па Ethernet. Рэверс і аварыі апцыянальныя.          |
| M_VIRT                      | Віртуальны матор.                                                                                                   |
| M_ATV_LINEAR                | Аналагічна M_ATV, толькі есць параметры для разліку лінейнай хуткасці.                                               |
| FQT                         | Лічыльнік.                                                                                                            |
| FQT_F                       | Лічыльнік з выдаткам.                                                                                                  |
| FQT_VIRT                    | Віртуальны лічыльнік (*без прывязкі да модуляў*).                                                                      |
| FQT_IOLINK                  | Лічыльнік з выдаткам IO-Link.                                                                                          |
| QT                          | Канцэнтратамер.                                                                                                      |
| QT_OK                       | Канцэнтратамер з дыягностыкай.                                                                                       |
| QT_IOLINK                   | **IO-Link** канцэнтратамер.                                                                                          |
| QT_VIRT                     | Віртуальны канцэнтратамер.                                                                                   |
| LT                          | Датчык бягучага ўзроўню.                                                                               |
| LT_CYL                      | Датчык ўзроўню для танка цыліндрычнай формы.                                                                   |
| LT_CONE                     | Датчык ўзроўню для цыліндрычнага танка з дном у форме конусу.                                                     |
| LT_TRUNC                    | Датчык бягучага ўзроўню для танка з дном у форме ўсечанага конусу.                                                   |
| LT_IOLINK                   | **IO-Link** бягучы ўзровень з магчымасцю задання параметраў для танка.                                             |
| LT_VIRT                     | Віртуальны датчык бягучага ўзроўню.                                                                                  |
| DI                          | Дыскрэтны ўваходны сігнал.                                                                                          |
| DI_VIRT                     | Віртуальны дыскрэтны ўваходны сігнал.                                                                               |
| АI                          | Аналагавы ўваходны сігнал.                                                                                           |
| АI_VIRT                     | Віртуальны аналагавы ўваходны сігнал.                                                                               |
| DO                          | Дыскрэтны ўваходны сігнал.                                                                                           |
| DO_VIRT                     | Віртуальны дыскрэтны ўваходны сігнал.                                                                               |
| АО                          | Аналагавы выходны сігнал.                                                                                          |
| АО_VIRT                     | Віртуальны аналагавы выходны сігнал.                                                                              |
| Y                           | Пнеўмавостраў Festo.                                                                                                  |
| DEV_VTUG_8                  | SPECIAL Festo valve terminal (16 клапанаў).                                                                          |
| DEV_VTUG_16                 | SPECIAL Festo valve terminal (32 клапана).                                                                           |
| DEV_VTUG_24                 | SPECIAL Festo valve terminal (48 клапанаў).                                                                          |
| PT                          | Датчык ціску.                                                                                                     |
| PT_IOLINK                   | **IO-Link** датчык ціску.                                                                                        |
| PT_VIRT                     | Віртуальны датчык ціску.                                                                                         |
| F                           | **IO-Link** аўтаматычны выключальнік.                                                                              |
| F_VIRT                      | Віртуальны аўтаматычны выключальнік.                                                                              |
| VC                          | Аналагавы клапан.                                                                                                   |
| VC_IOLINK                   | **IO-Link** аналагавы клапан.                                                                                       |
| VC_VIRT                     | Віртуальны аналагавы клапан.                                                                                       |
| HLA                         | Дыскрэтная сігнальная калона (*4 DO сігналу на кожны з кветак і сірэну*).                                         |
| HLA_VIRT                    | Віртуальная сігнальная калона.                                                                                      |
| HLA_IOLINK                  | IO-Link сігнальная калона.                                                                                          |
| FS                          | Датчык наяўнасці патоку.                                                                                               |
| FS_VIRT                     | Віртуальны датчык наяўнасці патоку.                                                                                   |
| GS                          | Датчык становішча.                                                                                                    |
| GS_VIRT                     | Віртуальны датчык становішча.                                                                                        |
| GS_INVERSE                  | Датчык становішча інверсны (0 – актыўнае значэнне).                                                                  |
| HA                          | Сірэна.                                                                                                              |
| HA_VIRT                     | Віртуальная сірэна.                                                                                                  |
| HL                          | Сігнальная лямпа.                                                                                                    |
| HL_VIRT                     | Віртуальная сігнальная лямпа.                                                                                        |
| SB                          | Кнопка.                                                                                                              |
| SB_VIRT                     | Віртуальная кнопка.                                                                                                  |
| WT                          | Шалі.                                                                                                                |
| WT_VIRT                     | Віртуальныя шалі.                                                                                                    |
| WT_RS232                    | Шалі з інтэрфейсам RS-232.                                                                                           |
| WT_ETH                      | Шалі з ethernet.                                                                                                     |
| WT_PXC_AXL                  | Шалі Axioline F (для модуляў Phoenix Contact).                                                                       |
| CAM_DO1_DI1                 | Камера з сігналам актывацыі і вынікам апрацоўкі.                                                                 |
| CAM_DO1_DI2                 | Камера з сігналам актывацыі, вынікам апрацоўкі і гатоўнасцю.                                                    |
| CAM_DO1_DI3                 | Камера з сігналам актывацыі, двума вынікамі апрацоўкі і гатоўнасцю.                                             |
| PDS                         | Сігнальны датчык розніцы ціску.                                                                                  |
| PDS_VIRT                    | Віртуальны сігнальны датчык розніцы ціску.                                                                      |
| TS                          | Сігнальны датчык тэмпературы.                                                                                       |
| TS_VIRT                     | Віртуальны сігнальны датчык тэмпературы.                                                                           |
| C_PID                       | ПІД-рэгулятар.                                                                                                      |
| C_THLD                      | Парогавы рэгулятар.                                                                                                 |
| G_IOL_4                     | **IO-Link** блок харчавання на 4 канала з аўтаматычным выключальнікам.                                                  |
| G_IOL_8                     | **IO-Link** блок харчавання на 8 канала з аўтаматычным выключальнікам.                                                  |
| WATCHDOG                    | Прылада праверкі сувязі                                                                                            |
| DEV_CONV_AO2                | Канвэртар **IO-Link** -> **AO** (2 каналы).                                                                          |


Разгортка прыведзена ніжэй:

<p align="center"><img src="images/dev_supl_field_2.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад дадання тыпу прылады</i></p>

3. **Дад. поле [3]**. Вызначае дадатковыя параметры.
Параметры прызначаюцца наступным чынам: **“parameter_name”=“parameter_value”**.

<p align="center"><img src="images/dev_supl_field_3.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад дадання дадатковых параметраў да прылады</i></p>

Спіс параметраў прыведзены ніжэй.

<table>
    <thead>
        <tr>
            <th> <p align="center"> <b> Тып
            <th> <p align="center"> <b> Параметр
            <th> <p align="center" colspan = 2> <b> Заўвага
        </tr>
    </thead>
    <thbody>
        <tr> <td> <b>
        V
            <td> <b> P_ON_TIME <td> Час уключэння, <i>мс</i> (<i>для клапанаў з зваротнай сувяззю</i>)
        <tr> <td rowspan = 3> <b>
        AI
            <td> <b> P_C0    <td> Зрух за нуль <tr>
            <td> <b> P_MIN_V <td> Мінімальнае значэнне <tr>
            <td> <b> P_MAX_V <td> Максімальнае значэнне
        <tr> <td rowspan = 2> <b>
        AO
            <td> <b> P_MIN_V <td> Мінімальнае значэнне <tr>
            <td> <b> P_MAX_V <td> Максімальнае значэнне
        <tr> <td> <b>
        FS  
            <td> <b> P_DT <td> Час парогавага фільтра, <i>мс Час парогавага фільтра, <i>мс</i>
        <tr> <td rowspan = 3> <b>
        QT
            <td> <b> P_C0    <td> Зрух за нуль <tr>
            <td> <b> P_MIN_V <td> Мінімальнае значэнне <tr>
            <td> <b> P_MAX_V <td> Максімальнае значэнне
        <tr> <td> <b>
        QT_IOLINK
            <td> <b> P_ERR <td> Аварыйнае значэнне
        <tr> <td> <b>
        GS
            <td> <b> P_DT <td> Час парогавага фільтра, <i>мс</i>
        <tr> <td> <b>
        LS
            <td> <b> P_DT <td> Час парогавага фільтра, <i>мс</i>
        <tr><td><b>
        LS_IOLINK
            <td> <b> P_ERR <td> Аварыйнае значэнне
        <tr> <td> <b>
        DI
            <td> <b> P_DT <td> Час парогавага фільтра, <i>мс</i>
        <tr> <td rowspan = 2> <b>
        LT
            <td> <b> P_C0  <td> Зрух за нуль <tr>
            <td> <b> P_ERR <td> Аварыйнае значэнне ўзроўню
        <tr> <td rowspan = 4> <b>
        LT_CYL
            <td> <b> P_C0    <td> Зрух за нуль <tr>
            <td> <b> P_MAX_P <td> Ціск на які настроены датчык, <i>бар</i> <tr>
            <td> <b> P_R     <td> Радыус танка, <i>м</i> <tr>
            <td> <b> P_ERR   <td> Аварыйнае значэнне ўзроўню
        <tr> <td rowspan = 5> <b>
        LT_CONE
            <td> <b> P_C0     <td> Зрух за нуль <tr>
            <td> <b> P_MAX_P  <td> Ціск на які настроены датчык, <i>бар</i> <tr>
            <td> <b> P_R      <td> Радыус танка, <i>м</i> <tr>
            <td> <b> P_H_CONE <td> Вышыня канічнай часткі танка, <i>м</i> <tr>
            <td> <b> P_ERR    <td> Аварыйнае значэнне ўзроўню
        <tr> <td rowspan = 5> <b>
        LT_TRUNC
            <td> <b> P_C0      <td> Зрух за нуль <tr>
            <td> <b> P_MAX_P   <td> Ціск на які настроены датчык, <i>бар</i> <tr>
            <td> <b> P_R       <td> Радыус танка, <i>м</i> <tr>
            <td> <b> P_H_TRUNC <td> Вышыня ўсечанай часткі танка, <i>м</i> <tr>
            <td> <b> P_ERR     <td> Аварыйнае значэнне ўзроўню
        <tr> <td rowspan = 5> <b>
        LT_IOLINK
            <td> <b> P_C0      <td> Зрух за нуль <tr>
            <td> <b> P_MAX_P   <td> Ціск на які настроены датчык, <i>бар</i> <tr>
            <td> <b> P_R       <td> Радыус танка, <i>м</i> <tr>
            <td> <b> P_H_CONE  <td> Вышыня канічнай часткі танка, <i>м</i> (па змаўчанні - 0) <tr>
            <td> <b> P_ERR     <td> Аварыйнае значэнне ўзроўню
        <tr> <td rowspan = 2> <b>
        TE
            <td> <b> P_C0  <td> Зрух за нуль <tr>
            <td> <b> P_ERR <td> Аварыйнае значэнне тэмпературы
        <tr> <td rowspan = 2> <b>
        TE_IOLINK
            <td> <b> P_C0  <td> Зрух за нуль <tr>
            <td> <b> P_ERR <td> Аварыйнае значэнне тэмпературы
        <tr> <td rowspan = 4> <b>
        TE_ANALOG
            <td> <b> P_C0  <td> Зрух за нуль <tr>
            <td> <b> P_ERR <td> Аварыйнае значэнне тэмпературы <tr>
            <td> <b> P_MIN_V <td> Мінімальнае значэнне <tr>
            <td> <b> P_MAX_V <td> Максімальнае значэнне
        <tr> <td> <b>
        М (акрамя M_ATV_LINEAR)
            <td> <b> P_ON_TIME <td> Час уключэння, <i>мс</i>
        <tr> <td rowspan = 3> <b>
        M_ATV_LINEAR
            <td> <b> P_ON_TIME         <td> Час уключэння, <i>мс</i> <tr>
            <td> <b> P_SHAFT_DIAMETER  <td> Дыяметр вала, <i>м</i> <tr>
            <td> <b> P_TRANSFER_RATIO  <td> Перадаткавы лік
        <tr> <td rowspan = 5> <b>
        FQT_F
            <td> <b> P_MIN_F        <td> Мінімальнае значэнне патоку <tr>
            <td> <b> P_MAX_F        <td> Максіяльнае значэнне патоку <tr>
            <td> <b> P_C0           <td> Зрух за нуль <tr>
            <td> <b> P_DT           <td> Час чакання з'яўлення выдатку пасля ўключэння звязанай помпы, <i>мс<tr>
            <td> <b> P_ERR_MIN_FLOW <td> Параметр для апрацоўкі памылкі рахункі імпульсаў
        <tr> <td rowspan = 3> <b>
        FQT_IOLINK
            <td> <b> P_C0           <td> Зрух за нуль <tr>
            <td> <b> P_DT           <td> Час чакання з'яўлення выдатку пасля ўключэння звязанай помпы, <i>мс<tr>
            <td> <b> P_ERR_MIN_FLOW <td> Параметр для апрацоўкі памылкі рахункі імпульсаў
        <tr> <td rowspan = 4> <b>
        WT
            <td> <b> P_C0  <td> Зрух за нуль, <i>кг<tr>
            <td> <b> P_DT  <td> Дакладнасць датчыка, <i>кг</i> (для фільтрацыі) <tr>
            <td> <b> P_NOMINAL_W  <td> Намінальная вага, <i>кг<tr>
            <td> <b> P_RKP  <td> Рабочы каэфіцыент перадачы, <i>мВ/В</i>
        <tr> <td rowspan = 1> <b>
        WT_RS232
            <td> <b> PC_0 <td> Зрух за нуль
        <tr> <td rowspan = 1> <b>
        WT_ETH
            <td> <b> PC_0 <td> Зрух за нуль
        <tr> <td rowspan = 3> <b>
        WT_PXC_AXL
              <td> <b> P_DT <td> Час парогавага фільтра <tr>
            <td> <b> P_C0 <td> Зрух за нуль <tr>
            <td> <b> P_K <td> Каэфіцыент прапарцыйнасці
        <tr> <td rowspan = 3> <b>
        PT
            <td> <b> P_C0 <td> Зрух за нуль <tr>
            <td> <b> P_MAX_V <td> Максімальнае значэнне <tr>
            <td> <b> P_MIN_V <td> Мінімальнае значэнне
        <tr> <td rowspan = 1> <b>
        PT_IOLINK
            <td> <b> P_ERR <td> Аварыйнае значэнне
        <tr> <td rowspan = 17> <b>
        C_PID<br>(ПІД-рэгулятар)
            <td> <b>                     <td> <p align=center> Апісанне - значэнне па змаўчанні <tr>
            <td> <b> P_k                 <td> Каэфіцыент узмацнення – 1 <tr>
            <td> <b> P_Ti                <td> Час інтэгравання – 15 <tr>
            <td> <b> P_Td                <td> Час дыферэнцыявання - 0.01 <tr>
            <td> <b> P_dt                <td> Інтэрвал разліку – 1000 мс. <tr>
            <td> <b> P_max               <td> Максіміяльнае ўваходнае значэнне - 100 (адз. вымярэння датчыка) <tr>
            <td> <b> P_min               <td>Мінімальнае ўваходнае значэнне - 0 (адз. вымярэння датчыка) <tr>
            <td> <b> P_acceleration_time <td> Час выхаду на рэжым рэгулявання – 30 <i>с</i> <tr>
            <td> <b> P_is_manual_mode    <td> Ручны рэжым – 0 (false)<tr>
            <td> <b> P_U_manual          <td> Зададзенае ручное значэнне – 65% <tr>
            <td> <b> P_k2                <td> Каэфіцыент узмацнення 2 – 0 <tr>
            <td> <b> P_Ti2               <td> Час інтэгравання 2 – 0 <tr>
            <td> <b> P_Td2               <td> Час дыферэнцыявання 2 – 0 <tr>
            <td> <b> P_out_max           <td> Максімальнае выходнае значэнне – 100% <tr>
            <td> <b> P_out_min           <td> Мінімальнае выходнае значэнне – 0% <tr>
            <td> <b> P_is_reverse        <td> Вынахад зваротнага дзеяння – 0 (false) <tr>
            <td> <b> P_is_zero_start     <td> Нулявое стартавае значэнне – 1 (true)
        <tr> <td rowspan = 2> <b>
        C_THLD<br>(рэгулятар парога)
            <td> <b> P_is_reverse <td> Вынахад зваротнага дзеяння (1 - true, 0 - false). Задае вектар змены вымяранай велічыні. <tr>
            <td> <b> P_delta <td> Дэльта спрацоўвання. <tr>
        <tr> <td> <b>
        CAM
            <td> <b> P_READY_TIME <td> Лімітавы час адсутнасці гатоўнасці да працы, з (для <i>CAM_DO1_DI2</i> и <i>CAM_DO1_DI3</i>)
        <tr> <td rowspan = 2> <b>
        WATCHDOG
            <td> <b> P_T_GEN <td> Інтэрвал генерацыі выходных імпульсаў, <i>мс</i> <tr>
            <td> <b> P_T_ERR <td> Інтэрвал чакання змены ўваходу, <i>мс</i>
    </thbody>
</table>

4. **Доп. поле [4]**. Вызначае дадатковыя ўласцівасці. Яны задаюцца ў наступным выглядзе: **«імя_уласцівасці»=«’значэнне_ уласцівасці’»**. Спіс уласцівасцяў апісаны ніжэй. Калі няма значэння ўласцівасці, тое яно ўсталёўваецца ў пустое значэнне (_напрыклад, злучаная помпа для лічыльніка – **MT=''**_). Для некаторых устройсв даступна даданне некалькіх значэнняў у некаторыя ўласцівасці праз коску (_напрыклад, **MT='dev1,dev2'**_), такія ўласцівасці будуць адзначаны __*__ у спісе ніжэй.

<table>
    <thhed>
        <th> <p align="center"> <b> Тып
        <th> <p align="center"> <b> Уласцівасці
        <th> <p align="center" colspan = 2> <b> Заўвага
    </thhed>
    <thbody>
    <tr> <td rowspan = 1>
    FQT
        <td> <b> MT <td> Помпы, якія пампуюць праз дадзены лічыльнік. Неабходныя для аналізу працаздольнасці лічыльніка (помпа працуе – лічыльнік павінен паказваць выдатак)
    <tr> <td rowspan = 1>
    LT_IOLINK
        <td> <b> PT <td> Датчык ціску, які паказвае дадатковы залішні ціск. Неабходны для карэкцыі паказанняў (з значэння асноўнага датчыка адымаецца дадзены залішні ціск)
    </thbody>
    <tr> <td rowspan = 1>
    DO
        <td> <b> DST <td> Атрымальнік сігналу
    </thbody>
    <tr> <td rowspan = 1>
    DI
        <td> <b> PT <td> Адпраўнік сігнал
    </thbody>
    <tr> <td rowspan = 1>
    M
        <td> <b> IP <td> IP-адрас для частотнага пераўтваральніка, які кіруецца праз Ethernet (M_ATV, M_ATV_LINEAR) па шаблоне: _IP='-.-.-.-'_
    </thbody>
    <tr> <td rowspan = 2>
    Регулятор (С)
      <td> <b> IN_VALUE <td> Прылада, якое задае ўваходную велічыню для рэгулятара (датчык, сігнал AI) <tr>
        <td> <b> OUT_VALUE <td> Прылада, якое задае ўваходную велічыню для рэгулятара (датчык, сігнал AI)
    </thbody>
    <tr> <td rowspan = 1>
    CAM
        <td> <b> IP <td> IP-адрас камеры: IP='-.-.-.-'
    </thbody>
    <tr> <td rowspan = 1>
    HLA_VIRT, HLA_IOLINK
        <td> <b> SIGNALS_SEQUENCE
        <td> Паслядоўнасць сігналаў (лямпачак) і сірэны на сігнальнай калоне, пачынальна з ніжняга элемента (<i>заўв., SIGNALS_SEQUENCE='ABGYR'</i>). <b>A</b> - сірэна, <b>B</b> - сіняя лямпа, <b>G</b> - зялёная лямпа, <b>Y</b> - жоўтая лямпа, <b>R</b> - чырвоная лямпа. <b>Правілы</b>: дубляваць сімвалы нельга, а даўжыня паслядоўнасці павінна быць ад <b>1</b> да <b>5</b> сімвалаў (г.зн. наяўнасць кампанента сігнальнай калоны - абавязкова</i>).
    </thbody>
    <tr> <td rowspan = 4>
    WATCHDOG
        <td> <b> DI_dev <td> Сігнал DI. Прыём сігналу ад іншага кантролера. <tr>
        <td> <b> AI_dev <td> Сігнал AI. Прыём сігналу ад іншага кантролера. <tr>
        <td> <b> DO_dev <td> Сігнал DO. Перадача сігналу ў іншы кантролер. <tr>
        <td> <b> AO_dev <td> Сігнал AO. Перадача сігналу ў іншы кантролер.
    </thbody>
    <tr> <td rowspan = 1>
    [*EY] <br> AO_EY <br> VC_EY
        <td> <b> TERMINAL <td> Пераўтваральнік, да якога прывязана прылада
    </thbody>
</table>


5. **Доп. поле [5]**. Вызначае дадатковыя працоўныя параметры. Рабочыя параметры заўсёды ўстанаўліваюцца пры загрузцы кантролера, яны захоўваюцца ў аператыўнай памяці і не перадаюцца на сервер. Рабочыя параметры задаюцца ў наступным выглядзе: **«імя_працоўнага_параметра»=«значэнне_працоўнага_параметра»**. Спіс працоўных параметраў прыведзены ніжэй.

* ___V___
  * **R_AS_NUMBER** - AS-нумар, з адзінкі. (_Для клапанаў з **AS-інтэрфейсам**_).
  * **R_VTUG_NUMBER** - VTUG-нумар, з адзінкі. (_Для клапанаў з **IO-Link інтэрфейсам**_, у новым тыпе прывязкі пнеўмавострава задаецца аўтаматычна).
* ___HLA___
    * **R_CONST_RED** - Тып чырвонага сігналу прылады пры падачы на ​​яго сігналу DO. (_Пастаянны або мігатлівы)_. Паказваем **1** - калі перарывісты, **0** - калі пастаянны.

* ___VC_EY___, ___AO_EY___ (***EY**)
    * **R_EY_NUMBER** - Нумар канала ў IO-Link пераўтваральніку **EY**.

    ### 6.4 Вырабы прылад ###
    Надбудова кантралюе заданне вырабаў у прыладах. Гэта трэба для больш поўнага апісання праектаў, а таксама для карэктнага разліку IO-Link адрасоў прылад (для IO-Link прылад) і генераванні файлаў праекта.

Вырабы не правяраюцца ў прыладах наступных тыпаў: __VC__ (*акрамя **VC_IOLINK***), __M__ (*акрамя **M_ATV, M_ATV_LINEAR***), __DI__, __DO__, __AI__, __AO__, __C__, __CAM__ і ва ўсіх віртуальных подти.

Спіс IO-Link прылад (іх вырабаў) утрымоўваецца ў файле _sys_iolink_devices.lua_. У гэтым файле можна дадаць новыя вырабы (калі такіх не было раней у праектах), задаць для іх вобласці ўводу-высновы. Гэта дазволіць сістэме карэктна разлічыць IO-Link адрасы прылад.

Дадаваць новыя дадзеныя ў файл можна ў любы момант, але яны прымяняюцца толькі пасля закрыцця і паўторнага адкрыцця праграмы EPLAN.

Спіс падтрымліваемых вырабаў з абласцямі ўводу-вываду:

| Тып          | Нумар тыпа                                             | Input (Bytes) | Output (Bytes) |
| ------------ | ------------------------------------------------------ | ------------- | -------------- |
| V            | AL.9615-4003-06                                        | 4             | 1              |
| V            | AL.9615-4003-08                                        | 4             | 1              |
| V            | AL.9615-4004-20                                        | 4             | 1              |
| V            | DEF.SORIO-1SV                                          | 4             | 1              |
| V            | GEA.TA15P8IAJ                                          | 4             | 1              |
| V            | GEA.TA15L8IAJ                                          | 4             | 1              |
| FQT          | SMR12GGXFRKG/US-100                                    | 8             | 0              |
| FQT          | IFM.SM6100                                             | 8             | 0              |
| QT           | IFM.LDL100                                             | 12            | 0              |
| QT           | IFM.LDL200                                             | 12            | 0              |
| PT           | IFM.PI2715                                             | 2             | 0              |
| PT           | IFM.PI2794                                             | 2             | 0              |
| PT           | IFM.PI2797                                             | 2             | 0              |
| PT и LT      | IFM.PM1704                                             | 4             | 0              |
| PT           | IFM.PM1705                                             | 4             | 0              |
| PT и LT      | IFM.PM1707                                             | 4             | 0              |
| PT           | IFM.PM1708                                             | 4             | 0              |
| PT           | IFM.PM1709                                             | 4             | 0              |
| PT           | IFM.PM1715                                             | 4             | 0              |
| PT           | FES.8001446                                            | 2             | 0              |
| PT и LT      | IFM.PM1706                                             | 4             | 0              |
| PT и LT      | IFM.PM1717                                             | 4             | 0              |
| PT           | E&H.PMP23-CA7N2KB3CJ                                   | 4             | 0              |
| PT           | E&H.PMP23-CA7N1KB3CJ                                   | 4             | 0              |
| LT           | IFM.LR2750                                             | 2             | 0              |
| TE           | IFM.TA2502                                             | 2             | 0              |
| TE           | IFM.TA2532                                             | 2             | 0              |
| TE           | IFM.TA2535                                             | 2             | 0              |
| TE           | IFM.TA2435                                             | 2             | 0              |
| TE           | E&H.TM311-AAC0BH2BBB2A1                                | 4             | 0              |
| LS           | IFM.LMT100                                             | 2             | 0              |
| LS           | IFM.LMT102                                             | 2             | 0              |
| LS           | IFM.LMT104                                             | 2             | 0              |
| LS           | IFM.LMT105                                             | 2             | 0              |
| LS           | IFM.LMT121                                             | 2             | 0              |
| LS           | IFM.LMT202                                             | 2             | 0              |
| LS           | E&H.FTL33-GR7N2ABW5J                                   | 2             | 0              |
| LS           | E&H.FTW33-GR7NWVJ                                      | 2             | 0              |
| LS           | E&H.FTW33-GR7NW5J                                      | 2             | 0              |
| DEV_VTUG и Y | FES.VTUG-10-MSDR-B1Y-25V20-G18FD-DTFD-M7SFD-12K+M1SCVA | 0             | 4              |
| DEV_VTUG и Y | FES.VTUG-10-VRLK-B1Y-G18FD-DTFD-M7SFD-12K+SCVA         | 0             | 4              |
| DEV_VTUG и Y | FES.VTUG-10-VRLK-B1Y-G18FD-DTFD-M7SFD-16K+SCVA         | 0             | 4              |
| DEV_VTUG и Y | FES.VTUG-10-VRLK-B1Y-G18FD-DTFD-M7SFD-8K+SCVA          | 0             | 2              |
| DEV_VTUG и Y | FES.VTUG-10-VRLK-B1Y-G18FDL-DTFDL-M7SFD-4K+SCVA        | 0             | 2              |
| F            | PXC.2910411                                            | 8             | 3              |
| VC           | BURKERT.8694                                           | 10            | 5              |
| HLA          | PXC.1191993                                            | 0             | 2              |
| G            | PXC.1252696                                            | 18            | 7              |
| G            | PXC.1252697                                            | 18            | 7              |
| G            | PXC.1362791                                            | 18            | 7              |
| G            | PXC.1362792                                            | 18            | 7              |
| EY           | IFM.DP1213                                             | 1             | 4              |

Для **M_ATV** і **M_ATV_LINEAR** трэба ўказваць выраб, які змяшчае нумар частотнага пераўтваральніка (_калі не зададзена, то бярэцца **360**. Дадаткова існуе яшчэ **630**_).

### 6.5 Праца з ПІД-рэгулятарам ###

Рэгулятар выкарыстоўваецца як звычайная прылада на функцыянальнай схеме аўтаматызацыі. У яго ёсць пэўны пералік параметраў і дадатковых уласцівасцяў, пазнаць які можна [тут](#632-Прызначэнне-дадатковых-палёў). Рэгулятар задаецца паводле Даста т.е ў пазначэнні прылады літара C (рэгуляванне) павінна стаяць на крайняй пазіцыі.
**Прыклад**: _FC1_, _TC1_ і інш.

<p align="justify">Базавыя ўласцівасці ПІД-рэгулятара, якія запісваюцца ў <b>Доп. поле [3]</b> зададзены стандартнымі значэннямі, якія апісаны ў пераліку дадатковых уласцівасцяў і параметраў. Калі трэба перавызначыць стандартнае значэнне, тое неабходна ў Доп. поле [3]</b> запісаць толькі перавызначанае значэнне (<i>гл. Рысунак ніжэй</i>).</p>

<p align="center"><img src="images/OverridePIDProperties.jpg"></p>
<p align="center"><b>Рысунак</b> - <i>Перазначэнне параметраў ПІД-рэгулятара</i></p>

<p align="justify">У <b>Доп. поле [4]</b> задаюцца ўваходы і выхады рэгулятара. Уваходам можа быць <b>датчык</b>, <b>сігнал AI</b> або <b>іншая прылада</b>. Для ПІД-рэгулятара вынахадам павінны быць толькі прылады тыпу VC, AO, M або Pb-рэгулятар. Калі выйсцем ПІД-рэгулятара паказваецца іншы рэгулятар, тое ўтворыцца каскаднае рэгуляванне, дзе вынахад аднаго ПІД-рэгулятара з'яўляецца заданнем для злучанага рэгулятара. Для парогавага рэгулятара выхадам могуць быць дыскрэтныя прылады, такія як: DO, V V або M M..

<p align="center"><img src="images/MakeCascadePID.png"></p>
<p align="center"><b>Рысунак</b> - <i>Адукацыя каскаднага рэгулявання</i></p>

<p align="justify">Пры ўводзе неіснуючых уваходаў і выхадаў будзе выведзена паведамленне аб неіснуючых прыладах. Дадаткова правяраецца выхад ПІД-рэгулятара на карэктнасць уводу апісаных раней дазволеных прылад.</p>
<p align="justify">Выкарыстанне (<i>запуск</i>) ПІД-рэгулятара ажыццяўляецца праз выкарыстанне (гл. Рысунак ніжэй</i>) яго ў кроках аперацыі. ПІД-рэгулятар дадаецца ва ўкладку кроку "<i>Прылады</i>" у групе ва ўкладцы "<b>Прылады</b>", а ў поле "<b>Прадукцыйнасць</b>" паказваецца яго заданне (<i>параметр або сігнал AI</i>).</p>

<p align="center"><img src="images/RunPID.png"></p>
<p align="center"><b>Рысунак</b> - <i>Выкарыстанне ПІД-кантролера паэтапна</i></p>

## 7 Агульныя звесткі аб тэхналагічных аб'ектах ##

<p align="justify"><b>Тэхналагічны працэс</b> (<em>тэхпрацэс</em>) – працэс вытворчасці якога-небудзь прадукта (<em>паўфабрыката</em>).</br>
<b>Тэхналагічны аб'ект</b> - аб'ект, у якім (<em>які</em>) непасрэдна ажыццяўляецца (<em>ажыццяўляе</em>) тэхпрацэс. Тэхналагічны аб'ект характарызуецца наяўнасцю звязанымі з ім аперацыямі. Да тэхналагічных аб'ектаў адносяцца танк, грабянец, аўтамат і г.д.</br>
<b>Аперацыя</b> - частка тэхпрацэсу, якую непасрэдна можа запусціць (<em>уключыць</em>) або спыніць (<em>выключыць</em>) аператар.</br>
<b>Крок</b> - частка аперацыі, якой непасрэдна не можа кіраваць аператар.</br>
<b>Дзеянне</b> - уваходзяць у крокі, адказваюць за тыпавую функцыянальнасць (адкрыццё\закрыццё прылад і да т.п.).</br>

Такім чынам, інжынер па аўтаматызацыі апісвае тэхпрацэс праз апісанне тэхналагічных аб'ектаў, іх аперацый і крокаў, дадатковых параметраў.</p>

У дадзеным раздзеле прадстаўлена апісанне для змененага рэдактара тэхналагічных аб'ектаў. Для таго, каб паглядзець змены адносна старога рэдактара тэхналагічных аб'ектаў, трэба звярнуцца да [дакументацыі](NewEditor.md). Новы рэдактар ​​мадыфікуе бягучае дрэва з аглядкай на мадэль рэцэптурнай вытворчасці S-88.

### 7.1 Апісанне акна рэдактара ###
<p align="justify">Выклікаць рэдактар ​​можна праз меню <strong>EasyEplanner->Рэдагаваць тэхналагічныя аб'екты</strong>. Усе аб'екты прадстаўляюцца ў іерархічнай дрэвападобнай структуры S88. </p>

<p align="center"><img src="images/techobject_descr.png"></p>

<p align="center"><b>Рысунак</b> - <i>Акно рэдактара</i></p>

Описание панели инструментов редактора (подписаны числами черного цвета под кнопками):  
1. <img src=images/ToolBar/expand.png width = 20 height = 20> - Разгарнуць/згарнуць дрэва аб'ектаў да вызначанага ўзроўня.
2. <img src=images/ToolBar/highlight.png width = 20 height = 20> - Уключыць падсвятленне прылад на схеме аўтаматызацыі.
3. <img src=images/ToolBar/edit.png width = 20 height = 20> - Уключыць рэжым рэдагавання.
4. <img src=images/ToolBar/refresh.png width = 20 height = 20> - Захаванне і сінхранізацыя аб'ектаў.
5. <img src=images/ToolBar/create.png width = 20 height = 20> - Стварыць новы аб'ект у выдзеленай кропцы (устаўка новага аб'екта) (**Ins**).
6. <img src=images/ToolBar/delete.png width = 20 height = 20> - Выдаліць выдзелены аб'ект <kbd>Delete</kbd>.
7. <img src=images/ToolBar/cut.png width = 20 height = 20> - Выразаць вылучаны аб'ект <kbd>Ctrl</kbd>+<kbd>X</kbd>.
8. <img src=images/ToolBar/copy.png width = 20 height = 20> - Капіяваць выдзелены аб'ект<kbd>Ctrl</kbd>+<kbd>C</kbd>.  
9. <img src=images/ToolBar/paste.png width = 20 height = 20> - Уставіць скапіяваны аб'ект у наадварот месца як новы <kbd>Ctrl</kbd>+<kbd>V</kbd>.
10. <img src=images/ToolBar/replace.png width = 20 height = 20> - Уставіць скапіяваны аб'ект у наадварот месца з заменай выдзеленага аб'екта <kbd>Ctrl</kbd> + <kbd>B</kbd>.
  11. <img src=images/ToolBar/moveup.png width = 20 height = 20> - Перамясціць выдзелены аб'ект вышэй <kbd>Ctrl</kbd>+<kbd>&uarr;</kbd>.
12. <img src=images/ToolBar/movedown.png width = 20 height = 20> - Перамясціць вылучаны аб'ект ніжэй <kbd>Ctrl</kbd>+<kbd>&darr;</kbd>.  
13. <img src=images/ToolBar/import.png width = 20 height = 20> - Імпарт аб'ектаў у праект.
14. <img src=images/ToolBar/export.png width = 20 height = 20> - Экспарт аб'ектаў з праекту.
15. <img src=images/ToolBar/changeObj.png width = 20 height = 20> - Скід базавага аб'екта.
16. <img src=images/ToolBar/hideEmptyItems.png width = 20 height = 20> - Схаваць пустыя палі.
17. <img src=images/ToolBar/search.png width = 20 height = 20> - Пошук.
18. <img src=images/ToolBar/toolSettings.png width = 20 height = 20> - Настройка панэлі інструментаў.

**Пошук**:

  - <p align="justify">тэкставы фільтр па элементах дрэва, як па які адлюстроўваецца, так і па рэдагуемым значэнні, можна выкарыстаць сумесна са ўтойваннем пустых палёў. Калі націскаць на стрэлку "Уніз" у правай частцы пошукавага поля, то ў дрэве будуць па чарзе выдзяляцца знойдзеныя элементы.</p>

    <img src="images/search.png">

 - Пошук уключае ў сябе 2 налады:

   + <b><ins>ab</ins></b> - _Слова цалкам_. Шукае словы толькі цалкам, як паказана ў пошукавым радку, гэта значыць пры запыце "<b>TANK1V1</b>" прылады _TANK1V11 TANK1V12_ не будуць уключаны ў пошук.

  + <b>.*</b> - _Выкарыстоўваць рэгулярныя выразы_. Пры ўключэнні гэтай наладкі пошук падтрымлівае [рэгулярныя выразы](https://ru.wikipedia.org/wiki/Регулярные_выражения).

    + Прыклады рэгулярных выразаў (функцыя слова цалкам працуе таксама для рэгулярнага выраза):

        * "<b>TANK1V[1-3]</b>" - знойдзе ўсе палі з прыладамі ў дыяпазоне: _TANK1V1_ ,_TANK1V2_ и _TANK1V3_;

        * "<b>TANK1V(1|11|21)</b>" - знойдзе палі з прыладамі: _TANK1V1_ ,_TANK1V11_ и _TANK1V21_;

        * "<b>TANK1V1\d</b>" - знойдзе ўсе прылады _TANK1V..._ с номерами 10-19;

        * Для спрашчэння запытаў таксама была рэалізавана падтрымка лагічных выразаў з выкарыстаннем **||** и **&&**: "<b>TANK1V1 || TANK1V2 && TANK1V3</b>" - шукае радкі, якія змяшчаюць _TANK1V1_ ці _TANK1V2_ и _TANK1V3_;

        * Для больш складаных выразаў глядзіце [дакументацю]((https://ru.wikipedia.org/wiki/Регулярные_выражения)) па рэгулярных выразах.

<p align="justify">Карыстальнік можа наладзіць панэль прылад пад сябе, прыбраўшы невыкарыстоўваныя прылады. Для гэтага ў правым верхнім куце прысутнічае адмысловую прыладу для налады панэлі. Прыклад налады панэлі прыведзены на малюнку ніжэй.</p>

<div align=center>
<img src="images/SettingTools.png"/>
<br><p\><b>Рысунак</b> - Настройка панэлі інструментаў<i></i>
</div>

<p align="justify">Кантэкснае меню рэдактара, выкліканае пстрычкай **ПКМ** па элеменце дрэва, утрымоўвае асноўныя аперацыі з элементамі дрэва. Таксама меню мяркуе ўтойванне недаступных для элемента функцый, як паказана на малюнку ніжэй.</p>

<div align=center>
<img src="images/ContextMenu.png"/>
<br><p\><b>Рисунок</b> - Кантэкстнае меню<i></i>
</div>

<p align="justify">Пры капіяванні або выразцы элемента ў кантэкстным меню на аперацыях уставіць і замяніць пры навядзенні выскоквае падказка, якая паказвае скапіяваны аб'ект.</p>

<div align=center>
<img src="images/ContextMenuPasteToolTip.png"/>
<br><p\><b>Рысунак</b> - Падказка скапіяванага аб'екта ў кантэкстным меню<i></i>
</div>

Імя аб'екта складаецца з наступных складнікаў: лакальны нумар у спісе, імя, нумар аб'екта, глабальны нумар аб'екта. Напрыклад, аб'ект - **1. Танк 2 (#4)**. Яго складнікі:
1. Лакальны нумар - "**1.**";
2. Імя - "**Танк**";
3. Нумар аб'екта - "**2**";
4. Глабальны нумар аб'екта - "**(#4)**".

Для рэдагавання любога вузла дрэва прымяняюцца наступныя каманды (_клавішы_) клавіятуры:
* Выдаленне - <kbd>Delete</kbd>;
* Устаўка - <kbd>Insert</kbd>;
* Рэдагаванне тэкставага прадстаўлення – **двайны клік па актыўным вузле дрэва**;
* Адмена рэдагавання - <kbd>Esc</kbd> (_падчас рэдагавання_);
* Увод рэдагавання – <kbd>Enter</kbd> (_падчас рэдагавання_), або клік па іншым радку;
* Капіяванне вузла - <kbd>Ctrl</kbd>+<kbd>C</kbd>;
* Устаўка вузла - <kbd>Ctrl</kbd>+<kbd>V</kbd>, пры гэтым трэба знаходзіцца на бацькоўскім вузле, куды мы ўстаўляем скапіяваны элемент;
* Устаўка вузла - <kbd>Ctrl</kbd>+<kbd>B</kbd>, неабходна знаходзіцца на вузле, які хочам замяніць раней скапіяваным;
* Выразка вузла - <kbd>Ctrl</kbd>+<kbd>X</kbd>, неабходна знаходзіцца ў вузле, які трэба выразаць. Працуе толькі для неапазнаных аб'ектаў;
* Аўтазапаўненне - <kbd>Ctrl</kbd>+<kbd>A</kbd>;
* Перамяшчэнне вузла ўверх - <kbd>Ctrl</kbd>+<kbd>&uarr;</kbd>;
* Перамяшчэнне вузла ўніз - <kbd>Ctrl</kbd>+<kbd>&darr;</kbd>;
* Вылучэнне некалькіх элементаў - <kbd>Shift</kbd>+<kbd>&uarr;</kbd> / <kbd>Shidt</kbd>+<kbd>&darr;</kbd>;
* Вылучэнне элемента / зняцце вылучэння з элемента - <kbd>Ctrl</kbd>+<kbd>ЛКМ</kbd>;
* Хуткае вылучэнне элементаў (вылучаюцца ўсе элементы аднаго тыпу якія адносяцца да адной групы, тэхналагічныя аб'екты вылучаюцца таксама па адным тэхналагічным тыпе) - <kbd>Ctrl</kbd>+2x<kbd>ЛКМ</kbd>;
* Пры капіяванні – устаўцы/замене аб'екта капіююцца ўсе палі зыходнага аб'екта неабходна ўлічваць наступныя нюансы:
* Нумар аб'екта змяняецца на нумар аб'екта, на месца якога ўстаўляемы аб'ект
* Капіюецца поўны спіс аперацый і адбываецца капіраванне прылад, якія выкарыстоўваюцца ў аперацыі. Пры гэтым адбываецца карэктная замена нумара аб'екта на новы (Больш падрабязна апісана [тут](#7111-мадыфікацыя-назваў-прылад)). Гэта адбываецца ў выпадку супадзення ў двух аб'ектаў поля ОУ. Так пры капіяванні аперацый з аб'екта __Танк 1__ з прыладай __TANK1V1__ і заменай у аб'екце __Танк 3__ прылада зменіць сваё імя на __TANK3V1__.
* Пры капіяванні аперацый адбываецца капіраванне абмежаванняў, апісаных у аперацыі. Для абмежаванняў, якія адносяцца да дадзенага аб'екта (_«Абмежаванні ўнутры аб'екта», «Абмежаванні на наступныя аперацыі»_), адбываецца замена старога нумара аб'екта на новы.
* Можна капіяваць не толькі асобныя радкі параметраў, аперацый, а таксама цэлыя групы параметраў, абмежаванняў, аперацый.

##### Мадыфікацыя назваў прылад #####




#### 7.1.1 Неапазнаныя аб'екты пры загрузцы апісання праекта ####
<p align="justify">Калі базавы аб'ект будзе не распазнаны сістэмай, які дадаецца пры загрузцы аб'ект будзе дададзены ў групу "<em>Неапазнаныя аб'екты</em>". Прыклад на малюнку ніжэй.</p>

<p align="center"><img src="images/NewEditor/unidentifiedObject.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Неапазнаныя аб'екты</i></p>

<p align="justify">Неапазнаны аб'ект можа ім і заставацца. Але над ім нельга выконваць ніякіх дзеянняў, акрамя як: "<b>Выдаліць</b>", "<b>Выразаць</b>" і "<b>Рэдагаваць</b>". Калі не пераносіць базавы аб'ект у іншыя аб'екты, то ён будзе захоўвацца як неапазнаны аб'ект. Гэта значыць, гэты аб'ект застаецца аб'ектам, але яго нельга нікуды капіяваць (толькі праз выразку), і новыя неапазнаныя аб'екты таксама нельга дадаваць.</p>

<p align="justify">Выразаць аб'ект можна з дапамогай спалучэння клавіш <b>Ctrl + X</b>. Пасля выразкі аб'ект стане перакрэсленым (<em>будзе перакрэслены тэкст, але аб'ект застанецца актыўным</em>). Для таго, каб адмяніць выразку, трэба націснуць клавішу <b>Esc</b> пры любым актыўным элеменце дрэва.</p>

<p align="center"><img src="images/NewEditor/unidentifiedDisabledObject.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Неапазнаныя аб'екты</i></p>

<p align="justify">Для таго, каб уставіць выразаны аб'ект, неабходна абраць месца, куды яго ўставіць, і націснуць спалучэнне клавіш <b>Ctrl + V</b>. З пункту гледжання праграмы, будзе перанос аб'екта з аднаго месца ў іншае і прызначэнне гэтаму аб'екту базавага аб'екта, у які ён быў перанесены. Глабальны нумар аб'екта не зменіцца.</p>

<p align="center"><img src="images/NewEditor/unidentifiedObjectAfterInsert.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Перанесены аб'ект</i></p>

<p align="justify">Калі трэба перанесці аб'ект у базавы аб'ект, якога яшчэ няма, то трэба націснуць спалучэнне клавіш <b>Ctrl + V</b> на элеменце дрэва вышэй (<em>напрыклад, калі ёсць аб'ект S88, то націскаем на Агрэгат, Апарат</em>). Калі ж няма нават аб'ектаў S88, то націскаем на корань праекту (дзе назва праекту) і націскаем патрэбнае спалучэнне клавіш. Калі сістэма не можа вызначыць, куды перанесці аб'ект, будзе выклікана акно (<em>па аналогіі са стварэннем новага аб'екта</em>), дзе трэба абраць, куды пераносіцца неапазнаны аб'ект.</p>

#### 7.1.2 Стварэнне аб'ектаў ####
<p align="justify">У рэдактары ёсць градацыя з магчымасцю стварэння пэўнага базавага аб'екта. У новым рэдактары існуе тры варыянты стварэння аб'екта: з кораня дрэва, з кораня аб'екта S-88, з кораня базавага аб'екта.</p>

<p align="center"><img src="images/NewEditor/treeRootsExample.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Абазначэнне каранёў элементаў</i></p>

<p align="justify">Пры стварэнні аб'ектаў з першых двух каранёў (<i>корань дрэва і корань аб'екта S-88</i>), будзе выклікана дыялогавае акно (гл. Рысунак ніжэй</i>). У залежнасці ад таго, з якога кораня было яно выклікана, будуць актываваны або дэактываваны магчымыя варыянты. Падрабязнасці апісаны ніжэй.</p>

<p align="center"><img src="images/NewEditor/createNewObject.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Стварэнне новага аб'екта</i></p>

<p align="justify">Напрыклад, калі стварэнне аб'екта ідзе з кораня дрэва, то ўсе спісы ў акне стварэння аб'екта будуць даступныя. Пры стварэнні аб'екта з кораня аб'екта S-88, бо аб'ект ужо вядомы, то будзе заблакаваны выбар аб'екта S-88, а пры стварэнні аб'екта з кораня базавага аб'екта, адразу будзе створаны які адпавядае пэўны аб'ект базавага аб'екта без якіх-небудзь вокнаў.</p>

#### 7.1.3 Капіраванне, устаўка і замена аб'екта ####
<p align="justify">Можна капіяваць любы аб'ект, але ўставіць і замяніць можна толькі аб'ект з аднолькавым базавым аб'ектам. Гэта значыць, мы можам замяніць <b>Танк</b> на <b>Танк</b>, але не можам <b>Танк</b> на Лінію</b>. Унутры аб'ектаў сітуацыя не змянілася. Мы можам скапіяваць аперацыю <b>Танка</b> ў аперацыі <b>Лініі</b>, але базавая аперацыя павінна быць перапрызначана карыстальнікам.</p>

#### 7.1.4 Выдаленне аб'екта ####
<p align="justify">Трэба ўлічваць, што пры выдаленні аб'екта яго глабальны нумар будзе выдалены, а, такім чынам, усе аб'екты будуць ссунуты адносна папярэдняга іх становішча.</p>

#### 7.1.5 Перамяшчэнне аб'ектаў уверх і ўніз ####
<p align="justify">Перамяшчэнне аб'ектаў уверх і ўніз змяняе іх глабальныя нумары шляхам замены. Аб'ект <b>Х</b> мяняецца на <b>У</b> і наадварот. Але так як у рэдактары мы карыстаемся лакальнымі індэксамі і аб'екты згрупаваны, то перамяшчаць аб'ект уверх і ўніз можна толькі ў межах адной групы. Выхад у іншыя групы немагчымы.</p>

#### 7.1.6 Даданне прылад у аперацыі ў тэкставым выглядзе ####
<p align="justify">Неабходна ўключыць рэжым рэдагавання (<em>іконка сіняга алоўка ўверсе акна рэдактара</em>) і выбраць (<em>вылучыць</em>) патрэбны вузел.</p>

<p align="center"><img src="images/select_node.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад выбару вузла</i></p>

<p align="justify">Далей клікнуць па ім і перайсці ў рэжым рэдагавання.</p>

<p align="center"><img src="images/edit_selected_node.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад рэжыму рэдагавання</i></p>

<p align="justify">Паслядоўна праз прабел запісаць патрабаваныя прылады (<em>як на малюнку з уключаным рэжымам рэдагавання</em>) і завяршыць увод націснуўшы <b>Enter</b> (<em><b>Esc</b> - адмена змен</em>), атрымаўшы зменены вынік і стан радка, як на малюнку.

#### 7.1.7 Даданне прылад у аперацыі ў графічным выглядзе ####
<p align="justify">Неабходна перайсці ў гэты рэжым, націснуўшы наступныя кнопкі:</p>

<p align="center"><img src="images/edit_buttons.png"></p>

<p align="center"><b>Рысунак</b> - <i>Кнопкі для працы з графічным рэжымам</i></p>

<p align="justify">Неабходна вылучыць патрэбны вузел.</p>

<p align="center"><img src="images/select_node.png"></p>

<p align="center"><b>Рысунак</b> - <i>Выбар вузла</i></p>

<p align="justify">На карце падсвятляюцца якія ўдзельнічаюць прылады (прылады <em>выключаць</em> - шэрага колеру, <em>астатняе</em> - зялёнага колеру).</p>

<p align="center"><img src="images/higlight_dev.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад падсветкі аб'ектаў</i></p>

<p align="justify">Шляхам кліку на неабходных прыладах, дадаем або выдаляны іх з кроку. Пасля завяршэння рэдагавання кроку пераходзім да наступнага (<em>клік па патрабаваным вузле</em>).</p>

#### 7.1.8 Даданне прылад у аперацыі ў таблічным рэжыме ####
<p align="justify">Неабходна выклікаць акно з прыладамі, выклікаўшы яго з меню (<em>глядзі главу 1</em>), ці ж, калі ўключаны рэжым рэдагавання (<em>глядзі папярэдні падпункт</em>), то акно выклікаецца само пры выбары вузла для рэдагавання.</p>

<p align="center"><img src="images/edit_selected_node_table_mode.png"></p>

<p align="center"><b>Рысунак</b> - <i>Рэдагаванне вузла ў таблічным рэжыме</i></p>

<p align="justify">Шляхам адзнакі (<em>зняцця адзнакі</em>) адпаведныя прылады дадаюцца (<em>выдаляюцца</em>) з дзеяння.</p>

#### 7.1.9 Захаванне вынікаў рэдагавання ####
<p align="justify">Вынікі рэдагавання захоўваюцца пры зачыненні праекту (<em>як пры зачыненні праекта асобна, так і пры зачыненні акна EPlan з уключаным праектам</em>), а гэтак жа з дапамогай кнопкі "Сінхранізацыя і захаванне" (<em>сіне-зялёнае кола справа на малюнку</em>).

<p align="center"><img src="images/edit_buttons.png"></p>

<p align="center"><b>Рысунак</b> - <i>Кнопка захавання і сінхранізацыі</i></p>

#### 7.1.10 Выкарыстанне параметраў у аб'екце ####

<p align="justify">У тэхналагічным аб'екце задаюцца параметры аб'екта.</p>

<p align="justify">У поле "Параметры" ёсць функцыя аўтазапаўнення (<kbd>Ctrl</kbd>+<kbd>A</kbd>).
Пры выкарыстанні дадзенай функцыі поля параметраў аўтаматычна запаўняюцца ў адпаведнасці з
апісаннем базавага аб'екта, у базавых аб'ектах гэтыя параметры прапісваюцца ў базавых аперацыях.
Пасля генерацыі параметраў адной базавай аперацыі дадаюцца 2 пустыя параметры.</p>

<p align="justify">У дадатку прысутнічае механізм праверкі параметраў. З дапамогай гэтага механізму выяўляюцца супадзенні імёнаў (Lua імёнаў) параметраў, бо імёны павінны быць унікальныя. Механізм не правярае параметры з пустым імем або са стандартным (Lua імя - "P"):

1. Калі Lua імя параметраў супадаюць, тое яно скідаецца ва ўсіх параметраў.
2. Пры ўстаўцы скапіяванага параметра з ужо існуючым Lua імем, яно скідаецца толькі ва ўстаўленага параметра.
3. Калі паспрабаваць змяніць Lua імя на ўжо існуючае, то змены не адбудзецца.
</p>

<p align="center"><img src="images/TechObjectParameters.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Параметры тэхналагічнага аб'екта</i></p>

<p align="justify">Таксама акно параметраў змяшчаецца ў кожнай аперацыі тэхналагічнага аб'екта.</p>

<p align="center"><img src="images/TechObjectOperationParameters.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Параметры аперацыі тэхналагічнага аб'екта</i></p>

<p align="justify">Для выгоды выкарыстання, у параметрах аб'екта ёсць поле "Аперацыя", якое дазваляе паказаць да якой аперацыі ставіцца параметр.</p>

<p align="center"><img src="images/TechObjectOperationNumbersParameter.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Поле "Аперацыі" ў параметрах аб'екта</i></p>

<p align="justify">Пасля таго, як гэтае поле будзе запоўнена, у зададзенай аперацыі адлюструецца параметр, які быў запісаны ў поле "Аперацыі" у параметрах аб'екта. У сёлетняй рэдакцыі можна задаваць мноства аперацый. Для гэтага неабходна пералічыць нумары аперацый праз прабел (гл. Рысунак ніжэй). Для задання аднаго параметра неабходна ўказаць яго нумар у поле, без прабелаў.</p>

<p align="center"><img src="images/TechObjectOperationSetUpNumbers.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Поле "Аперацыі" ў параметрах аб'екта</i></p>

<p align="justify">Пасля таго, як усе нумары аперацый пералічаныя і зафіксаваныя, у зададзеных аперацыях аб'екта адлюструюцца гэтыя параметры.</p>

<p align="center"><img src="images/TechObjectSetUpParametersIntoOperation.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Прыклад адлюстравання параметраў у аперацыі</i></p>


#### 7.1.11 Мадыфікацыя назваў прылад ####

<p align=justify> Мадыфікацыя назваў прывязаных прылад выконваецца пры змене назвы ці нумары тэхналагічнага аб'екта, якое адбываецца ў следстве рэдагавання палёў, устаўцы ці замене аб'екта. Гэтак жа мадыфікацыя праводзіцца пры адкрыцці і захаванні праекту. </p>

У мадыфікацыі прывязаных прылад удзельнічаюць наступныя палі ў тэхналагічным аб'екта:
- Усе палі дзеянняў;
- Параметры дзеянняў(калі да іх прывязана прылада);
- Элементы поля `Доп.ўласцівасці`(у аперацыях);
- Элементы поля `Абсталяванне`.

##### Апісанне дзеянняў #####

Прылады ў поле абсталявання заўсёды адпавядаюць тэхналагічнаму аб'екту, таму тамака правіла простае: падстаўляецца прылада з адпаведным аб'ектам або выдаляецца;

Для астатніх палёў мадыфікацыя прылад праводзіцца па наступных правілах:
- Калі ў прывязанай прылады аб'ект супадае з змяняным тэх.аб'ектам, то прылада мадыфікуецца ў адпаведнасці са зменай імя/нумары аб'екта (ці застаецца ранейшым у выпадку адсутнасці такой прылады):
* (імя: "OBJ" => "OTHER") : `[OBJ]1V1` => `[OTHER]1V1`; [*][modify]
* (нумар: 1 => 2) : `OBJ[1]V1` => `OBJ[2]V1`; [*][modify]
- У выпадку, калі супадае назва аб'екта, але нумар **НЕ** супадае і пры гэтым ён супадае з новым нумарам аб'екта, то ён змяняецца на супрацьлеглы:
* (нумар: 1 => 2) : `OBJ[2]V1` => `OBJ[1]V2`; [*][modify]
- Калі прылады ўзяты з тыпавога аб'екта, то ў выпадку іх адсутнасці яны выдаляюцца;
- Мадыфікацыя клапанаў **MIXPROOF** і іншых падтыпаў ажыццяўляецца ў наступных умовах:
* Мадыфікаваны аб'екта - **Апарат**;
* Імя ўстойлівасці аб'екта не супадаць з ОУ тех.объекта;
* Прылада мае тып **MIXPROOF** ці падобны, а менавіта:
+ `V_DO1_DI2`
+ `V_DO2_DI2`
+ `V_DO2_DI2_BISTABLE`
+ `V_MIXPROOF`
+ `V_BOTTOM_MIXPROOF`
+ `V_IOLINK_MIXPROOF`
+ `V_AS_MIXPROOF`
+ `V_AS_DO1_DI2`
+ `V_IOLINK_DO1_DI2`
+ `V_IOL_TERMINAL_MIXPROOF_DO3`

Пры гэтым мадыфікуецца не нумар аб'екта, а нумар прылады (дакладней, яго частка якая спадае з нумарам тех.объекта), калі такой прылады няма, яно выдаляецца з прывязкі:
* (нумар: 1 => 2) : `NO_UNIT1V[1]` => `NO_UNIT1V[2]` [*][modify]
* (нумар: 13 => 14) : `NO_UNIT1V2[13]` => `NO_UNIT1V2[14]` [*][modify]

[modify]: ## "У круглых дужках паказваецца змена аб'екта, далей чарах двокроп'е вынік мадыфікацыі прылады, дзе ў квадратных дужках паказана, што менавіта змяняецца."


### 7.2 Апісанне дзеянняў ####

Спіс рэалізаваных дзеянняў:

1. **Правяраемыя прылады**. Правяраюцца на памылкі прылады падчас выканання кроку.
2. **Уключаць**. Уключаюцца (усталёўваюцца ў актыўны асноўны стан) прылады.
3. **Уключэнне прылад з затрымкай**. Уключаюцца (усталёўваюцца ў актыўны асноўны стан) прылады з усталяванай задежкой у адпаведнай групе.
4. **Уключаць рэверс**. Уключаюцца ў рэверс (усталёўваюцца ў актыўны рэверсны стан, звычайна гэта рухавікі і да т.п.) прылады. Па завяршэнні дзеяння прылады адключаюцца.
5. **Выключаць**. Адключаюцца (усталёўваюцца ў пасіўны стан) прылады.
6. **Выключэнне прылад з затрымкай**. Адключаюцца (усталёўваюцца ў пасіўны стан) прылады з усталяванай затрымкай у адпаведнай групе.
7. **Верхнія сядла**. Уключаецца верхняе сядло (усталёўваецца ў актыўны стан) для прылады. Звычайна выкарыстоўваецца для прамывання супрацьзмешвальных клапанаў для крокаў аперацыі мыйкі. Па завяршэнні дзеяння прылады адключаюцца.
8. **Ніжнія сёдлы**. Уключаецца ніжняе сядло (усталёўваецца ў актыўны стан) для прылады. Звычайна выкарыстоўваецца для прамывання супрацьзмешвальных клапанаў для крокаў аперацыі мыйкі. Па завяршэнні дзеяння прылады адключаюцца.
9. **Сігналы для ўключэння**. Пры ўключэнні аперацыі правяраюцца на актыўнасць дадзеныя прылады - калі хаця б адно з прылад не актыўна, то выдаецца адпаведнае паведамленне і аперацыя не ўключаецца.
10. **Прылады**. Служыць для спрашчэння тыпавой логікі працы. Прылады, якія знаходзяцца ў поле *"прылады"* уключаюцца (актывуюцца), а змешчаныя ў поле *"рэверсныя прылады"* уключаюцца ў рэверс (аналагічна дзеянню **Уключаць рэверс**) пры актыўным (хоць бы адным) сігнале з поля *"DI"*. Калі няма ніводнага сігналу з поля *"DI"*, то прылады ў поле *"прылады"* адключаюцца. Сігналы для поля *"DO"* выдаюцца заўсёды. Па завяршэнні дзеяння ўсе ўключаныя прылады адключаюцца. Таксама поле *"Прадукцыйнасць"* служыць для задання прадукцыйнасці ўключаных матораў. Гэта можа быць прылада **AI** (аналагавы сігнал) ці нумар параметра.
11. **Групы DI DI ... -> DO DO ...**. Адмысловае дзеянне - выдача дыскрэтных сігналаў пры наяўнасці хаця б аднаго з уваходных дыскрэтных сігналаў.
12. **Групы інвертаваць DI DI ... -> DO DO ...**. Адмысловае дзеянне - выдача дыскрэтных сігналаў пры знікненні хаця б аднаго з уваходных дыскрэтных сігналаў.
13. **Групы AI -> AO AO ...**. Адмысловае дзеянне - выдача аналагавых сігналаў па значэнні ўваходнага аналагавага сігналу.
14. **Сігнал для ўключэння бягучага кроку**. Служыць для аўтаматычнага ўключэння кроку аперацыі па сігнале **DI**, які запісаны ў дзеянні, і выключэнні кроку па знікненні гэтага сігналу, калі гэта было паказана ў які адпавядае параметры. Дзеянне групавое, г.зн. можна групаваць сігналы. Для сігналаў, якія запісаны ў адно дзеянне, дзейнічае ўмова **І** для ўключэння кроку, а для сігналаў паміж дзеяннямі - **АБО**.
15. **Пераход да наступнага кроку па ўмове**. Адмысловае дзеянне - пераход да кроку па выкананні ўмовы: уключэнне і выключэнне зададзеных прылад. Дзеянне складаецца з груп, якія складаюцца з: уключэнне прылад, выключэнне прылад і нумары наступнага кроку.
Паміж групамі дзейнічае ўмова **АБО**, а ўнутры групы - **А**.
16. **Пераход да стану па ўмове**. Аналагічна папярэдняму дзеянню для пераходу паміж станамі паводле схемы ў пункце [5.1] (#51-аперацыі-аб'ектаў). Рэалізавана для станаў выканання і чаканні падчас выканання аперацыі.

Апроч апісаных вышэй дзеянняў, крокі складаюцца з параметры часу (__час кроку__ і максімальны час кроку__) для безумоўнага пераходу да кроку, паказанаму ў поле __"нумар наступнага кроку"__. У палях __"Час (параметр)"__ і __"Максімальны час кроку (параметр)"__ паказваецца нумар параметра, а ў самім параметры ўсталёўваецца значэнне часу ў ***секундах (з)***.

Для ўсіх дзеянняў адсочваюцца памылкі якія ўваходзяць у іх прылад. Калі крок, у якім дадзенае дзеянне апісана, актыўны і ўзнікае памылка прылады з дадзенага дзеяння (зваротная сувязь для клапана і да т.п.), аперацыя становіцца на паўзу з выдачай адпаведнага паведамлення.

Для спрашчэння працы рэалізаваны абмежаванні на прылады, якія дадаюцца ў дзеянні. Тыпы прылад, якія можна дадаваць у дзеянні:

1. Правяраемыя прылады - любыя прылады.
2. Уключаць (уключэнне прылад з затрымкай) - **DO**, **M**, **V**;
3. Уключаць рэверс - **M**;
4. Выключаць (выключэнне прылад з затрымкай) - **DO**, **M**, **V**;
5. Верхнія сёдлы - **V**, **DO** з падтыпамі **V_MIXPROOF**, **V_AS_MIXPROOF**, **V_IOLINK_MIXPROOF**, **V_VIRT**, **DO**, **DO_VIRT**;
6. Ніжнія сядлы - **V**, **DO** з падтыпамі **V_MIXPROOF**, **V_AS_MIXPROOF**, **V_IOLINK_MIXPROOF**, **V_VIRT**, **DO**, **DO_VIRT**;
7. Сігналы для ўключэння - **DI**, **GS**;
8. Прылады
* DI - **DI**, **SB**, **GS**, **FS**, **LS**;
* DO - **DO**;
* Прылады - **DO**, **M**, **V**, **VC**, **AO**, **ПІД-рэгулятар** (_варыяцыі З_);
* Рэверсіўныя прылады - **M**;
9. Групы DI DI ... -> DO DO ... - **DI**, **GS**, **DO**, **SB**, **HL**, **FS**, **LS**;
10. Групы інвертаваны DI DI ... -> DO DO ... - **DI**, **GS**, **DO**, **SB**, **HL**, **FS**, **LS**;
11. Групы AI -> AO AO ... - **AI**, **AO**, **M**, **VC**, **PT**, **LT**, **QT**, **FQT**, **TE**.
12. Сігнал для ўключэння кроку - **DI**,**LS**,**GS**,**SB**,**FS**,**TS**,**PDS**;
13. Перайсці ў крок па ўмове - **V**, **GS**, **DI**, **DO**, **LS**.

### 7.3 Выкарыстанне функцыянальнасці базавага аб'екта і базавай аперацыі ####

<p align="justify">Надбудова захоўвае апісанне базавай функцыянальнасці ў файле. Файл захоўваецца ў тэчцы з LUA файламі і запаўняецца па вызначаным шаблоне (правілы апісанні ўсярэдзіне файла, спачатку). Імя файла - <code>sys_base_objects_description.lua</code>. Інфармацыя загружаецца з файла адзін раз пры запуску EPLAN. Для таго, каб загрузіць новыя дадзеныя (пасля змены файла), неабходна перазапусціць EPLAN. Пры адсутнасці гэтага файла ў сістэме (быў выпадкова выдалены ці інш.) гэты файл будзе створаны зноўку са стандартным апісаннем (у ценявым сховішчы), і будзе выведзена памылка аб тым, што файл не знойдзены. Для выпраўлення гэтай памылкі неабходна перанесці створаны файл-шаблон з ценявога сховішча ў тэчку, дзе захоўваецца надбудова, запоўніць яго і перазагрузіць EPLAN.</p>

<p align="justify">Базавы аб'ект выбіраецца аўтаматычна пры стварэнні аб'екта. Базавы аб'ект апісвае, якія базавыя аперацыі, абсталяванне і інш. кампаненты будзе ўтрымоўваць аб'ект апроч свайго асноўнага функцыяналу. У залежнасці ад базавага аб'екта, да аб'екта могуць быць прывязаны тыя ці іншыя аб'екты. Для гэтых мэт, у аб'екта ёсць поле <Прывязаныя агрэгаты</code>.</p>

#### 7.3.1 Прывязка базавых аб'ектаў адзін да аднаго ####
<p align="justify">Прывязка дазваляе прывязаць адзін аб'ект да іншага. У дадзены момант можна прывязваць агрэгаты да апаратаў, агрэгаты да агрэгатаў, а таксама, прывязваць танкі да базавых ліній. Прывязка агрэгатаў да апаратаў і агрэгатаў да агрэгатаў апісана ніжэй. Прывязка ж танкаў да ліній ажыццяўляецца праз поле "Групы танкаў" у базавых аб'ектах ліній. Прывязка ажыццяўляецца па такім жа прынцыпе, як і прывязка агрэгатаў да апарата.</p>

<p align="center"><img src="images/NewEditor/attachTankToLines.png"></p>

<p align="center"><b>Рысунак</b> - <i>Прывязка груп танкаў</i></p>

<p align="justify">Прывязка агрэгатаў да апаратаў (хоць, лініі ў нас ставяцца да агрэгатаў, але мы можам прывязваць да іх іншыя агрэгаты</i>) зараз выконваецца не ўручную, а можа быць наладжаная таксама, як і абмежаванні (<i>акно "Аперацыі, абмежаванні, прывязка аб'ектаў" у рэжыме рэдакцыі. Прыклад налады прывязкі аб'ектаў прадстаўлены ніжэй.</p>

<p align="justify">Доп. уласцівасці аперацыі, якія дадаюцца пры прывязцы аб'екта,
аўтаматычна запаўняюцца з даданнем float-параметра,
калі ёсць адпаведнае апісанне базавага аб'екта:
дадзеныя параметры генеруюцца аўтаматычна ў залежнасці ад базавай аперацыі.</p>

<p align="center"><img src="images/NewEditor/attachObjects.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Новая прывязка аб'ектаў</i></p>

<b>Заўвага:</b>
1. Падкрэсленыя нумары - гэта глабальныя нумары аб'ектаў. Рукамі іх мяняць нельга. Аб'екты трэба прывязваць праз графічны інтэрфейс. Роўна як і абмежаванні;
2. Да апаратаў нельга прывязаць два базавыя аб'екты аднаго тыпу. Напрыклад, нельга прывязаць "_вузел мяшання 1_" і "_вузел мяшання 2_" да аб'екта "_Танк 1_". Адбудзецца аўтаматычная адвязка старога і прывязка новага аб'ектаў (з захаваннем зададзеных параметраў, пры ўмове, што гэта былі аб'екты аднаго тыпу).
3. Да агрэгатаў можна прывязваць мноства агрэгатаў аднаго тыпу, аднак, ёсць пара момантаў выкарыстання. Трэба, каб былі аднолькавыя імёны параметраў у агрэгатаў бо налада аднаго прывязанага агрэгата будзе распаўсюджвацца адразу на ўсё (_значэння параметраў будуць брацца з кожнага агрэгата, і яны могуць быць унікальныя, але не імёны параметраў_). Уключацца ў аперацыі таксама будуць адразу ўсе злучаныя агрэгаты аднаго тыпу (няма налады, каб можна было ўключаць, да прыкладу, _Вузел мяшання 1_ у аперацыі _Х_, і _Вузел мяшання 2_ у аперацыі _Y_.
4. Аб'екты прывязваюцца ў тым парадку, у якім іх задаў карыстач. Парадак прывязкі ні на што не ўплывае.

#### 7.3.2 Выкарыстанне базавай аперацыі ####
<p align="justify">Выбар базавай аперацыі ў базавым аб'екце ажыццяўляецца такім жа чынам, з тым толькі выключэннем, што выбіраць трэба насупраць назвы аперацыі.</p>

<p align="center"><img src="images/set_base_oper.png"></p>

<p align="center"><b>Рысунак</b> - <i>Выбар базавай аперацыі</i></p>

<p align="justify">У <code>Аперацыі</code> дададзена яшчэ адзін які расчыняецца элемент <code>Дадатковыя ўласцівасці (<i>Доп. уласцівасці</i>)</code>. У залежнасці ад абранай аперацыі, з'яўляецца розная колькасць палёў, якую неабходна запоўніць. Калі ў аперацыі няма доп. уласцівасцяў, тое гэтае поле не будзе паказана (<i>будзе ўтоена</i>) Запаўняць можна ўручную або пры дапамозе кліку па дадаванай прыладзе на <b>ФСА</b>. Таксама даступна рэдагаванне праз акно "<b>Прылады, параметры аб'ектаў</b>".</p>

<p align="center"><img src="images/base_operation_props_set_up_parameters.png"></p>

<p align="center"><b>Рысунак</b> - <i>Налада ўласцівасці праз акно "Прылады, параметры аб'ектаў"</i></p>

<p align="justify">У гэтым акне можна графічнай выявай (<i>паставіць галачкі</i>) адзначыць, якія прылад або параметры павінны быць зададзены ў поле. Калі акно "<b>Прылады, параметры аб'ектаў</b>" пустое, значыць графічным чынам дадаваць дадзеныя не прадугледжана альбо гэта іншыя дадзеныя, якія такім спосабам дадаваць нельга.</p>

<p align="center"><img src="images/extra_oper_params.png"></p>

<p align="center"><b>Рысунак</b> - <i>Дадатковыя палі аперацыі</i></p>

Надбудова правярае, якія ўласцівасці запоўненыя, а якія не. Для таго, каб не было паведамлення пра незапоўненую ўласцівасць (напрыклад, яно не апрацоўваецца ці склалася так, што яго няма, ці нейкія іншыя ўмовы), неабходна відавочна задаць адмысловае значэнне. Пры апрацоўцы дадзеных уласцівасцяў, сістэма правярае, ці не ўведзена значэнне-заглушка (слова "Не"). Правяраецца не проста слова "Не", а яго наяўнасць ва ўводзімым радку. Калі было ўведзена слова "__АбвгднетАбвгд__", то сістэма распазнае заглушку "**Не**" і запіша гэтае значэнне ў поле. Пры аўтаматычнай праверцы праекту дадзеныя палі лічацца карэктна запоўненымі.

<p align="center"><img src="images/skip_extra_oper_params.png"></p>

<p align="center"><b>Рысунак</b> - <i>Выкарыстанне значэння-заглушкі</i></p>

Тыпы ўласцівасцяў:
1. Тэкставае - значэнне задаецца ў выглядзе тэксту ўручную, або клік па схеме (калі прадугледжана).
2. Булеўскае - падвойны клік, які змяняе значэнне ўласцівасці на супрацьлеглае. Калі значэнне адрозніваецца ад стандартнага, тое яно будзе вылучана тоўстым.

##### Заўвага:

* Калі базавая аперацыя не абрана, то дадатковых палёў не з'явіцца.
* Паля, якія з'яўляюцца, выкарыстоўваюцца пры фарміраванні prg.lua.
* Калі аперацыі ў спісе няма, то гэтая аперацыя не рэалізавана.
* На кожны аб'ект можа быць абрана толькі 1 базавая аперацыя канкрэтнага тыпу (заўв., толькі 1 аперацыя напаўнення на аб'ект).
* Калі ў аб'екце няма нейкай базавай аперацыі г.зн. яна не выкарыстоўваецца, то яе можна выдаліць без шкоды для кіравальнай праграмы.

#### 7.3.3 Выкарыстанне базавага кроку ####

Базавы крок дазваляе паказаць тыя крокі, уласцівыя для базавай аперацыі, інфармацыя аб якіх будзе аўтаматычна запісана ў файле prg.lua. Тым самым апісаны крок не трэба будзе ўручную апісваць у праграме праз файл main.plua. Выбар базавага кроку ажыццяўляецца па такім жа прынцыпе, як і выбар базавага аб'екта, базавай аперацыі. Спіс базавых крокаў для кожнай базавай аперацыі будзе апісаны ў наступным раздзеле дакументацыі.

##### Заўвага:
* Калі ў аб'екце няма якога-небудзь базавага кроку, т.е ён не выкарыстоўваецца, яго можна выдаліць без шкоды для кіравальнай праграмы.

#### 7.3.4 Выкарыстанне абсталявання базавага аб'екта ####
У тэхналагічным аб'екце ёсць укладка "Абсталяванне". Гэта ўкладка змяшчае фізічнае абсталяванне абранага базавага тэхналагічнага аб'екта. Калі ў аб'екта няма ніякага абсталявання, то гэтая ўкладка будзе ўтоена аўтаматычна. Напрыклад, для базавага аб'екта `Вузел мяшання` дадаюцца 3 прылады: датчык люка, датчык рашоткі, мешалка. Усе прылады можна дадаваць як рукамі, так і па кліку на адпаведную прыладу на ФСА. Прыклад дадання на малюнку ніжэй.

<p align="center"><img src="images/baseEquipment.png"></p>

<p align="center"><b>Рысунак</b> - <i>Абсталяванне базавага аб'екта</i></p>

Калі нейкага абсталявання няма ў аб'екце, але яно ёсць у спісе, то гэтае абсталяванне можна не запаўняць.

Нататка: абсталяванне можна дадаваць па кліку на аб'ект у схеме.

У дадатку прысутнічае сістэма аўтаматычнай прывязкі абсталявання да аб'екта. Гэта адбываецца падчас выбару/змены базавага аб'екта, а таксама пры адкрыцці/закрыцці/абнаўленні/захаванні праекту. Прывязка ажыццяўляецца толькі, калі дадзенае поле з абсталяваннем было запоўнена стандартным значэннем і не з'яўляецца пустым. Аўтаматычная прывязка працуе на падставе таго, што стандартызаваны імёны прылад і іх нумары, якія выкарыстоўваюцца для таго ці іншага абсталявання. Сістэма фармуе ОУ прылады (на падставе ОУ аб'екта і яго нумара), складае імя прылады, правярае яго наяўнасць і прывязвае, калі прылада ёсць на схеме. Множная аўтаматычная прывязка прылад адсутнічае.

Дадзены функцыянал дазваляе прывязваць больш за 1 прыладу на адзін тып абсталявання.

#### 7.3.5 Выкарыстанне дадатковых уласцівасцяў аб'екта ####

<p align="justify">Абсталяванне базавага аб'екта з'яўляецца апісаннем фізічнай структуры аб'екта, а поле "<i>Дадатковыя ўласцівасці</i>" аб'екта дазваляе наладзіць логіку працы аб'екта (<i>напрыклад, ігнараванне памылак ці нешта яшчэ</i>). У гэтым полі знаходзяцца ўласцівасці, якія ўплываюць на аб'ект. Калі такіх уласцівасцяў у аб'екта няма, тое гэтае поле не будзе адлюстроўвацца т.е будзе аўтаматычна ўтоена.</p>

<p align="center"><img src="images/baseObjPropertiesInTechObject.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Дадатак. уласцівасці аб'екта</i></p>

<p align="justify">У гэтым полі могуць быць параметры булевыя (<i>так/няма</i>), або актыўныя параметры, якія могуць прымаць прылады, параметры і інш.</p>

#### 7.3.6 Выкарыстанне сістэмных параметраў у базавым аб'екце ####
<p align="justify">Функциональность базового объекта добавляет системные параметры в объект, при их наличии. Если системные параметры были заданы в файле описания, они появятся в базовом объекте. Особенность системных параметров в том, что они управляют какими-то общими параметрами. В системных параметрах можно только редактировать значение, все остальное доступно только для чтения.</p>

<p align="center"><img src="images/systemBaseParameters.png"></p>

<p align="center"><b>Рисунок</b> - <i>Системные параметры объекта</i></p>

#### 7.3.7 Спіс базавых аб'ектаў, аперацый, параметраў, крокаў і абсталявання ####

Перенесено в репозиторий с описанием базовых объектов. Т.е в ptusa-Lua-dairy-system. Файл ReadMe.md.

#### 7.3.8 Рэкамендацыі па выкарыстанні ПП(_пазначэнне прылад_) у аб'ектах ####
* Для лініі паказваць літару, якая пазначае лінію - `B`, `C` і інш.
* Для вузлоў мяшання/астуджэнні/падагрэву паказваць ОУ - `MIX`/`COOLER`/`HEATER` адпаведна (_рэгістр не важны_). Калі вузел мяшання/астуджэнні/падагрэву прыналежыць толькі аднаму аб'екту, то для яго ОУ можна выкарыстаць пазначэнне таго аб'екта, да якога ён прыналежыць. Напрыклад, для лініі з ОУ `C` можна выкарыстоўваць такое ж ОУ для вузла.

#### 7.4 Экспарт аб'ектаў з рэдактара і зваротны імпарт ####

<p align="justify">Надбудова дазваляе экспартаваць аб'екты, апісаныя ў рэдактары ў файл, а затым выкарыстоўваць экспартаваныя аб'екты ў іншых праектах, папярэдне загрузіўшы іх (<i>імпартаваўшы</i>) у праект. Выклік вокнаў экспарту або імпарту выклікаецца з акна рэдактара (гл. пункт <b>7.1</b></i>).</p>

У імпарце і экспарце аб'ектаў, глабальныя нумары аб'ектаў будуць занулены (_нулявыя значэння_). Гэта прынята таму, што гэтыя аб'екты яшчэ не знаходзяцца ў агульным пуле глабальных аб'ектаў асноўнага дрэва.

#### 7.4.1 Экспарт аб'ектаў ####

<p align="justify">Пры адкрыцці меню экспарту, з'яўляецца спецыяльнае акно (<em>гл. Рысунак</em>), у якім трэба адзначыць галачкамі аб'екты, якія трэба экспартаваць і націснуць кнопку "<em>Экспартаваць</em>". Кнопка "Адмена</em>" - адмяняе дзеянне, закрывае акно экспарту. Дадатковыя кнопкі над спісам: "<em>Усе</em>" і "<em>Ачысціць</em>", дазваляюць хутка адзначыць/зняць галачкі з усіх элементаў спісу.</p>

<p align="center"><img src="images/exportObjectsForm.png"></p>

<p align="center"><b>Рысунак</b> - <i>Акно экспарту</i></p>

<p align="justify">Пасля націску на кнопку "Экспартаваць</em>", адкрыецца дыялог (<em>стандартны Windows дыялог, выкліканы пры захаванні файла</em>), у якім трэба паказаць месца захавання і назоў файла. Пасля націску кнопкі "<em>Захаваць</em>", акно экспарту будзе аўтаматычна зачынена, а файл з аб'ектамі з'явіцца па ўказаным шляху з названым імем (гл. Рысунак ніжэй).</p>

<p align="center"><img src="images/saveExportObjectsForm.png"></p>

<p align="center"><b>Рысунак</b> - <i>Акно захавання</i></p>

Алгарытм захавання:
1. Указваем шлях да файла;
2. Паказваем імя файла;
3. Ціснем кнопку "_Захаваць_".

#### 7.4.2 Імпарт аб'ектаў ####

<p align="justify">Пры адкрыцці меню імпарту, з'яўляецца спецыяльнае акно (<em>гл. Рысунак ніжэй</em>). У гэтым акне, неабходна пазначыць праз кнопку "<em>Агляд</em>" файл з аб'ектамі і загрузіць яго, затым, адзначыўшы патрэбныя аб'екты галачкамі ў спісе, націснуць кнопку "<em>Імпартаваць</em>". Кнопка "Адмена</em>" - адмяняе дзеянне і закрывае акно імпарту. Дадатковыя кнопкі над спісам: "<em>Усе</em>" і "<em>Ачысціць</em>", дазваляюць хутка адзначыць/зняць галачкі з усіх элементаў спісу.</p>

**Заўвага**:
1. Ва ўсіх аб'ектаў пры імпарце прывязка скідаецца, бо невядома, што прывязана да яго ў праекце і куды ён імпартуецца;
2. У дзеяннях скідаюцца прылады, якія не існуюць у праекце, куды імпартуецца аб'ект;
3. Скідаюцца абмежаванні аперацый, бо яны могуць у новым праекце не супадаць і выклікаць памылкі;
3. Усё астатняе цалкам капіюецца.

<p align="center"><img src="images/importTechObjectsForm.png"></p>

<p align="center"><b>Рысунак</b> - <i>Акно імпарту</i></p>

<p align="justify">Націснуўшы кнопку "<em>Агляд</em>", з'явіцца акно (<em>гл. Рысунак ніжэй</em>), у якім трэба паказаць шлях да файла (<em>пункт 1 на малюнку</em>), абраць файл і націснуць кнопку "<em>адкрыць</em>" (<em>н

<p align="center"><img src="images/loadImportedObjectsForm.png"></p>

<p align="center"><b>Рысунак</b> - <i>Акно загрузкі</i></p>

<p align="justify">Пасля адкрыцця файла з аб'ектамі, аб'екты будуць загружаныя ў сістэму і іх спіс будзе выведзены ў акенцы, у якім можна адзначаць патрэбныя для імпарту аб'екты (<em>гл. Рысунак ніжэй</em>).</p>

<p align="center"><img src="images/loadImportedObjectsFormAfterImport.png"></p>

<p align="center"><b>Рысунак</b> - <i>Акно імпарту пасля загрузкі аб'ектаў</i></p>

<p align="justify">Пасля расстаноўкі птушак на патрэбных для імпарту ў праект аб'ектах, неабходна націснуць кнопку "<em>Імпартаваць</em>". Аб'екты дададуцца ў <strong>канец</strong> дрэва аб'ектаў праекта, і акно імпарту аўтаматычна зачыніцца.</p>

#### 7.5 Аўтаматычная ўстаўка аб'ектаў з макрасаў ####

EasyEplanner дазваляе аўтаматычна ўстаўляць патрэбныя базавыя аб'екты на аснове макрасаў. Гэта значыць, дастаткова ўставіць макрас з патрэбным апісаннем, і сістэма аўтаматычна дадасць новы базавы аб'ект. Падрабязней гэты функцыянал апісаны [тут](AutomaticInsertObjectFromEplanMacros.md).

#### 7.6 Скід базавага аб'екта ў рэдактары ####

Скід базавага аб'екта дазваляе скінуць базавы аб'ект. Для таго, каб скінуць аб'ект, неабходна вылучыць аб'ект і націснуць кнопку скіду ([малюначак тут](#71-Апісанне-вокны-рэдактара)) пад нумарам <strong>16</strong>. Неабходна ўключыць рэжым рэдагавання. Базавы аб'ект ператворыцца ў "<strong>Неапазнаны аб'ект</strong>" і будзе перамешчаны ў адпаведную ўкладку рэдактара аб'ектаў. Змяненне базавага аб'екта з неапазнанага ў нейкі вызначаны аб'ект можна ажыццявіць праз механізм выразання (<em>Ctrl + X</em>). Падрабязней - [тут](#711-Неопознанные-объекты-при-загрузке-описания-проекта).

<p align="justify"><b>Увага</b>: будуць скінуты толькі палі і ўласцівасці, якія залежаць ад базавага аб'екта. Гэта значыць, базавы крокі, базавыя аперацыі, абсталяванне і інш. Усё астатняе - застанецца. Крокі, аперацыі і прылады ў іх, а таксама параметры не памяняюцца.</p>

#### 7.7 Выкарыстанне груп з тыпавым аб'ектам ####

<p align="justify">Тыпавы аб'ект вызначае базавую функцыянальнасць для групы тэхналагічных аб'ектаў. Спадчынныя аб'екты абнаўляюцца як пры стварэнні на аснове тыпавога, так і пры рэдагаванні тыпавога аб'екта. Вялікая частка палёў тыпавога аб'екта не ўспадкоўваецца, калі яны не запоўненыя, а ў спадчынных аб'ектах можна задаць гэтым палям розныя значэнні.</p>

<p align=justify>Для карэктнага перамяшчэння аперацый і крокаў у тыпавым аб'екце і такога ж перамяшчэння элементаў у спадчынных аб'ектах, для іх павінны быць устаноўлены ўнікальныя назвы.</p>

##### 7.7.1 Стварэнне групы і даданне тэх. аб'ектаў #####

Стварыць групу з тыпавым аб'ектам можна трыма спосабамі:
1. З кантэкстнага меню базавага аб'екта стварыць новы тыпавы аб'ект як паказана на малюнку ніжэй, альбо выкарыстоўваць камбінацыю клавіш <kbd>Ctrl</kbd>+<kbd>Insert</kbd>:

<p align=center>
<img src=images/CreateNewGenericGroup.png/>
<br><b>Рысунак</b> - <i>Стварэнне новага тыпавога аб'екта</i>
</p>

2. Стварыць тыпавы аб'ект на аснове тых. аб'екта камандай Стварыць(<kbd>Insert</kbd>), тыпавы аб'ект набудзе ўсе палі зыходнага аб'екта;

3. Згрупаваць некалькі тэхналагічных аб'ектаў з кантэкстнага меню, як паказана на малюнку ніжэй, або выкарыстоўваць камбінацыю клавіш <kbd>Ctrl</kbd>+<kbd>G</kbd>. У гэтым выпадку тыпавы аб'ект аўтаматычна набудзе агульныя палі вылучаных аб'ектаў:

<p align=center>
<img src=images/CreateGenericGroupFromManyObjects.png/>
<br><b>Рысунак</b> - <i>Групоўка некалькіх тэхналагічных аб'ектаў і стварэнне тыпавога аб'екта на іх аснове</i>
</p>

<p align="justify">Дадаць новыя аб'екты ў групу з тыпавым аб'ектам можна пры дапамозе кнопкі "Стварыць"(Insert) альбо ўставіць капіяваныя/выразаныя аб'екты, тады яны набудуць функцыянальнасць тыпавога аб'екта і захаваюць ужо наяўную функцыянальнасць.</p>

##### 7.7.2 Дзеянні #####

<p align="justify">Прылады, дададзеныя ў дзеянні тыпавога аб'екта абазначаюцца ў спадчынных аб'ектах спецыяльным вылучэннем, як паказана на малюнках ніжэй. Дадзеныя прылады можна рэдагаваць і ў спадчынным аб'екце.</p>

<div align=center>

Дзеянне ў тыпавым аб'екце Дзеянне ў спадчынным аб'екце
:-------------------------:|:-------------------------:
<img src="images/ActionGenericObject.png" height="60"/> | <img src="images/ActionInheritedObject.png" height="60"/>

<p><b>Рысунак</b> - <i> ўспадкоўванне прылад у дзеянні з тыпавога аб'екта </i> </p>
</div>

<p align = "justify">Прылады, дададзеныя ў дзеянне з назвай аб'екта адпаведным ОУ тэхналагічнага аб'екта будуць аўтаматычна змяняць нумар аб'екта на тэхналагічны нумар адпаведнага спадчыннага аб'екта. Можна выкарыстоўваць прыладу з любым нумарам аб'екта.</p>

<div align=center>

Тыпавы танк | Атрыманы ў спадчыну танк №1 | Успадкоўваны танк №2
:-------------------------:|:-------------------------:|:---------------:
<img src="images/ActionGenericEplanName.png" height=170/> | <img src="images/ActionInheritedEplanNameObject1.png" height=170/> | <img src="images/ActionInheritedEplanNameObject2.png" height=170/>

<p><b>Рысунак</b> - <i>Успадкоўванне прылад у дзеянні з тыпавога аб'екта c вызначаным ОУ</i></p>
</div>

##### 7.7.3 Параметры ####

<p align="justify">У спадчынныя аб'екты пераходзяць усе параметры тыпавога аб'екта, а таксама іх дадзеныя (назва, аперацыя, lua-імя...) і значэнне. Калі ў параметры ў тыпавым аб'екце якое-небудзь поле не запоўнена, тое дадзенае поле не ўспадкоўваецца і яго можна змяняць ва ўсіх аб'ектах групы. Для значэння параметра ў тыпавым аб'екце можна ўсталяваць значэнне "-" (Мінус), тады значэнне поля не ўспадкоўваецца, і ва ўсіх аб'ектах групы можа быць усталявана рознае значэнне гэтага параметра, як паказана на малюнках ніжэй.</p>

<div align=center>

Параметр без значэння ў тыпавым аб'екце Параметр са значэннем у спадчыннай аб'екце
:-------------------------:|:-------------------------:
<img src="images/ParametersGenericEmptyValue.png" height="120"/> | <img src="images/ParametersInheritedEmtyValue.png" height="120"/>

<p><b>Рысунак</b> - <i> ўспадкоўванне параметраў з пустым значэннем </i> </p>
</div>

<p align="justify"><b>Нататка:</b> У спадчынных аб'ектах можна дадаваць дадатковыя параметры, але, пры даданні новых параметраў у тыпавы аб'ект, параметры спадчыннага аб'екта будуць "Зацёртыя" новымі параметрамі.</p>

#### 7.7.4 Прывязаныя агрэгаты ####

<p align=justify>Пры прывязцы агрэгата да тыпавога аб'екта можна прывязаць групу аб'ектаў да групы гэтага тыпавога аб'екта. Для гэтага ў якія прывязваюцца аб'ектах павінны быць зададзены тыпы і яны павінны знаходзіцца ў базавым аб'екце аднаго падтыпу. Тады прывязка адбудзецца ў адпаведнасці з тэхналагічнымі нумарамі аб'ектаў. У спадчынных аб'ектах можна дадаткова прывязаць аб'екты. Прывязаныя аб'екты, атрыманыя ў спадчыну ад тыпавога аб'екта, падсвятляюцца па аналогіі з прыладамі і дзеяннямі, як паказана на малюнку ніжэй. </p>

<p align=center><img src="images/GenericAttachedObjects.png"/><br><b>Рысунак</b> - Спадчына прывязаных агрэгатаў</i></p>

#### 7.8 Аўтазапаўненне ####

Аўтазапаўненне - гэта функцыянальнасць для аўтаматычнага запаўнення дадзеных
тэхналагічных аб'ектаў на падставе пэўных перадналад, устаноўленых
пры рэдагаванні.

Актывацыя дадзенай функцыі даступная для пэўных элементаў дрэва з
кантэкстнага меню або спалучэннем клавіш <kbd>Ctrl</kbd> + <kbd>A</kbd>.

##### 7.8.1 Аўтазапаўненне параметраў #####

Аўтаматычнае запаўненне параметраў можна запусціць з элементаў
тых. аб'ектаў: ​​`Параметры` ці `Аперацыі`. Запуск аўтазапаўнення з дадзеных
вузлоў запускае поўнае аўтазапаўненне па ўсіх аперацыях. Папярэдне
неабходна вызначыць парадак аперацый, прывязаць неабходныя вузлы і
наладзіць дадатковыя ўласцівасці аперацый, выбраўшы ў якіх аперацыях
якія вузлы выкарыстоўваюцца (назвы параметраў для вузлоў не запаўняюцца).

Параметры генеруюцца па наступным шаблоне:
- [ 1 - 20 ] - Сістэмныя (агульныя) параметры (генеруюцца пры стварэнні аб'екта,
пры аўтазапаўненні дадаюцца толькі заглушкі)
- [ 21 - 30 ] - Параметры 1-й аперацыі:
+ Параметры аперацыі.
+ Параметры вузлоў аперацыі.
+ Заглушкі.
- [ 31 - 40 ] - Параметры 2-й аперацыі.
- [ 41 - 60 ] - Параметры 3-й аперацыі
(калі параметраў генеруецца больш за 10, то група павялічваецца кратна 10).
- ...

Аўтаматычнае запаўненне можна запусціць асобна для кожнай аперацыі,
дад. уласцівасцяў аперацыі і асобна для асноўнага параметра прывязанага вузла.

### 8 Устаноўка абмежаванняў ###

<p align="justify">Для кожнай аперацыі ў аб'екце створана група палёў: «Ограничения внутри объекта», «Общие ограничения», «Ограничения на последующие операции» , якія прызначаны для налады абмежаванняў для дадзенай аперацыі.</p>

<p align="center"><img src="images/restrictions.png"></p>

<p align="center"><b>Рысунак</b> - <i>Местонаходжанне абмежаванняў</i></p>

<p align="justify">Абмежавання ўяўляюцца парамі выгляду {N, M}, дзе <b>N</b> – нумар аб'екта, у якім правяраем на ўключанасць аперацыю <b>M</b> Толькі трэба ўлічваць, што N - глабальны нумар аб'екта, які для карыстальніка недаступны (<em>адбылося ад старога рэдактара</em>). Абмежаванні правяраюцца перад уключэннем аперацыі, у якой прапісваюцца пары. "Абмежаванні ўнутры аб'екта" прызначаны для апісання недаступных аперацый ўнутры аб'екта. Да прыкладу, для аперацыі "Напаўненне" можам пазначыць аперацыю "Сквашванне", нам не трэба правяраць "Сквашванне" ва ўсіх іншых аб'ектах. "Агульныя абмежаванні" апісваюць недаступныя аперацыі з іншымі аб'ектамі. У полі "Абмежаванні на наступныя аперацыі" паказваюцца аперацыі аб'екта, якія нельга ўключыць пасля бягучай. Напрыклад, пасля аперацыі "Выдача" нельга ўключыць "Напаўненне". Рэдагаваць абмежаванні можна ўручную ці праз акно са спісам аперацый. Яго можна выклікаць з меню <b>"EasyEplanner" -> "Аперацыі, абмежаванні, прывязка аб'ектаў"</b> (<em>глядзі прыклад у главе 1</em>). Калі акно для рэдагавання тэхналагічных аб'ектаў знаходзіцца ў рэжыме рэдагавання, то пры пераходзе на радок з абмежаваннямі ў вузлоў дрэва з аперацыямі з'явяцца _CheckBox_ для выбару неабходных абмежаванняў.</p>

<p align="center"><img src="images/selected_restrictions.png"></p>

<p align="center"><b>Рысунак</b> - <i>Рэдагаванне абмежаванняў</i></p>

<p align="justify">Пасля рэдагавання і зачыненні праекту ўсе абмежаванні экспартуюцца ў асобны файл <b>main.restrictions.lua</b>, які ў далейшым запісваецца ў кантролер. Перазагрузка дадзенага файла магчыма без перазагрузкі праграмы. Для працы з абмежаваннямі створаны наступныя сістэмныя параметры:</p>

* __CMD__ - Для перазагрузкі файла абмежаванняў у CMD пішам 100, калі ўсё ОК, то вернецца 0, інакш 1 і радок з апісаннем памылкі будзе ў CMD_ANSWER.
* __CMD_ANSWER__ – Радок з апісаннем памылкі перазагрузкі абмежаванняў.
* __P_RESTRICTIONS_MODE__ – Параметр для ўключэння/выключэнні абмежаванняў - 0 - аўта, 1 - ручны, 2 - паўручны (_праз час P_RESTRICTIONS_MANUAL_TIME вернецца ў аўтаматычны рэжым_).
* __P_RESTRICTIONS_MANUAL_TIME__ - Праца модуля абмежаванняў у ручным рэжыме зададзены час, мс.

### 9 Сінхранізацыя і экспарт

#### 9.1 Сінхранізацыя назваў прылад і модуляў ####

<p align="justify">Сінхранізуе прывязаныя прылады: палі "Заўвага" ў прылад. Поле задаецца на функцыянальнай схеме аўтаматызацыі (<em>ФСА</em>) і потым выкарыстоўваецца пры прывязцы да модуляў уводу-высновы. Калі пасля выканання прывязкі змяніць гэтае поле на ФСА, то там, дзе гэта прылада ўжо прывязана, застанецца старое значэнне гэтага поля. Дадзеная функцыя вырашае гэтую праблему. Будзе карысна, калі за аснову бярэцца ўжо існуючы праект або пры змене прызначэння прылад і інш.</p>

**Заўвага**:
1. Каб пазбегнуць няправільнага спрацоўвання функцыі сінхранізацыі  (_ккалі праект у EasyEplaner апісаны не поўнасцю або з памылкамі_), калі ласка, рабіце рэзерваванне праекта перад выклікам функцыі сінхранізацыі.
2. Улічыце, што праекты, у якіх DEV_VTUG папросту заменены на Y (абазначэнне пнеўмавострава) будуць апрацоўвацца з выдаленнем множнай прывязкі, таму што лічыцца, што пераход ад старога выгляду прывязкі да новага (хоць і прылады прывязаныя) завершаны не цалкам. Што б гэтага не адбывалася, неабходна цалкам перайсці на новы від прывязкі пнеўмавострава Y (_глдз. раздзел 3.2.2_)

<p align="justify">таксама, калі была выдаленая якая-небудзь прывязаная прылада, то, запусціўшы сінхранізацыю, гэтая прылада аўтаматычна будзе выдаленае з усіх прывязак да модуляў уводу-высновы.</p>

<p align="justify">У залежнасці ад тыпу прылады і колькасці прывязаных прылад алгарытм сінхранізацыі будзе адрознівацца.</p>

* Для адзінарных прылад (_калі да аднаго канала прывязана адна прылада_) будзе заўсёды дадавацца тэкст з поля "_Заўвага_", нават калі яго выдаліць уручную, то пры сінхранізацыі тэкст аўтаматычна запішацца ў функцыянальны тэкст у які прывязваецца модулі ўводу-высновы.

<p align="justify">Калі да модуля ўводу-вываду прывязана больш за 1 прылады, гэта значыць на кожны канал прылады ў функцыянальным тэксце прыходзіцца два і больш прылады (<em>гэта магчыма толькі пры прывязцы клапанаў да пнеўмавострава і AS-i інтэрфейсу</em>), то ў справу ўступаюць іншыя алгарытмы апрацоўкі дадзеных.</p>

* Для AS-інтэрфейсу каментары не пішуцца і не абнаўляюцца, але ў AS-інтэрфейсе ўлічваецца параметр *R_AS_NUMBER*, у залежнасці ад якога клапана размяшчаюцца ў функцыянальным тэксце. Для карэктнага адлюстравання неабходна правільна наладзіць адлюстраванне функцыянальнага тэксту ва ўкладцые "_Отображение_" (_гдзз. канец падпункта_). Гэтак жа для модуляў AS-інтэрфейсу аўтаматычна ва ўласцівасць "Доп. поле [20]" запісваюцца парадкавыя лікі ад 1 да 62 (_максимальное количество клапанов, которое может быть привязано для AS-i 3.0_) з падзельнікам, які ўяўляе сабой сімвал новага радка. З дапамогай гэтых парадкавых нумароў ствараецца бачнае адлюстраванне, якое паказвае які. *R_AS_NUMBER* у клапана і якія *R_AS_NUMBER* вольныя.

<p align="center"><img src="images/ASISynchronizeBinding.png"></p>

<p align="center"><b>Рисунак</b> - <i>Прыклад адлюстравання для AS-i</i></p>

* Для пнеўмавострава абнаўленне адбываецца прасцейшае. Калі да клемы пнеўмавострава прывязана адна прылада, то сінхранізацыя адбываецца па такім жа алгарытме, як і для адзінарных прылад, а калі да клемы прывязана больш за адну прыладу, то магчымыя два варыянты:
    * Калі пнеўмавостраў з прывязкай знаходзіцца на шматполюснай схеме злучэнняў, то ў яго будуць прыбраныя каментары;
    * Калі пнеўмавостраў з прывязкай знаходзіцца на схеме тыпу "Агляд", то каментарыі будуць пакінутыя.

##### Настройка акна "Адлюстраванне" для AS-i модуля

Для таго, каб AS-i адлюстроўваўся нармальна (і прывязка, і парадкавыя нумары), неабходна правесці першапачатковую наладу адлюстравання функцыянальнага тэксту. **ВАЖНО** - парадкавыя нумары клапанаў запісваюцца ў Дад. поле [20] аўтаматычна.

Ніжэй на малюнках паказана, як павінна быць наладжана.

<p align="center"><img src="images/EplanFunctionalTextASI.png"></p>

<p align="center"><b>Рысунак</b> - <i>Наладка адлюстравання функцыянальнага тэксту</i></p>

<p align="center"><img src="images/EplanUserFieldASI.png"></p>

<p align="center"><b>Рысунак</b> - <i>Наладка адлюстравання дад. поле [20]</i></p>

<p align="center"><img src="images/EplanFunctionalTextResultASI.png"></p>

<p align="center"><b>Рысунак</b> - <i>Вынік наладкі</i></p>

Гэта значыць, адлюстраванне павінна быць наладжана так, каб наадварот лічбы 1 з Дад. поле [20] было першае значэнне прывязкі, а функцыя сінхранізацыі сама размесціць модулі ў патрэбным парадку.

Гэтак жа, можна выкарыстоўваць альтэрнатыўную настройку адлюстравання для Доп. поле [20] (_пры ўмове, што адлюстраванне Функцыянальнага тэксту наладжана так, як апісана вышэй_).

<p align="center"><img src="images/EplanAlternativeUserFieldASI.png"></p>

<p align="center"><b>Рысунак</b> - <i>Альтэрнатыўная настройка адлюстравання Дад. поле [20]</i></p>

Пры выкарыстанні альтэрнатыўнай налады размяшчэнне лічбаў у Дад. поле [20] нельга памяняць з дапамогай уласцівасцяў _Абсцисса_ і _Ордината_.

#### 9.2 Экспарт XML для EasyServer ####

Дазваляе стварыць базу каналаў для EasyServer. Пры націску на дадзены пункт меню з'явіцца акно для настройкі экспарту:

<p align="center"><img src="images/channelBaseExportDialog.jpg"></p>

<p align="center"><b>Рысунак</b> - <i>Акно экспарту базы каналаў</i></p>

Пры адкрыцці акна селектары ўсталёўваюцца ў стандартныя становішчы (_як на малюнку_).

Указваецца:
1. Неабходнасць ствараць новы файл базы каналаў (першая пара селектараў - "_Да_", "_Нет, использовать существующую_") ці ж выкарыстоўваць існуючую. Пасля выбару ў селектары неабходна націснуць кнопку "_Обзор_" і выбраць, куды захаваць базу каналаў або выбраць файл базы каналаў (_у залежнасці ад абранага рэжыму_). Для захавання новай базы каналаў можна выкарыстоўваць стандартны шлях (_які зададзены ў радку на малюнку_).

2. Неабходнасць у групоўцы тэгаў у адзін падтып (другая пара селектараў - "_Да_", "_Нет_"). У залежнасці ад абранага рэжыму групоўкі, аб'екты будуць па-рознаму згрупаваны ў базе каналаў.

3. Фармат запісу базы каналаў (трэцяя пара селектараў - "_По индексам_", "_По именам_"). Дазваляе абраць фармат запісу імёнаў аб'ектаў. Па індэксах - звычайны, стары варыянт. Па імёнах - новы варыянт, калі замест OBJECT выкарыстоўваецца поле "Імя аб'екта Monitor" і нумар аб'екта.

_Заўвага:_ для карэктнага экспарту базы каналаў, неабходна, каб у рэдактары тэхналагічных аб'ектаў было правільна запоўнена поле "Імя аб'екта Monitor" у аб'ектах. Калі гэтыя палі ў аб'ектах будуць супадаць, то гэтыя аб'екты будуць адключаныя (закаментаваныя) у базе каналаў. Напрыклад, калі ёсць аб'екты са значэннем поля TankObj з аднолькавымі нумарамі (TankObj1 і TankObj1, тып не ўплывае), то база каналаў закаментуе гэтыя аб'екты. Таму важна, каб поле "Імя аб'екта Monitor" было ўнікальна для кожнага тыпу аб'ектаў. Напрыклад, _Танк малока 1_, _Танк вады 1_ можна пазначыць, як _TankMilkObj_ і _TankWaterObj_. Надбудова папярэджвае карыстальніка аб супадаючых імёнах у аб'ектах.

Дадаткова база каналаў аўтаматычна экспартуецца пры кожным зачыненні праекта (_ці зачыненне праекту, ці завяршэнне Eplan з адчыненым праектам_). Захаванне ажыццяўляецца ў тэчку з праектам Eplan у каталог **chbase**. База каналаў будзе мець такую ​​ж назву, як і імя праекта. У базе каналаў тэгі будуць згрупаваны па падтыпах, а аб'екты апісаны на аснове індэксаў.

##### 9.2.1 Экспартуемыя параметры #####

Калі не паказаны падтып прылады, гэтыя параметры экспартуюцца для любога тыпу прылады. Першы ўзровень спісу - прылада, другі - падтып, трэці - гэта параметры з каментарамі.

1. Прылада- **V**
    * **V_DO1**, **V_DO2**, **V_IOLINK_VTUG_DO1**, **V_IOL_TERMINAL_MIXPROOF_DO3**
        * ST - стан;
        * M - ручны рэжым;
    * **V_DO1_DI1_FB_ON**, **V_IOLINK_VTUG_DO1_FB_ON**, **V_DO1_DI1_FB_OFF**, **V_IOLINK_VTUG_DO1_FB_OFF**
        * ST - стан;
        * M - ручны рэжым;
        * P_ON_TIME - час уключэння;
        * P_FB - уключэнне/выключэнне зваротнай сувязі;
        * FB_OFF_ST - бягучы стан обратной связи (на адключаны стан);
    * **V_DO1_DI2**, **V_DO2_DI2**, **V_DO2_DI2_BISTABLE**, **V_MIXPROOF**, **V_AS_MIXPROOF**, **V_AS_DO1_DI2**, **V_BOTTOM_MIXPROOF**, **V_IOLINK_VTUG_DO1_DI2**, **V_MINI_FLUSHING**
        * ST - стан;
        * M - ручны рэжым;
        * P_ON_TIME - час уключэння;
        * P_FB - уключэнне/выключэнне зваротнай сувязі;
        * FB_OFF_ST - бягучы стан обратной связи (на адключаны стан);
        * FB_ON_ST - бягучы стан обратной связи (на ўключаны стан);
    * **V_IOLINK_MIXPROOF**, **V_IOLINK_DO1_DI2**
        * ST - стан;
        * M - ручны рэжым;
        * P_ON_TIME - час уключэння;
        * P_FB - уключэнне/выключэнне зваротнай сувязі;
        * V - аналагавае значэнне;
        * BLINK - індыкацыя месцазнаходжання прылады (па змаўчанні міргае фіялетавым колерам);
        * CS - сігнал кіравання;
        * ERR - памылка;
    * **V_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
2. Прылада - **VC**
    * **VC**, **VC_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
    * **VC_EY**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
    * **VC_IOLINK**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * BLINK - индикация местонахождения устройства (быстро мигающие светодиоды);
        * NAMUR_ST - стан по стандарту NAMUR;
        * OPENED - адкрыты;
        * CLOSED - закрыт;
3. Прылада - **M**
    * **M**
        * ST - стан;
        * M - ручны рэжым;
        * P_ON_TIME - час уключэння;
    * **M_FREQ**
        * ST - стан;
        * M - ручны рэжым;
        * P_ON_TIME - час уключэння;
        * V - аналагавае значэнне;
    * **M_REV**, **M_REV_FREQ**, **M_REV_2**, **M_REV_FREQ_2**, **M_REV_2_ERROR**
        * ST - стан;
        * M - ручны рэжым;
        * P_ON_TIME - час уключэння;
        * V - аналагавае значэнне;
        * R - рэверс;
    * **M_ATV**
        * ST - стан;
        * M - ручны рэжым;
        * P_ON_TIME - час уключэння;
        * V - аналагавае значэнне;
        * R - рэверс;
        * EST - пашыраны стан;
        * RPM - абароты ў хвіліну;
        * FRQ - частата;
    * **M_ATV_LINEAR**
        * ST - стан;
        * M - ручны рэжым;
        * P_ON_TIME - час уключэння;
        * V - аналагавае значэнне;
        * R - рэверс;
        * EST - пашыраны стан;
        * RPM - абароты ў хвіліну;
        * FRQ - частата;
        * P_SHAFT_DIAMETER - дыяметр вала, м.;
        * P_TRANSFER_RATIO - перадаткавы лік;
    * **M_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
4. Прылада - **LS**
    * **LS_MIN**, **LS_MAX**, **LS_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * P_DT - дельта;
    * **LS_IOLINK_MAX**, **LS_IOLINK_MIN**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_DT - дельта;
5. Прылада - **FS**
    * **FS**
        * ST - стан;
        * M - ручны рэжым;
        * P_DT - дельта;
    * **FS_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
6. Прылада - **GS**
    * **GS**, **GS_INVERSE**
        * ST - стан;
        * M - ручны рэжым;
        * P_DT - дельта;
    * **GS_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
7. Прылада - **TE**
    * **TE**, **TE_IOLINK**
        * ST - стан;
        * M - ручны рэжым;
        * P_CZ - зрух за нуль;
        * V - аналагавае значэнне;
    * **TE_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
    * **TE_ANALOG**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_ERR - значение ошибки (значэнне падчас памылкі датчыка);
        * P_MIN_V - мінімальнае значэнне;
        * P_MAX_V - максімальнае значэнне;
        * P_CZ - зрух за нуль;
8. Прылада - **LT**
    * **LT**
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
        * P_ERR - значение ошибки (значэнне падчас памылкі датчыка);
    * **LT_CYL**
        * M -ручны рэжым;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
        * P_MAX_P - максімальны ціск;
        * P_R - радыус танка;
        * CLEVEL - пералічаны ўзровень;
    * **LT_CONE**, **LT_IOLINK**
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
        * P_MAX_P - максімальны ціск;
        * P_R - радыус танка;
        * CLEVEL - пералічаны ўзровень;
        * P_H_CONE - вышыня конуснай часткі танка;
    * **LT_TRUNC**
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
        * P_MAX_P - максімальны ціск;
        * P_R - радыус танка;
        * CLEVEL - пералічаны ўзровень;
        * P_H_TRUNC - вышыня ўсечанай часткі танка (нідзе і ніколі не выкарыстоўвалася);
    * **LT_VIRT**
        * M - ручны рэжым;
        * V - аналагавае значэнне;
9. Прылада - **HA**
    * **HA**, **HA_VIRT**
        * ST - стан;
        * M - ручны рэжым;
10. Прылада - **HL**
    * **HL**, **HL_VIRT**
        * ST - стан;
        * M - ручны рэжым;
11. Прылада - **SB**
    * **SB**
        * ST - стан;
        * M - ручны рэжым;
        * P_DT - дельта;
    * **SB_VIRT**
        * ST - стан;
        * M - ручны рэжым;
12. Прылада - **DI**
    * **DI**
        * ST - стан;
        * M - ручны рэжым;
        * P_DT - дельта;
    * **DI_VIRT**
        * ST - стан;
        * M - ручны рэжым;
13. Прылада - **DO**
    * **DO**, **DO_VIRT**
        * ST - стан;
        * M - ручны рэжым;
14. Прылада - **AI**
    * **AI**
        * ST - стан;
        * M - ручны рэжым;
        * P_MIN_V - мінімальнае значэнне;
        * P_MAX_V - максімальнае значэнне;
        * V - аналагавае значэнне;
    * **AI_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
15. Прылада - **AO**
    * **AO**
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_MIN_V - мінімальнае значэнне;
        * P_MAX_V - максімальнае значэнне;
    * **AO_VIRT**
        * M - ручны рэжым;
        * V - аналагавае значэнне;
    * **AO_EY**
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_MIN_V - мінімальнае значэнне;
        * P_MAX_V - максімальнае значэнне;
16. Прылада - **PT**
    * **PT**
        * ST - стан;
        * M - ручны рэжым;
        * P_MIN_V - мінімальнае значэнне;
        * P_MAX_V - максімальнае значэнне;
        * P_CZ - зрух за нуль;
        * V - аналагавае значэнне;
    * **PT_IOLINK**
        * ST - стан;
        * M - ручны рэжым;
        * P_MIN_V - мінімальнае значэнне;
        * P_MAX_V - максімальнае значэнне;
        * V - аналагавае значэнне;
    * **PT_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне значение;
17. Прылада - **FQT**
    * **FQT**
        * ST - стан;
        * M - ручны рэжым;
        * V - адноснае (карыстальніцкае) значэнне;
        * ABS_V - абсалютнае значэнне;
        * DAY_T1 - сёння, лічыльнік 1;
        * PREV_DAY_T1 - учора, лічыльнік 1;
        * DAY_T2 - сёння, лічыльнік 2;
        * PREV_DAY_T2 - учора, лічыльнік 2;
    * **FQT_F**, **FQT_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - адноснае (карыстальніцкае) значэнне;
        * ABS_V - абсалютнае значэнне;
        * P_MIN_FLOW - мінімальнае значэнне патоку;
        * P_MAX_FLOW - максімальнае значэнне потока;
        * P_CZ - зрух за нуль;
        * F - выдатак;
        * P_DT - дельта;
        * P_ERR_MIN_FLOW - параметр для апрацоўкі памылкі рахункі імпульсаў;
        * DAY_T1 - сёння, лічыльнік 1;
        * PREV_DAY_T1 - учора, лічыльнік 1;
        * DAY_T2 - сёння, лічыльнік 2;
        * PREV_DAY_T2 - учора, лічыльнік 2;
    * **FQT_IOLINK**
        * ST - стан;
        * M - ручны рэжым;
        * V - адноснае (карыстальніцкае) значэнне;
        * ABS_V - абсалютнае значэнне;
        * T - тэмпература;
        * P_ERR_MIN_FLOW - параметр для апрацоўкі памылкі рахункі імпульсаў;
        * DAY_T1 - сёння, лічыльнік 1;
        * PREV_DAY_T1 - учора, лічыльнік 1;
        * DAY_T2 - сёння, лічыльнік 2;
        * PREV_DAY_T2 - учора, лічыльнік 2;
18. Прылада - **QT**
    * **QT**
        * ST - стан;
        * M - ручны рэжым;
        * P_MIN_V - мінімальнае значэнне;
        * P_MAX_V - максімальнае значэнне;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
    * **QT_OK**
        * ST - стан;
        * M - ручны рэжым;
        * P_MIN_V - мінімальнае значэнне;
        * P_MAX_V - максімальнае значэнне;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
        * OK - проверка концентратомера
    * **QT_IOLINK**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
        * T - тэмпература;
    * **QT_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне значение;
19. Прылада - **WT**
    * **WT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_NOMINAL_W - номинальная нагрузка;
        * P_DT - дэльта;
        * P_RKP - рабочий коэффициент передачи;
        * P_CZ - зрух за нуль;
    * **WT_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне значение;
    * **WT_RS232**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
    * **WT_ETH**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_CZ - зрух за нуль;
    * **WT_PXC_AXL**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * P_DT - час парогавага фільтра;
        * P_CZ - зрух за нуль;
        * P_K - каэфіцыент прапарцыйнасці;

20. Прылада - **F**
    * **F**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * NOMINAL_CURRENT_CH - Зададзены ток канала (_4 канала_);
        * LOAD_CURRENT_CH - Бягучы ток канала (_4 канала_);
        * ST_CH - стан канала (_4 канала_);
        * ERR - Аварыя прылады;
        * ERR_CH - Аварыя канала (_4 канала_);
    * **F_VIRT**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;

21. Прылада - **ПИД-регулятор** варыяцыі камбінацый з рэгуляваннем CC (_TC, FC и др._)
    * ST - стан;
    * M - ручны рэжым;
    * V - аналагавае значэнне;
    * Z - задание.
22. Прылада - **HLA**
    * **HLA**
        * ST - стан;
        * M - ручны рэжым;
        * L_RED - стан чырвонай лямпачкі;
        * L_YELLOW - стан жоўтай лямпачкі;
        * L_GREEN - стан зялёнай лямпачкі;
        * L_SIREN - стан сірэны;
    * **HLA_VIRT**, **HLA_IOLINK**
        * ST - стан;
        * M - ручны рэжым;
        * L_BLUE - стан голубой лампочки;
        * L_RED - стан чырвонай лямпачкі;
        * L_YELLOW - стан жоўтай лямпачкі;
        * L_GREEN - стан зялёнай лямпачкі;
        * L_SIREN - стан сірэны;
23. Прылада - **CAM**
    * **CAM_DO1_DI1**
        * ST - стан;
        * M - ручны рэжым;
        * RESULT - вынік апрацоўкі;
    * **CAM_DO1_DI2** и **CAM_DO1_DI3**
        * ST - стан;
        * M - ручны рэжым;
        * RESULT - вынік апрацоўкі;
        * READY - гатоўнасць;
        * P_READY_TIME - лімітавы час адсутнасці гатоўнасці да працы, сек.
24. Прылада - **PDS**
    * **PDS**
        * ST - стан;
        * M - ручны рэжым;
        * P_DT - дельта;
    * **PDS_VIRT**
        * ST - стан;
        * M - ручны рэжым;
25. Прылада - **TS**
    * **TS**
        * ST - стан;
        * M - ручны рэжым;
        * P_DT - дельта;
    * **TS_VIRT**
        * ST - стан;
        * M - ручны рэжым;
26. Прылада - **G**
    * **G_IOL_4**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * NOMINAL_CURRENT_CH - Зададзены ток канала (_4 канала_);
        * LOAD_CURRENT_CH - Бягучы ток канала (_4 канала_);
        * ST_CH - стан канала (_4 канала_);
        * ERR - Аварыя прылады;
        * SUM_CURRENTS - Сумарны ток;
        * VOLTAGE - Напружанне;
        * OUT_POWER_90 - Перавышэнне 90% нагрузкі;
    * **G_IOL_8**
        * ST - стан;
        * M - ручны рэжым;
        * V - аналагавае значэнне;
        * NOMINAL_CURRENT_CH - Зададзены ток канала (_8 каналов_);
        * LOAD_CURRENT_CH - Бягучы ток канала (_8 каналов_);
        * ST_CH - стан канала (_8 каналов_);
        * ERR - Аварыя прылады;
        * SUM_CURRENTS - Сумарны ток;
        * VOLTAGE - Напружанне;
        * OUT_POWER_90 - Перавышэнне 90% нагрузкі;
27. Прылада - **WATCHDOG**
    * **WATCHDOG**
        * ST - стан;
        * M - ручны рэжым;
        * P_T_GEN - Інтэрвал генерацыі выходных імпульсаў;
        * P_T_ERR -Інтэрвал чакання змены ўваходу;
28. Прылада - **EY**
    * **DEV_CONV_AO2**
        * ST - стан;
        * V - аналагавае значэнне;
        * CH - Значэнне канала (_2 канала_);

Пратакалююцца: TE_V, QT_V, FQT_F, PT_V, VC_V, M_V, M_ST, LT_CLEVEL, V_ST, LS_ST, FS_ST, GS_ST,
 SB_ST, DI_ST, DO_ST, SB_ST, HL_ST, HA_ST, AO_V, AI_V.

Устанаўліваецца перыяд: TE_V, QT_V, LT_V, PT_V, AO_V, AI_V, FQT_F, M_V, VC_V, LT_CLEVEL, V_V.

__Заўвага:__
ПІД-рэгулятары экспартуюцца зыходзячы з базавага аб'екта (_калі абраны базавы аб'ект ПІД, то будзе экспартаваны дадаткова ПІД-рэгулятар, з нумарам аб'екта_).

#### 9.3 Экспарт тэхналагічных прылад у Excel ####

Экспарт, які выконваецца гэтым пунктам меню, стварае Excel-файл, у якім змяшчаецца розная інфармацыя, а менавіта:
+ Апісанне модуляў уводу-вываду (_прывязка, каляровае абазначэнне, нумары клем_);
+ Пералік усіх тэхналагічных прылад з тыпамі і падтыпамі, а гэтак жа з параметрамі пры іх наяўнасці;
+ Зводная табліца ўсіх прылад (_колькі і якіх прылад ўстаноўлена_);
+ Падлучэнне прылад (_тэкставае апісанне, як у акне "Прылады, параметры аб'ектаў"_);
+ Параметры аб'ектаў (_з рэдактара тэхналагічных аб'ектаў_);
+ Апісанне аперацый і прылад (_з рэдактара тэхналагічных аб'ектаў_).

##### 9.3.1 Экспарт інфармацыі для SCADA з праекта #####

Таксама, надбудова пры закрыцці праекта (_ці Eplan пры адкрытым праекце_), генеруе новы файл Excel у тэчцы _DOC_ з назовам _"<Название проекта> auto report"_. Гэты файл прызначаны для інжынераў, якія распрацоўваюць праекты ў SCADA сістэме. Дадзеныя, змешчаныя ў гэтым файле, пакрываюць іх запатрабаванне ў выкарыстанні Eplan. Такім чынам, гэта дазваляе менш выкарыстоўваць якія плаваюць ліцэнзіі Eplan, калі іх недастатковая колькасць.

### 10 Аб'ектная мадэль па ISA (S88, S95)

#### 10.1 Аб'ектная мадэль рэцэптурнай вытворчасці ####

![Аб'ектная мадэль](images/s88_objects.svg)

<p align="center"><b>Рысунак</b> - <i>Аб'ектная мадэль без модуляў кіравання</i></p>

<p align="center"><img src="images/control_modules_s88.svg" width=60%></p>

<p align="center"><b>Рысунак</b> - <i>Аб'ектная мадэль модуляў кіравання</i></p>

### 11 Сістэма дапамогі OSTIS

Гэта адкрыты [праект](https://github.com/savushkin-r-d/s88-ostis) асновы ведаў (сам праект OSTIS знаходзіцца [тут](https://github.com/ostis-dev)). Ён утрымоўвае ў сабе інфармацыю аб аб'ектнай мадэлі ISA-88, якая выкарыстоўваецца пры распрацоўцы праектаў з дапамогай надбудовы EasyEplanner.

Для выкарыстання гэтай базы ведаў неабходна вылучыць аб'ект у дрэве і націснуць кнопку <b>F1</b>. Надбудова згенеруе спасылку і адкрые яе ў браўзэры па змаўчанні. Калі апісанні дадзенага аб'екта няма, то спасылка будзе адчыненая з галоўнымі апісаннем стандарту ISA-88.

_Заўвага_: калі дрэва аб'ектаў не выдзелена, тое будзе адкрывацца стандартнае акно даведкі Eplan. У выпадку, калі дрэва будзе выдзелена і не будзе выдзелены ніякі элемент, надбудова паведаміць аб гэтым карыстальніка і ніякай спасылкі адкрыта не будзе.

База ведаў падтрымлівае наступныя мовы: рускую, англійскую, нямецкую, украінскую. Напоўненасць дадзенымі ў кожнай мове можа адрознівацца.

Наладка:
1. Для таго, каб змяніць адрас галоўнай старонкі, якая будзе адчыняцца, калі не знойдзена апісанне аб'екта, трэба адкрыць файл канфігурацыі <code>configuration.ini</code>, знайсці секцыю <code>helpSystem</code> і ў ключы <code>mainAddress</code> трэба паказаць адрас, які будзе адкрывацца.
2. Для змены адраса базы ведаў ostis (_асноўнай спасылкі_), трэба адкрыць файл канфігурацыі <code>configuration.ini</code>, знайсці секцыю <code>helpSystem</code> і ў ключы <code>address</code> трэба паказаць адрас, які будзе выкарыстоўвацца для генерацыі спасылак.

_Заўвага_: адрас базы ведаў (_асноўны_) выкарыстоўваецца для дадатку яго дадатковымі дадзенымі ў адрасным радку і адкрыццю спасылкі па новай атрыманай спасылцы.

### 12 Міжпраектны абмен сігналамі ###

Дадзены функцыянал дазваляе наладзіць абмен сігналамі паміж праектамі з дапамогай зручнага графічнага інтэрфейсу. Модуль аўтаматычна генеруе неабходныя файлы адразу ва ўсіх праектах, з якімі ён узаемадзеяння. Поўнае апісанне працы з модулем размешчана [тут](InterprojectExchange.md).

### 13 Наладка і праграмаванне апісання базавых аб'ектаў ###

Базавыя аб'екты не захоўваюцца ўнутры надбудовы, а падгружаюцца з файлаў з іх апісаннем. Надбудова можа мець больш за **1** файл апісання з базавымі аб'ектамі. Файлы з апісаннем захоўваюцца па наступным шляху: "**Lua\BaseObjectsDescriptionFiles**". У гэты каталог можна загружаць **.lua** файлы з апісаннем базавых аб'ектаў. Пры адсутнасці файлаў апісання ў каталозе з апісаннем (_ці самога каталога_), будзе створаны файл пустога шаблону (_шаблон апісаны ніжэй_). Неабходна запоўніць базавыя аб'екты па шаблоне (запаўняючы толькі тое, што канкрэтна трэба Вам), можна ў тым жа файле ці ў сваім уласным. Запоўнены файл трэба дадаць у дырэкторыю, апісаную вышэй.

У функцыі **get_main_packages()** запісваецца спіс модуляў, якія будуць дадавацца ў файле **main.plua** падчас генерацыі шаблона.


Файлы апісання павінны апісвацца па наступным шаблоне:
```LUA
-- Шаблон файла, які апісвае базавую функцыянальнасць.
-- У гэтым файле апісаны адзін пусты базавы аб'ект, для прыкладу.

-- Базавы аб'ект (назва табліцы - eplanName г.зн. LUA-імя аб'екта, пішацца ў любых рэгістрах):
-- 1. s88Level - узровень аб'екта па ISA-88 (1 - для асобных частак, апаратаў. 2 - для агрегатаў).
-- 2. name - рускамоўная назва аб'екта.
-- 3. baseOperations - апісанне базавых аперацый аб'екта.
-- 4. basicName - англамоўнае імя аб'екта, якое фігуруе ў функцыянальнасці (add_functionality).
-- Гэта імя павінна змяшчаць імя без прыпіскі "basic_"
-- 5. equipment - абсталяванне базавага аб'екта.
-- 6. aggregateParameters - параметры аб'екта, які з'яўляецца агрэгатам (якія будуць дададзены
-- у апарат, пры прывязцы агрэгата да апарата).
-- 7. bindingName - имя агрэгата, выкарыстоўванае пры прывязцы яго да апарата (для апаратаў не абавязкова).
-- 8. isPID - ці з'яўляецца ПИД-рэгулятарам.
-- 9. objectGroups - групы аб'ектаў (танкі, лініі і інш).
-- 10. system_params - сістэмныя параметры аб'екта.
-- 11. parameters - паказваюцца параметры аб'екта. Можна паказаць у выглядзе спасылкі на іншую пераменную,
-- якая ўяўляе параметр, ці ж апісаць самому ў выглядзе lua-табліцы. Пры апісанні ў выглядзе
-- спасылкі на зменную, параметры будуць ісці па парадку (па індэксах), а калі апісваць праз
-- Lua-табліцы, то па ключы Lua-табліцы. Пераважны першы варыянт, ён апісаны ніжэй па файле,
-- а менавіта, там дзе вызначана зменная object_parameters.
-- 12. luaModuleName - імя модуля Lua, у якім апісана логіка працы базавага аб'екта. Звычайна апісана
-- у скрыптах, якія ідуць у пастаўцы разам з гэтым файлам. На падставе гэтага імя ў prg.lua
-- будзе генеравацца загаловак падлучаемага модуля - require( "luaModuleName").
-- Пустое або адсутнае значэнне - модуль не будзе падлучаны.
-- 13. monitorName - імя аб'екта Monitor, якое будзе задавацца пры аўтаматычнай наладзе аб'екта
-- пры яго даданні ў дрэва. Калі не зададзена - будзе задавацца стандартнае значэнне - TankObj.
-- 14. baseProperties - базавыя (дадатковыя) уласцівасці аб'екта. Дадаюцца таксама, як і параметры
-- базавай аперацыі. За выключэннем таго, што даступныя толькі bool і active параметры.
-- 15. deprecated - састарэлы аб'ект ці не. Калі састарэлы - не будзе паказаны ў спісе базавых аб'ектаў,
-- але яго можна выкарыстоўваць ва ўжо існуючых праектах, дзе такія аб'екты выкарыстоўваюцца. Для гэтага
-- трэба дадаваць яго праз Insert у групе аб'ектаў.

-- Базавыя аперацыі (baseOperations) (назва табліцы - гэта Lua-імя аперацыі, пішацца ў верхнім рэгістры):
-- 1. name - рускамоўная назва аперацыі.
-- 2. params - параметры аперацыі, могуць быць актыўнымі, булевымі.
-- 3. state - стан базавай аперацыі, у якім знаходзяцца шагі.
-- 4. defaultPosition - пазіцыя аперацыі пры аўтаматычнай наладзе, калі ажыццяўляецца ўстаўка
-- аб'екта. Калі поле адсутнічае - аперацыя не будзе наладжвацца аўтаматычна.
-- Значэнні гэтага поля павінны быць ад 1 і не перасякацца (апцыянальна).

-- Базавы стан (state) - назва табліцы, гэта LUA-імя стану. Пакуль што гэта ўвесь функцыянал
-- стану. Унутры стану паказваюцца базавыя крокі (steps).
-- Існуючыя стану: IDLE (Просты), RUN (Выкананне), PAUSE (Паўза), STOP (Прыпынак), STARTING (Запускаецца), PAUSING (Становіцца ў паўзу), UNPAUSING (Выходзіць з паўзы), STOPPING (Спыняецца).

-- Базавыя шагі - шаг базавай аперацыі (steps). Назва табліцы – LUA-імя базавага шагу, у верхнім рэгістры.
-- Усярэдзіне табліцы паказваюцца наступныя палі:
-- 1. name = радковае абазначэнне імя шага.
-- 2. defaultPosition - па аналогіі з defaultPosition у базавай аперацыі, толькі адносіцца
-- да базавага шагу (апцыянальна).

-- Актыўныя параметры (active) - параметры, якія адлюстроўваюцца і захоўваюцца, маюць агульную апрацоўку,
-- якая характэрна для ўсіх такіх параметраў (назва табліцы - гэта Lua-імя параметра,
-- пішацца ў верхнім рэгістры):
-- 1. name - рускамоўнае імя параметра.
-- 2. defaultValue - значэнне па-змаўчанні (апцыянальна).
-- 3. displayObjects - спіс параметраў, які паказвае, што будзе адлюстроўвацца ў акне
-- графічнай налады параметра (акно "Прылады"), пры наладзе параметра.
-- Табліца displayObjects можа адсутнічаць.
-- Дапушчальныя ўласцівасці: signals - будуць дададзеныя сігналы AO, AI, DO, DI;
-- parameters - будуць дададзеныя ўсе параметры аб'екта.
-- Прыклад: displayObjects = { "signals", "parameters" } - будуць дададзены сігналы і параметры.

-- Булевыя параметры (bool) - аналаг актыўных параметраў, толькі маюць два значэнні - так ці не
-- (назва табліцы - гэта Lua-імя параметра, пішацца ў верхнім рэгістры):
-- 1. name - рускамоўнае імя параметру.
-- 2. defaultValue - значэнне па змаўчанні.

-- Галоўны параметр агрэгата (main) - аналог булевага параметру. З'яўляецца галоўным кіраўніком
-- параметрам агрэгата (кіруе даступнасцю параметраў). Мае толькі два значэнні - так ці не
-- (назва табліцы - гэта Lua-імя параметра, пішацца ў верхнім рэгістры):
-- 1. name - рускамоўнае імя параметру.
-- 2. defaultValue - значэнне па-змаўчанні.

-- Параметр абсталявання (equipment) – параметр для абсталявання. Апрацоўка падобная да дзеянняў
- у кроках аперацыі. Гэты тып параметру ствараецца, калі запаўняецца абсталяванне ў аб'екце.
-- Ствараецца табліцы equipment. Мае агульную апрацоўку, якая характэрна для
-- усіх такіх параметраў (назва табліцы - гэта Lua-імя параметра,
-- пішацца ў верхнім рэгістры):
-- 1. name - рускамоўнае імя параметру.
-- 2. defaultValue - значэнне па-змаўчанні (апцыянальна).

-- Групы аб'ектаў (objectGroups) - групы аб'ектаў (галоўным чынам для ліній). Унутры гэтай зменнай
-- паказваюцца групы аб'ектаў, якія патрэбныя ў аб'екце.
-- Назва табліцы - Lua-імя групы, пішацца ў любым рэгістры:
-- 1. name - рускамоўная назва гурта.
-- 2. allowedObjects - паказваецца адзін з даступных тыпаў аб'екта ў выглядзе радка (units, aggregates, all).
-- Стандартнае значэнне - aggregates, яно будзе выкарыстоўвацца, калі не паказаць гэтае поле.

-- Абсталяванне - параметр абсталявання.
-- Параметры аб'екта, як агрэгата - па аналогіі з актыўнымі і булеўскімі параметрамі і
- Галоўным параметрам агрэгата, ён з'яўляецца абавязковым для агрэгата. main-параметр задаецца толькі адзін!

-- Сістэмныя параметры аб'екта (systemParams) - сістэмныя параметры аб'екта, якія выкарыстоўваюцца
- У кантролеры. Даступныя толькі для чытання, можна мяняць толькі значэнне.
-- Індэкс табліцы - паказвае яго нумар у спісе параметраў.
-- 1. name - рускамоўная назва параметру
-- 2. meter - адзінка вымярэння параметру
-- 3. defaultValue - стандартнае значэнне параметру
-- 4. nameLua - LUA-імя параметру

base_tech_objects = function()
return
    {
        uniqueEplanName = { -- Унікальнае Lua-імя абъ'кта
            name = "",
            s88Level = 0,
            baseOperations =
            {
                uniqueOperationLuaName = { -- Унікальнае Lua-імя аперации
                    name = "",
                    params =
                    {
                        active = -- Актыўныя параметры
                        {
                            uniqueLuaName = { name = "Имя", defaultValue = "Значэнне па змаўчанні" },
                        },
                        bool = -- Булевыя актыўныя параметры
                        {
                            uniqueLuaName = { name = "Имя", defaultValue = "Значэнне па змаўчанні" },
                        },
                    },
                    state = -- Стан
                    {
                        RUN =
                        {
                            steps = -- Шагі
                            {
                                uniqueLuaName = { name = "імя" }
                            },
                       },
                    },
                },
            },
            basicName = "",
            equipment = -- Абсталяванне
            {
                uniqueLuaName = { name = "імя", defaultValue = "Значэнне па змаўчанні" },
            },
            aggregateParameters = -- Параметры агрэгата
            {
                uniqueLuaName = { name = "Имя", defaultValue = "Значэнне па змаўчанні" },
            },
            bindingName = "Lua-імя для прывязкі",
            system_params =
            {
                 [ 1 ] =
                     {
                         name = "Назва параметра",
                         meter = "адз.вым.",
                         defaultValue = 20,
                         nameLua = "parLuaName",
                     },
            },
            parameters = { object_parameters.ParLuaName1, },
            luaModuleName = "name",
            monitorName = "TankObj",
            baseProperties =
            {
                active = -- Актыўныя параметры
                        {
                            uniqueLuaName = { name = "Імя", defaultValue = "Значэнне па змаўчанні", displayObjects = { "signals" }, },
                        },
                        bool = -- Булевыя актыўныя параметры
                        {
                            uniqueLuaName = { name = "Имя", defaultValue = "Значэнне па змаўчанні" },
                        },
            },
        },
    }
end

-- Тут утрымоўваецца агульны пул параметраў, для базавых аб'ектаў. Параметры
-- наладжваюцца наступным чынам:
-- 1. luaName - паказваецца радковае Lua-імя параметра. Гэта Lua-імя дублюецца
-- у назве зменнай (табліцы) параметру.
-- 2. name - паказваецца радковая якая адлюстроўваецца назоў.
-- 3. value - паказваецца пачатковае значэнне параметра.
-- (цэлы лік або лік з якая плавае коскі).
-- 4. meter - паказваецца адзінка вымярэння ў выглядзе радка.
object_parameters =
{
    ParLuaName1 = {
        luaName = "ParLuaName1",
        name = "Назва параметра",
        value = 20,
        meter = "сек",
    },
}

-- Тут змяшчаецца спіс шляхоў да модуляў, якія дадаюцца ў шаблон кіруючай праграмы "main.plua"
get_main_packages = function()
    return
    {
        ";./dairy-sys/?.lua",
    }
end
```

### 14 Автоматическая генерация описания для IOL-Conf ###

Для **IO-Link** модуляў уводу-высновы **Phoenix Contact** і **IO-Link** прылад можна згенераваць аўтаматычнае апісанне, якое можа быць загружана праз **IOL-Conf** у модуль уводу-высновы, тым самым атрымаем аўтаматычную наладу на аснове апісання **EPLAN**.

**Заўвага**: **IODD** файлы павінны быць загружаны ў **IOL-Conf** для аўтаматычнай налады адрасоў уводу-вываду на клемах модуля ўводу-вываду.
У надбудове ёсць каталог **IOL-Conf**, усярэдзіне яго каталогі **Devices** і **Modules**.

**Modules** - служыць для захоўвання шаблонаў апісання модуляў уводу-высновы **IO-Link** у **.lrp** фармаце. Назва файла шаблону павінна супадаць з назвай выраба ў EPLAN.
**Devices** - аналагічна каталогу **Modules**, толькі для **IO-Link** прылад.

Механізм генерацыі прапускае модуль ці прыладу ў чарзе на генерацыю апісання, калі не знойдзены шаблон. Калі не знойдзены шаблон прылады, прапусціць прыладу, а калі не знойдзены шаблон модуля, то прапусціць увесь модуль у т.л. і прылады размешчаныя на ім.

Гатовыя канфігурацыі будуць захаваны ў каталогу **IOL-Conf** у тэчцы з файламі праекту, файлы канфігурацыі падзеленыя па модулях і маюць імя, як на схемах ФСА (_A100, A200, і т.д._) у фармаце **.lrp**.

#### 14.1 Стварэнне шаблонаў прылад і модуляў уводу/вываду ####

Для таго, каб атрымаць шаблон для модуля ўводу-высновы, трэба падлучыцца да модуля праз **IOL-Conf**, абраць яго і захаваць канфіг.

<p align="center"><img src="images/loadSaveConfigs.png"></p>

Трэба абавязкова абраць толькі нешта адно (_модуль ці прылада_)
<p align="center"><img src="images/choosingModuleOrDevice.png" width=60%></p>

І націснуць кнопку захаваць. Пасля гэтага, увесці назву выраба і захаваць.

**Заўвага**: карэктнае захаванне модуля ўводу-вываду магчыма, калі ў ім не вызначаны прылады (_парты пустыя_).

<p align="center"><img src="images/emptyPortsExample.png"></p>

#### 14.2 Наладка параметраў прылад ####

Функцыянал падтрымлівае наладку параметраў прылады па ім вырабу. Для гэтага трэба ведаць імя параметру, якое трэба наладзіць, і значэнне, якое трэба пазначыць. Імя параметра можна паглядзець у шаблоне прылады, у атрыбуце **Id**.

Указваюцца параметры ў **Дад.. полі [7]** прылады.

<p align="center"><img src="images/iolconfDeviceParameters.png"></p>

Параметры запісваюцца ў выглядзе: `<Назва параметра>=<Значэнне>`, падзельнікам параметраў з'яўляецца **коска**. Раздзяляльнік цэлай часткі лікаў - "кропка".

**ВАЖНА**: Калі зменены параметр у шаблоне мае **InternalValue** і **Value** роўныя **0**, то параметр не можа быць усталяваны. Гэтая праблема вырашаецца усталёўкай значэння выдатнага ад нуля. Гэта адбываецца з-за разліку градыенту (_каэфіцыента_), на аснове якога працуе IOL-Conf. Карыстальнік паказвае толькі **Value**, а **InternalValue** ужо разлічваецца на аснове радкоў шаблона па прапорцыі.

#### 14.3 Магчымыя паведамленні акна логаў, і шляхі іх рашэння ####

**E** - exception/памылка.
**S** - solution/exception

**E**: Шаблон <*путь да шаблону*> з памылкай.  
**S**: Нешта не так з шаблонам, які падаў **IOL-Conf**. Шаблон трэба паўторна выгрузіць (*пры ўмове, што яго не кіравалі ўручную*). Звычайна, гэта значыць, што змянілася схема **XML** і патрэбна мяняць яе ў EasyEplanner.

**E**: В устройстве <имя устройства в EPLAN> зададзена ўласцівасць <имя свойства>, яго не існуе ў шаблоне прылады <изделие устройства>.  
**S**: Было зададзена параметр, якога ў шаблоне няма. Альбо змяніўся шаблон, ці карыстач памыліўся пры ўводзе імя параметру. Праверце шаблоны, магчыма няправільна злучаны з вырабам, альбо ён змяніўся і такой уласцівасці ў ім больш няма.

**E**: Шаблон <*путь к шаблону*> ужо існуе.  
**S**: Такі шаблон ужо быў прачытаны і дададзены ў спіс шаблонаў. Праверце тэчкі **Devices** и **Modules**, недзе супадаюць імёны файлаў шаблонаў.

**E**: Параметр клемы <*название параметра*> модуля <*имя модуля ввода-вывода прим., А100*> <*изделие модуля*> не знойдзены.  
**S**: Імя параметраў партоў (*в шаблоне они в атрибуте **Id***) зараз зашыта ў код т.к яно ўсюды аднолькавае, а менавіта "**V_PortConfig_ХХ**", дзе **ХХ** - нумар, двухзначны (*01, 02, 03, и т.д*). Трэба правяраць шаблон, ці памяняўся ён. Калі так (*больш за 2-х тыпаў назваў*), то трэба паправіць EasyEplanner. Канфігуратар не можа наладзіць рэжымы працы клем на модулі ўводу-вываду.

**E**: У шаблоне выраба <**имя изделия**>, параметр <**параметр изделия из шаблона**> змяшчае ў сябе **Value** ці **InternalValue** роўнае **0**. Дзяленне на **0**. Усталюйце іншыя значэнні ў шаблоне.  
**S**: Гэта адбываецца, калі стандартнае значэнне **InternalValue** и **Value** раўняецца **0**. Я не магу палічыць множнік градыенту (*на які мы памнажаем **Value**, каб атрымаць **InternalValue***). Таму трэба ў шаблоне змяніць гэты параметр (*через IOL-Conf*) на дапушчальныя значэння. Пасля гэтага, усё будзе лічыцца як трэба. Калі параметр не змяняецца, але мае **Value** и **InternalValue** роўнае **0**, то гэта мае месца быць.

**E**: Немагчыма праверыць існаванне тэчак з шаблонамі IOL-Conf.  
**S**: Гэтая памылка не павінна ўвогуле з'яўляцца. Яна з'яўляецца, калі EasyEplanner не можа знайсці шлях да dll. Такое магчыма пры ўмове, што нехта сапсаваў зыходны код і не пратэставаў змены. Верагоднасць памылка 1%.

**E**: Немагчыма знайсці генераваныя файлы праекту.  
**S**: Файлы праекту не знойдзены. Магчыма такое, калі хтосьці кіраваў код і не праверыў змены. Таксама, такое магчыма, калі ў файле configuration.ini не паказваць наогул ніякі шлях да файлаў праекту, але тады апісанне становіцца няправільным. У нас па змаўчанні ўжо нейкія шляхі ды зададзены. Верагоднасць памылкі 1%.

**E**: Каталогі не створаны, спачатку стварыце каталогі.
**S**: Толькі дасягаецца з кода. Хтосьці змяніў паслядоўнасць метадаў і перадаў няправільныя дадзеныя. Верагоднасць і прычыны з'яўлення такія ж, як і ў папярэдніх дзвюх памылках.

**E**: Адсутнічаюць апісанні прылад.
**S**: В папке **Devices** нет ни одного шаблона, который мог бы быть считан. Будет показана эта ошибка, но описание модулей будет сгенерировано.

**E**: Отсутствуют описания модулей ввода-вывода.  
**S**: У каталоге **Modules** няма ніводнага шаблону, які мог бы быць лічаны. Генерацыя працаваць не будзе.

**E**: Шаблоны не загружаны, загрузіце шаблоны.
**S**: Хтосьці ў кодзе прапусціў этап загрузкі шаблонаў ці зламаў іх. Верагоднасць памылкі 1%. Адбываецца па віне праграміста.
